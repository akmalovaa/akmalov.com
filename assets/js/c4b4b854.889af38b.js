"use strict";(self.webpackChunkakmalov_com=self.webpackChunkakmalov_com||[]).push([[7845],{1698:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var t=s(4848),o=s(8453);const r={sidebar_position:2,title:"K8s commands"},c=void 0,i={id:"kubernetes/commands",title:"K8s commands",description:"k8s resources usage",source:"@site/docs/kubernetes/commands.md",sourceDirName:"kubernetes",slug:"/kubernetes/commands",permalink:"/docs/kubernetes/commands",draft:!1,unlisted:!1,editUrl:"https://github.com/akmalovaa/akmalov.com/tree/main/docs/kubernetes/commands.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"K8s commands"},sidebar:"tutorialSidebar",previous:{title:"Kubernetes",permalink:"/docs/category/kubernetes"},next:{title:"K8s \u0437\u0430\u043c\u0435\u0442\u043a\u0438",permalink:"/docs/kubernetes/k8s-notes"}},a={},l=[{value:"k8s resources usage",id:"k8s-resources-usage",level:2},{value:"k8s top script",id:"k8s-top-script",level:2},{value:"kubectl logs",id:"kubectl-logs",level:2}];function d(e){const n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"k8s-resources-usage",children:"k8s resources usage"}),"\n",(0,t.jsx)(n.p,{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u044f \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432 \u0432\u043d\u0443\u0442\u0440\u0438 \u043f\u043e\u0434\u0430"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl -n name-space top pod --containers _\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 node"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl top node --sort-by=cpu\n"})}),"\n",(0,t.jsx)(n.p,{children:"in container usage show"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cat /sys/fs/cgroup/memory/memory.usage_in_bytes\n"})}),"\n",(0,t.jsx)(n.p,{children:"limits"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cat /sys/fs/cgroup/memory/memory.memsw.limit_in_bytes\n"})}),"\n",(0,t.jsx)(n.h2,{id:"k8s-top-script",children:"k8s top script"}),"\n",(0,t.jsx)(n.p,{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u043f\u043e\u0434\u043e\u0432 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0438\u0441\u0430"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"for pod in $(kubectl -n name-space get po | grep dialogs | awk '{print $1}'); do echo \"top ${pod}\"; kubectl -n name-space top pod $pod; done\n"})}),"\n",(0,t.jsx)(n.h2,{id:"kubectl-logs",children:"kubectl logs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl -n name-space logs -l app=app_name --all-containers --tail=1 -f --max-log-requests=45 | grep -v health\n"})}),"\n",(0,t.jsx)(n.p,{children:"kubectl resources container"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl -n name-space top pod --containers container-5c5968d4f9-bbvrm\n"})}),"\n",(0,t.jsx)(n.p,{children:"keydb logs pod"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kubectl -n name-space logs -l app=app_name --all-containers --tail=1 -f --max-log-requests=45 | grep -v health\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>i});var t=s(6540);const o={},r=t.createContext(o);function c(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);