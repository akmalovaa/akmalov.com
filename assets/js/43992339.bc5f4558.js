"use strict";(self.webpackChunkakmalov_com=self.webpackChunkakmalov_com||[]).push([[4911],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>k});var r=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,r,l=function(e,t){if(null==e)return{};var a,r,l={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=r.createContext({}),i=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},s=function(e){var t=i(e.components);return r.createElement(p.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,l=e.mdxType,n=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),m=i(a),u=l,k=m["".concat(p,".").concat(u)]||m[u]||d[u]||n;return a?r.createElement(k,c(c({ref:t},s),{},{components:a})):r.createElement(k,c({ref:t},s))}));function k(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var n=a.length,c=new Array(n);c[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[m]="string"==typeof e?e:l,c[1]=o;for(var i=2;i<n;i++)c[i]=a[i];return r.createElement.apply(null,c)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},102:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>d,frontMatter:()=>n,metadata:()=>o,toc:()=>i});var r=a(7462),l=(a(7294),a(3905));const n={slug:"wildcard-ssl-cert",title:"Auto wildcard cert service",description:"\u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c wildcard ssl \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0434\u043b\u044f \u0441\u0432\u043e\u0435\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c Cloudflare \u0438 acme.sh",image:"./wildcard-logo.png",tags:["ssl","cloudflare","cert","wildcard","linux","docker","acme"],date:"2023-09-23T10:00"},c=void 0,o={permalink:"/blog/wildcard-ssl-cert",editUrl:"https://github.com/akmalovaa/akmalov.com/tree/main/blog/wildcard-ssl-cert/index.md",source:"@site/blog/wildcard-ssl-cert/index.md",title:"Auto wildcard cert service",description:"\u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c wildcard ssl \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0434\u043b\u044f \u0441\u0432\u043e\u0435\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c Cloudflare \u0438 acme.sh",date:"2023-09-23T10:00:00.000Z",formattedDate:"23 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f 2023 \u0433.",tags:[{label:"ssl",permalink:"/blog/tags/ssl"},{label:"cloudflare",permalink:"/blog/tags/cloudflare"},{label:"cert",permalink:"/blog/tags/cert"},{label:"wildcard",permalink:"/blog/tags/wildcard"},{label:"linux",permalink:"/blog/tags/linux"},{label:"docker",permalink:"/blog/tags/docker"},{label:"acme",permalink:"/blog/tags/acme"}],readingTime:3.56,hasTruncateMarker:!0,authors:[],frontMatter:{slug:"wildcard-ssl-cert",title:"Auto wildcard cert service",description:"\u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c wildcard ssl \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0434\u043b\u044f \u0441\u0432\u043e\u0435\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c Cloudflare \u0438 acme.sh",image:"./wildcard-logo.png",tags:["ssl","cloudflare","cert","wildcard","linux","docker","acme"],date:"2023-09-23T10:00"},prevItem:{title:"Uptime-kuma self-hosted monitoring",permalink:"/blog/uptime-kuma"},nextItem:{title:"Monitoring web hosts",permalink:"/blog/monitoring-web-hosts"}},p={image:a(1635).Z,authorsImageUrls:[]},i=[{value:"Wildcard \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442",id:"wildcard-\u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442",level:2},{value:"ACME Shell script",id:"acme-shell-script",level:2},{value:"Cloudflare",id:"cloudflare",level:2},{value:"Docker acme.sh",id:"docker-acmesh",level:2}],s={toc:i},m="wrapper";function d(e){let{components:t,...n}=e;return(0,l.kt)(m,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"\u041f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c wildcard SSL \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0434\u043b\u044f \u0441\u0432\u043e\u0435\u0433\u043e \u0434\u043e\u043c\u0435\u043d\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c Cloudflare \u0438 acme.sh"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"/blog/wildcard-ssl-cert"},(0,l.kt)("img",{alt:"wildcard ssl cert",src:a(1635).Z,width:"1498",height:"500"}))),(0,l.kt)("h2",{id:"wildcard-\u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442"},"Wildcard \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442"),(0,l.kt)("p",null,"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f \u0438\u0437\u0443\u0447\u0430\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 OpenSource \u043f\u0440\u043e\u0435\u043a\u0442\u044b, \u0438 \u0441\u0435\u0439\u0447\u0430\u0441 \u0434\u043b\u044f \u043c\u043d\u043e\u0433\u0438\u0445 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u044e \u0443 \u0441\u0435\u0431\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445 \u0442\u0440\u0435\u0431\u0443\u044e\u0442\u0441\u044f \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b SSL"),(0,l.kt)("p",null,"\u0418\u043c\u0435\u0435\u0442\u0441\u044f \u0441\u0432\u043e\u0439 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0434\u043e\u043c\u0435\u043d ",(0,l.kt)("inlineCode",{parentName:"p"},"akmalov.com")," \u0438 \u043f\u043e\u0434\u0434\u043c\u0435\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f ",(0,l.kt)("inlineCode",{parentName:"p"},"*.akmalov.com")," \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0432 \u043b\u044e\u0431\u043e\u043c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435 \u0438 \u043d\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430"),(0,l.kt)("p",null,"\u0420\u0430\u043d\u044c\u0448\u0435 \u043f\u0440\u043e\u0431\u043e\u0432\u0430\u043b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u0446\u0435\u043d\u0442\u0440 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438, \u043f\u0440\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u043b \u0432 \u0434\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0445, \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u043b \u0441\u0430\u043c\u043f\u043e\u043f\u043e\u0434\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b (\u043e\u0447\u0435\u043d\u044c \u043d\u0435\u0443\u0434\u043e\u0431\u043d\u043e, \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432 \u0434\u043b\u044f \u043f\u0435\u0441\u043e\u0447\u043d\u0438\u0446\u044b).\n\u0414\u0430\u043b\u0435\u0435 \u0440\u0435\u0448\u0438\u043b \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u043a\u0440\u0438\u043f\u0442\u044b \u0438 \u0434\u043b\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u043e\u0434\u0434\u043e\u043c\u0435\u043d\u043e\u0432 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u043b \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e ",(0,l.kt)("strong",{parentName:"p"},"Let's Encrypt")," \u0438 \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u0434\u0434\u043e\u043c\u0435\u043d\u043e\u0432 \u043d\u0430\u0431\u0440\u0430\u043b\u043e\u0441\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0434\u0435\u0441\u044f\u0442\u043a\u0430 \u0440\u0435\u0448\u0438\u043b \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c ",(0,l.kt)("strong",{parentName:"p"},"wildcard")," \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u0434\u0434\u043e\u043c\u0435\u043d\u043e\u0432."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u041e\u0434\u0438\u043d \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u0434\u0434\u043e\u043c\u0435\u043d\u043e\u0432")),(0,l.kt)("p",null,(0,l.kt)("a",{target:"_blank",href:a(7333).Z},(0,l.kt)("img",{alt:"wildcard",src:a(7997).Z,width:"942",height:"408"}))),(0,l.kt)("h2",{id:"acme-shell-script"},"ACME Shell script"),(0,l.kt)("p",null,"\u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e \u043a\u0430\u043a \u043f\u0435\u0440\u0435\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u043b \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432, \u0434\u043b\u044f \u043c\u0435\u043d\u044f \u0441\u0430\u043c\u044b\u043c \u0443\u0434\u043e\u0431\u043d\u044b\u043c \u043f\u043e\u043a\u0430\u0437\u0430\u043b\u0441\u044f ",(0,l.kt)("strong",{parentName:"p"},"acme.sh")),(0,l.kt)("p",null,"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043e\u0444\u0444 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/acmesh-official/acme.sh"},"Github")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Unix shell \u0441\u043a\u0440\u0438\u043f\u0442 \u0431\u0435\u0437 \u043b\u0438\u0448\u043d\u0438\u0445 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439"),(0,l.kt)("li",{parentName:"ul"},"\u041d\u0435 \u043d\u0443\u0436\u043d\u044b root \u043f\u0440\u0430\u0432\u0430"),(0,l.kt)("li",{parentName:"ul"},"\u0415\u0441\u0442\u044c docker \u043e\u0431\u0440\u0430\u0437"),(0,l.kt)("li",{parentName:"ul"},"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 IPv6"),(0,l.kt)("li",{parentName:"ul"},"\u041c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432 cron-job \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432"),(0,l.kt)("li",{parentName:"ul"},"\u041f\u0440\u043e\u0441\u0442\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"),(0,l.kt)("li",{parentName:"ul"},"\u0423\u043c\u0435\u0435\u0442 \u043f\u043e API \u043e\u0431\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f \u043a Cloudflare")),(0,l.kt)("h2",{id:"cloudflare"},"Cloudflare"),(0,l.kt)("p",null,"\u0414\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f\u043c\u0438 DNS \u0437\u0430\u043f\u0438\u0441\u044f\u043c\u0438 \u0434\u043e\u043c\u0435\u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e Cloudflare, \u0438\u0437 \u0437\u0430 \u0435\u0433\u043e \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438 \u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e API, \u0434\u043b\u044f \u043c\u043d\u043e\u0433\u0438\u0445 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 \u0435\u0441\u0442\u044c \u043e\u0447\u0435\u043d\u044c \u0443\u0434\u043e\u0431\u043d\u044b\u0435 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438. \u041e\u0434\u043d\u0430 \u0438\u0437 \u043f\u0440\u0438\u0447\u0438\u043d \u0432\u044b\u0431\u043e\u0440\u0430 acme.sh \u044d\u0442\u043e \u043a\u0430\u043a \u0440\u0430\u0437, \u0442\u043e \u0447\u0442\u043e \u043e\u043d \u0434\u0440\u0443\u0436\u0438\u0442 Cloudflare."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"\u0415\u0441\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u0440\u0443\u0433\u043e\u0439 DNS \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440, \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0440\u0443\u0447\u043d\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0433\u0434\u0435 \u043f\u0440\u0438\u0434\u0435\u0442\u0441\u044f \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c ",(0,l.kt)("inlineCode",{parentName:"p"},"TXT")," \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0430\u0434\u043c\u0438\u043d\u043a\u0435 \u0434\u043e\u043c\u0435\u043d\u0430")),(0,l.kt)("p",null,"\u041f\u043e\u0448\u0430\u0433\u043e\u0432\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 API \u0442\u043e\u043a\u0435\u043d\u0430 \u0432 Cloudflare:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442 ",(0,l.kt)("a",{parentName:"li",href:"https://dash.cloudflare.com"},"Cloudflare")),(0,l.kt)("li",{parentName:"ul"},"\u041d\u0430\u0436\u0430\u0442\u044c \u043d\u0430 \u0438\u043a\u043e\u043d\u043a\u0443 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0432 \u0432\u0435\u0440\u0445\u043d\u0435\u0439 \u0447\u0430\u0441\u0442\u0438 \u044d\u043a\u0440\u0430\u043d\u0430 \u0438 \u0432\u044b\u0431\u0440\u0430\u0442\u044c ",(0,l.kt)("strong",{parentName:"li"},"My Profile")," \u0432 \u0432\u044b\u043f\u0430\u0434\u0430\u044e\u0449\u0435\u043c \u043c\u0435\u043d\u044e."),(0,l.kt)("li",{parentName:"ul"},"\u0414\u0430\u043b\u0435\u0435 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 ",(0,l.kt)("strong",{parentName:"li"},"API Tokens")," \u043d\u0430 \u043b\u0435\u0432\u043e\u0439 \u043f\u0430\u043d\u0435\u043b\u0438 \u043c\u0435\u043d\u044e."),(0,l.kt)("li",{parentName:"ul"},"\u041d\u0430\u0436\u0430\u0442\u044c \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 ",(0,l.kt)("strong",{parentName:"li"},"Create Token")," \u0432 \u0432\u0435\u0440\u0445\u043d\u0435\u0439 \u0447\u0430\u0441\u0442\u0438 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b."),(0,l.kt)("li",{parentName:"ul"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0442\u0438\u043f \u0442\u043e\u043a\u0435\u043d\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0443\u0436\u0435\u043d, \u0437\u0430\u0434\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0438 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0434\u043b\u044f \u0442\u043e\u043a\u0435\u043d\u0430. "),(0,l.kt)("li",{parentName:"ul"},"\u041d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0442\u043e\u043a\u0435\u043d\u0430 \u043d\u0443\u0436\u043d\u043e \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c  ",(0,l.kt)("strong",{parentName:"li"},"API Token")," \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0435\u0433\u043e (\u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u0435\u0433\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f, \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0435\u0441\u043e\u0437\u0434\u0430\u0442\u044c)")),(0,l.kt)("admonition",{title:"\u041e\u0441\u0442\u043e\u0440\u043e\u0436\u043d\u043e",type:"danger"},(0,l.kt)("p",{parentName:"admonition"},"\u0422\u043e\u043a\u0435\u043d \u043d\u0435\u043b\u044c\u0437\u044f \u0441\u0432\u0435\u0442\u0438\u0442\u044c \u0433\u0434\u0435 \u043f\u043e\u043f\u0430\u043b\u043e")),(0,l.kt)("p",null,(0,l.kt)("a",{target:"_blank",href:a(4730).Z},(0,l.kt)("img",{alt:"Cloudflare",src:a(2569).Z,width:"1285",height:"483"}))),(0,l.kt)("h2",{id:"docker-acmesh"},"Docker acme.sh"),(0,l.kt)("p",null,"\u041a\u0430\u043a \u043e\u0434\u0438\u043d \u0438\u0437 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u043f\u043e\u043a\u043b\u043e\u043d\u043d\u0438\u043a\u043e\u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432, \u043d\u0435 \u0444\u0430\u043d\u0430\u0442 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0447\u0442\u043e-\u043b\u0438\u0431\u043e \u043d\u0430 \u0445\u043e\u0441\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u0443, \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u044d\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0432.\n\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0438\u0441\u0430 \u0442\u0430\u043a\u043e\u0433\u043e \u0436\u0435 \u043c\u043d\u0435\u043d\u0438\u044f \ud83d\udc95"),(0,l.kt)("p",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430 Github - ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/acmesh-official/acme.sh/wiki/Run-acme.sh-in-docker"},(0,l.kt)("strong",{parentName:"a"},"Run acme.sh in docker"))),(0,l.kt)("p",null,"\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0431\u0440\u0430\u0437 ",(0,l.kt)("a",{parentName:"p",href:"https://hub.docker.com/r/neilpang/acme.sh"},(0,l.kt)("strong",{parentName:"a"},"Dockerhub"))),(0,l.kt)("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0438\u043b\u0438 tag ",(0,l.kt)("inlineCode",{parentName:"p"},"latest"),", \u043f\u0440\u0438\u0432\u044b\u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"docker pull neilpang/acme.sh:3.0.6 \n")),(0,l.kt)("p",null,"\u0414\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u0441 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u043c\u0438 \u0431\u0443\u0434\u0443 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ",(0,l.kt)("inlineCode",{parentName:"p"},".env")," \u0444\u0430\u0439\u043b, \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"EMAIL=artur@example.com\nURL=example.com\nWILDCARD_URL=*.example.com\n\nCF_Token=Your cloudflare API TOKEN\n")),(0,l.kt)("p",null,"\u0412 \u043d\u0430\u0447\u0430\u043b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 ACME \u043f\u043e ",(0,l.kt)("strong",{parentName:"p"},"email"),", \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u043b\u044e\u0447\u0430."),(0,l.kt)("p",null,"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 \u0444\u0430\u0439\u043b, \u043d\u0443\u0436\u0435\u043d \u0431\u0443\u0434\u0435\u0442 \u0434\u043b\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0438 \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0435\u0433\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432\u043d\u0435 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430."),(0,l.kt)("p",null,"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 ",(0,l.kt)("inlineCode",{parentName:"p"},'-v "./acme_data":/acme.sh')," \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u0442 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e \u043d\u0430 \u0445\u043e\u0441\u0442\u0435 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0432 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0431\u0443\u0434\u0443\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c\u0441\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0438 \u043e\u0441\u0442\u0430\u043d\u0443\u0442\u0441\u044f \u0434\u0430\u0436\u0435 \u043a\u043e\u0433\u0434\u0430 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043e\u0442\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0438 \u0437\u0430\u043a\u0440\u043e\u0435\u0442\u0441\u044f."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'docker run --rm --env-file .env -v "./acme_data":/acme.sh neilpang/acme.sh:3.0.6 --register-account -m $EMAIL\n')),(0,l.kt)("p",null,"\u0412 \u043b\u043e\u0433\u0430\u0445 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0431 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"> Create account key ok.\n> Registered\n> ACCOUNT_THUMBPRINT='ACCOUNT KEY'\n")),(0,l.kt)("p",null,"\u0417\u0430\u043f\u0440\u043e\u0441 ",(0,l.kt)("strong",{parentName:"p"},"wildcard")," \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u0430"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'docker run --rm --env-file .env -v "./acme_data":/acme.sh neilpang/acme.sh:3.0.6 --issue -d $URL -d $WILDCARD_URL  --dns dns_cf\n')),(0,l.kt)("p",null,"\u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e 3-7 \u043c\u0438\u043d\u0443\u0442"),(0,l.kt)("p",null,"\u0412 \u043b\u043e\u0433\u0430\u0445 \u043f\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0430:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"> Multi domain='DNS:example.com,DNS:*.example.com'\n> Getting domain auth token for each domain\n> Getting webroot for domain='example.com'\n> Getting webroot for domain='*.example.com'\n> Adding record\n> Added, OK\n> The txt record is added: Success.\n> Let's check each DNS record now. Sleep 20 seconds first.\n> Checking example.com for _acme-challenge.example.com\n> Domain example.com '_acme-challenge.example.com' success.\n> All success, let's return\n> Verifying: example.com\n> Processing, The CA is processing your order, please just wait. (1/30)\n> Success\n> Removing DNS records.\n> Removed: Success\n> Downloading cert.\n> Cert success.\n")),(0,l.kt)("p",null,"\u0421\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u0438 \u0433\u043e\u0442\u043e\u0432 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f (\u0441\u0440\u043e\u043a 3 \u043c\u0435\u0441\u044f\u0446\u0430), \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 ",(0,l.kt)("inlineCode",{parentName:"p"},"./acme_data")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ls -la acme_data/example.com_ecc\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-output"},"-rw-r--r-- 1456 Sep 24 18:33 example.com.cer\n-rw-r--r--  566 Sep 24 18:33 example.com.conf\n-rw-r--r--  477 Sep 24 18:29 example.com.csr\n-rw-r--r--  202 Sep 24 18:29 example.com.csr.conf\n-rw-------  227 Sep 24 18:28 example.com.key\n-rw-r--r-- 2668 Sep 24 18:33 ca.cer\n-rw-r--r-- 4124 Sep 24 18:33 fullchain.cer\n")),(0,l.kt)("p",null,"\u041c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"openssl x509 -in acme_data/example.com_ecc/example.com.cer -text -noout\n")),(0,l.kt)("p",null,"\u0438\u043b\u0438 \u043e\u043d\u043b\u0430\u0439\u043d \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c ",(0,l.kt)("a",{parentName:"p",href:"https://www.sslshopper.com/certificate-decoder.html"},"Certificate Decoder")),(0,l.kt)("p",null,"\u0414\u0430\u043b\u044c\u0448\u0435 \u0442\u043e\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u0441\u043e\u0437\u0434\u0430\u0432 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043a\u0443\u0434\u0430 \u043d\u0443\u0436\u043d\u043e."))}d.isMDXComponent=!0},4730:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/files/cloudflare-api-010f4fa6a891018ed0ab788080a40177.png"},7333:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/files/wildcard-baf20bbce2641b2b9185a38df454ec3f.jpg"},2569:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/cloudflare-api-010f4fa6a891018ed0ab788080a40177.png"},1635:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/wildcard-logo-b96826c9a1c679c2e1aa0962a1f3f713.png"},7997:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/wildcard-baf20bbce2641b2b9185a38df454ec3f.jpg"}}]);