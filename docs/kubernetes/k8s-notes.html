<!doctype html>
<html lang="ru" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-kubernetes/k8s-notes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Notes | Artur Akmalov</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://akmalov.com/img/logo.svg"><meta data-rh="true" name="twitter:image" content="https://akmalov.com/img/logo.svg"><meta data-rh="true" property="og:url" content="https://akmalov.com/docs/kubernetes/k8s-notes"><meta data-rh="true" property="og:locale" content="ru"><meta data-rh="true" name="docusaurus_locale" content="ru"><meta data-rh="true" name="docsearch:language" content="ru"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Notes | Artur Akmalov"><meta data-rh="true" name="description" content="Конспекты по Kubernetes с объяснениями основных концепций и компонентов."><meta data-rh="true" property="og:description" content="Конспекты по Kubernetes с объяснениями основных концепций и компонентов."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://akmalov.com/docs/kubernetes/k8s-notes"><link data-rh="true" rel="alternate" href="https://akmalov.com/docs/kubernetes/k8s-notes" hreflang="ru"><link data-rh="true" rel="alternate" href="https://akmalov.com/docs/kubernetes/k8s-notes" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://M2BGREKLU1-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Kubernetes","item":"https://akmalov.com/docs/category/kubernetes"},{"@type":"ListItem","position":2,"name":"Notes","item":"https://akmalov.com/docs/kubernetes/k8s-notes"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Artur Akmalov RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Artur Akmalov Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Artur Akmalov JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SH0K5XVKDG"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-SH0K5XVKDG",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Artur Akmalov" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.c9d3740e.css">
<script src="/assets/js/runtime~main.c6b015d9.js" defer="defer"></script>
<script src="/assets/js/main.a8f95116.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Перейти к основному содержимому"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Перейти к основному содержимому</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Переключить навигационную панель" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Akmalov Artur" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Akmalov Artur" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Akmalov Artur</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/about">About</a><a href="https://github.com/akmalovaa" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Поиск (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Поиск</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Прокрутка к началу" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="Мои заметки" class="linkLabel_WmDU">Мои заметки</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/soft"><span title="Soft" class="categoryLinkLabel_W154">Soft</span></a><button aria-label="Expand sidebar category &#x27;Soft&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/python"><span title="Python" class="categoryLinkLabel_W154">Python</span></a><button aria-label="Expand sidebar category &#x27;Python&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/category/kubernetes"><span title="Kubernetes" class="categoryLinkLabel_W154">Kubernetes</span></a><button aria-label="Collapse sidebar category &#x27;Kubernetes&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/kubernetes/commands"><span title="Commands" class="linkLabel_WmDU">Commands</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/kubernetes/k8s-notes"><span title="Notes" class="linkLabel_WmDU">Notes</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/proxmox"><span title="Proxmox" class="categoryLinkLabel_W154">Proxmox</span></a><button aria-label="Expand sidebar category &#x27;Proxmox&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/misc"><span title="Misc" class="categoryLinkLabel_W154">Misc</span></a><button aria-label="Expand sidebar category &#x27;Misc&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/category/homelab"><span title="Homelab" class="categoryLinkLabel_W154">Homelab</span></a><button aria-label="Expand sidebar category &#x27;Homelab&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Навигационная цепочка текущей страницы"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Главная страница" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/kubernetes"><span>Kubernetes</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Notes</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Содержание этой страницы</button></div><div class="theme-doc-markdown markdown"><header><h1>Заметки k8s</h1></header>
<p>Конспекты по Kubernetes с объяснениями основных концепций и компонентов.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Официальная документация</div><div class="admonitionContent_BuS1"><p>Всегда актуальная информация доступна в <a href="https://kubernetes.io/docs/home/" target="_blank" rel="noopener noreferrer" class="">официальной документации Kubernetes</a></p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="архитектура-kubernetes">Архитектура Kubernetes<a href="#архитектура-kubernetes" class="hash-link" aria-label="Прямая ссылка на Архитектура Kubernetes" title="Прямая ссылка на Архитектура Kubernetes" translate="no">​</a></h2>
<p>Ниже собрал диаграммы(схемы) компонентов Kubernetes из различных источников:
<a href="/assets/files/components-of-kubernetes-03520ce36147308a5c9110e9ba6c4eda.png" target="_blank" class=""><img decoding="async" loading="lazy" alt="Kubernetes Architecture" src="/assets/images/components-of-kubernetes-03520ce36147308a5c9110e9ba6c4eda.png" title="Kubernetes Architecture" width="1500" height="685" class="img_ev3q"></a>
<a href="/assets/files/k8s-arch2-db24b2444f238fbc2e38077bdb934278.png" target="_blank" class=""><img decoding="async" loading="lazy" alt="Kubernetes Architecture" src="/assets/images/k8s-arch2-db24b2444f238fbc2e38077bdb934278.png" title="Kubernetes Architecture" width="800" height="478" class="img_ev3q"></a>
<a href="/assets/files/k8s-arch3-a2878a7ae1c1fb6d0bf490d8cf5efde1.png" target="_blank" class=""><img decoding="async" loading="lazy" alt="Kubernetes Architecture" src="/assets/images/k8s-arch3-a2878a7ae1c1fb6d0bf490d8cf5efde1.png" title="Kubernetes Architecture" width="760" height="520" class="img_ev3q"></a>
<a href="/assets/files/Kubernetes-components-679a3e8f44718a0ea9331914990be4f9.png" target="_blank" class=""><img decoding="async" loading="lazy" alt="Kubernetes Architecture" src="/assets/images/Kubernetes-components-679a3e8f44718a0ea9331914990be4f9.png" title="Kubernetes Architecture" width="1154" height="774" class="img_ev3q"></a>
<a href="/assets/files/maxresdefault-aef836d3188220d601d903466b29aa8d.jpg" target="_blank" class=""><img decoding="async" loading="lazy" alt="Kubernetes Architecture" src="/assets/images/maxresdefault-aef836d3188220d601d903466b29aa8d.jpg" title="Kubernetes Architecture" width="1019" height="565" class="img_ev3q"></a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="компоненты-control-plane-master-node">Компоненты Control Plane (Master Node)<a href="#компоненты-control-plane-master-node" class="hash-link" aria-label="Прямая ссылка на Компоненты Control Plane (Master Node)" title="Прямая ссылка на Компоненты Control Plane (Master Node)" translate="no">​</a></h2>
<p>Control Plane управляет состоянием кластера и принимает глобальные решения о планировании подов.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="api-server-kube-apiserver">API Server (kube-apiserver)<a href="#api-server-kube-apiserver" class="hash-link" aria-label="Прямая ссылка на API Server (kube-apiserver)" title="Прямая ссылка на API Server (kube-apiserver)" translate="no">​</a></h3>
<p><strong>Центральный компонент кластера</strong> - основная точка входа для всех REST-запросов.</p>
<p><strong>Функции:</strong></p>
<ul>
<li class="">Аутентификация и авторизация пользователей</li>
<li class="">Валидация и мутация запросов</li>
<li class="">Сериализация объектов в etcd</li>
<li class="">Обслуживание REST API для всех операций кластера</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="scheduler-kube-scheduler">Scheduler (kube-scheduler)<a href="#scheduler-kube-scheduler" class="hash-link" aria-label="Прямая ссылка на Scheduler (kube-scheduler)" title="Прямая ссылка на Scheduler (kube-scheduler)" translate="no">​</a></h3>
<p><strong>Планировщик подов</strong> - определяет оптимальную ноду для размещения нового пода.</p>
<p><strong>Алгоритм работы:</strong></p>
<ol>
<li class="">Фильтрация доступных нод по требованиям пода</li>
<li class="">Ранжирование подходящих нод по различным критериям</li>
<li class="">Назначение пода на ноду с наивысшим рейтингом</li>
</ol>
<p><strong>Факторы планирования:</strong></p>
<ul>
<li class="">Доступные ресурсы (CPU, память)</li>
<li class="">Политики размещения и anti-affinity</li>
<li class="">Taints и tolerations</li>
<li class="">Node selectors</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="controller-manager-kube-controller-manager">Controller Manager (kube-controller-manager)<a href="#controller-manager-kube-controller-manager" class="hash-link" aria-label="Прямая ссылка на Controller Manager (kube-controller-manager)" title="Прямая ссылка на Controller Manager (kube-controller-manager)" translate="no">​</a></h3>
<p><strong>Управляющий демон</strong> - запускает контроллеры, которые регулируют состояние кластера.</p>
<p><strong>Основные контроллеры:</strong></p>
<ul>
<li class=""><strong>Node Controller</strong> - отслеживает состояние нод</li>
<li class=""><strong>Replication Controller</strong> - поддерживает нужное количество реплик</li>
<li class=""><strong>Endpoints Controller</strong> - связывает Services и Pods</li>
<li class=""><strong>Deployment Controller</strong> - управляет развертываниями</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="etcd">etcd<a href="#etcd" class="hash-link" aria-label="Прямая ссылка на etcd" title="Прямая ссылка на etcd" translate="no">​</a></h3>
<p><strong>Распределенное хранилище ключ-значение</strong> - база данных кластера.</p>
<p><strong>Особенности:</strong></p>
<ul>
<li class="">Хранит все манифесты и состояние кластера</li>
<li class="">Требует кворум для работы (нечетное количество экземпляров)</li>
<li class="">Обеспечивает консистентность данных</li>
<li class="">Поддерживает снэпшоты для восстановления</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="компоненты-worker-node">Компоненты Worker Node<a href="#компоненты-worker-node" class="hash-link" aria-label="Прямая ссылка на Компоненты Worker Node" title="Прямая ссылка на Компоненты Worker Node" translate="no">​</a></h2>
<p>Worker Node выполняют фактическую работу по запуску приложений.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pod">Pod<a href="#pod" class="hash-link" aria-label="Прямая ссылка на Pod" title="Прямая ссылка на Pod" translate="no">​</a></h3>
<p><strong>Базовая единица развертывания</strong> в Kubernetes - группа из одного или нескольких контейнеров.</p>
<p><strong>Особенности:</strong></p>
<ul>
<li class="">Контейнеры в поде разделяют сетевое пространство и хранилище</li>
<li class="">Имеют общий IP-адрес и могут общаться через localhost</li>
<li class="">Всегда планируются и выполняются на одной ноде</li>
<li class="">Эфемерны - могут быть созданы, уничтожены и пересозданы</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kubelet">Kubelet<a href="#kubelet" class="hash-link" aria-label="Прямая ссылка на Kubelet" title="Прямая ссылка на Kubelet" translate="no">​</a></h3>
<p><strong>Агент узла</strong> - основной компонент на каждой worker ноде.</p>
<p><strong>Функции:</strong></p>
<ul>
<li class="">Получает спецификации подов от API сервера</li>
<li class="">Управляет жизненным циклом подов на ноде</li>
<li class="">Отправляет отчеты о состоянии нод и подов в API сервер</li>
<li class="">Выполняет проверки работоспособности (health checks)</li>
<li class="">Управляет томами (volumes)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kube-proxy">Kube-proxy<a href="#kube-proxy" class="hash-link" aria-label="Прямая ссылка на Kube-proxy" title="Прямая ссылка на Kube-proxy" translate="no">​</a></h3>
<p><strong>Сетевой прокси</strong> - обеспечивает сетевую связность для сервисов.</p>
<p><strong>Функции:</strong></p>
<ul>
<li class="">Управляет правилами сетевой маршрутизации на узле</li>
<li class="">Реализует балансировку нагрузки для сервисов</li>
<li class="">Поддерживает различные режимы: iptables, IPVS, userspace</li>
<li class="">Обеспечивает доступность сервисов через ClusterIP, NodePort, LoadBalancer</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="container-runtime">Container Runtime<a href="#container-runtime" class="hash-link" aria-label="Прямая ссылка на Container Runtime" title="Прямая ссылка на Container Runtime" translate="no">​</a></h3>
<p><strong>Среда выполнения контейнеров</strong> - программное обеспечение для запуска контейнеров.</p>
<p><strong>Поддерживаемые среды:</strong></p>
<ul>
<li class=""><strong>containerd</strong> - легковесная, высокопроизводительная</li>
<li class=""><strong>Docker Engine</strong> - популярная, но более тяжеловесная</li>
<li class=""><strong>CRI-O</strong> - оптимизированная для Kubernetes</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="дополнительные-компоненты-add-ons">Дополнительные компоненты (Add-ons)<a href="#дополнительные-компоненты-add-ons" class="hash-link" aria-label="Прямая ссылка на Дополнительные компоненты (Add-ons)" title="Прямая ссылка на Дополнительные компоненты (Add-ons)" translate="no">​</a></h3>
<p><strong>Необязательные компоненты</strong> для расширения функциональности кластера:</p>
<ul>
<li class=""><strong>CNI плагины</strong> (Calico, Flannel, Weave) - сетевое взаимодействие</li>
<li class=""><strong>RBAC</strong> - контроль доступа на основе ролей</li>
<li class=""><strong>DNS</strong> (CoreDNS) - разрешение имен внутри кластера</li>
<li class=""><strong>Dashboard</strong> - веб-интерфейс управления</li>
<li class=""><strong>Ingress Controllers</strong> - управление внешним трафиком</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="основные-объекты-kubernetes">Основные объекты Kubernetes<a href="#основные-объекты-kubernetes" class="hash-link" aria-label="Прямая ссылка на Основные объекты Kubernetes" title="Прямая ссылка на Основные объекты Kubernetes" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="иерархия-deployment--replicaset--pod">Иерархия: Deployment → ReplicaSet → Pod<a href="#иерархия-deployment--replicaset--pod" class="hash-link" aria-label="Прямая ссылка на Иерархия: Deployment → ReplicaSet → Pod" title="Прямая ссылка на Иерархия: Deployment → ReplicaSet → Pod" translate="no">​</a></h3>
<p><strong>Декларативный подход</strong> - описываем желаемое состояние, а не последовательность действий.</p>
<p><strong>Deployment</strong> - высокоуровневый объект для управления приложениями:</p>
<ul>
<li class="">Создает и управляет ReplicaSet</li>
<li class="">Обеспечивает декларативные обновления</li>
<li class="">Поддерживает стратегии развертывания (Rolling Update, Recreate)</li>
<li class="">Позволяет откатываться к предыдущим версиям</li>
</ul>
<p><strong>ReplicaSet</strong> - обеспечивает заданное количество реплик подов:</p>
<ul>
<li class="">Создается автоматически Deployment</li>
<li class="">Контролирует количество запущенных подов</li>
<li class="">Заменяет неисправные поды</li>
</ul>
<p><strong>Pod</strong> - минимальная единица развертывания:</p>
<ul>
<li class="">Содержит один или несколько контейнеров</li>
<li class="">Имеет уникальный IP-адрес в кластере</li>
<li class="">Разделяет хранилище между контейнерами</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="пример-deployment">Пример Deployment<a href="#пример-deployment" class="hash-link" aria-label="Прямая ссылка на Пример Deployment" title="Прямая ссылка на Пример Deployment" translate="no">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">replicas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">strategy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> RollingUpdate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">rollingUpdate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">maxUnavailable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">maxSurge</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginxdemos/hello</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token number" style="color:rgb(247, 140, 108)">0.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">livenessProbe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">readinessProbe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">limits</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;500m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;128Mi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;250m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;64Mi&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="service">Service<a href="#service" class="hash-link" aria-label="Прямая ссылка на Service" title="Прямая ссылка на Service" translate="no">​</a></h3>
<p><strong>Абстракция для доступа к подам</strong> - обеспечивает стабильную точку входа к набору подов.</p>
<p><strong>Проблемы, которые решает Service:</strong></p>
<ul>
<li class="">Поды имеют эфемерные IP-адреса</li>
<li class="">Поды могут быть пересозданы в любой момент</li>
<li class="">Необходимость балансировки нагрузки между репликами</li>
</ul>
<p><strong>Типы Service:</strong></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="clusterip-по-умолчанию">ClusterIP (по умолчанию)<a href="#clusterip-по-умолчанию" class="hash-link" aria-label="Прямая ссылка на ClusterIP (по умолчанию)" title="Прямая ссылка на ClusterIP (по умолчанию)" translate="no">​</a></h4>
<ul>
<li class="">Внутренний IP кластера</li>
<li class="">Доступен только внутри кластера</li>
<li class="">Используется для межсервисного взаимодействия</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="nodeport">NodePort<a href="#nodeport" class="hash-link" aria-label="Прямая ссылка на NodePort" title="Прямая ссылка на NodePort" translate="no">​</a></h4>
<ul>
<li class="">Открывает порт на всех нодах кластера</li>
<li class="">Диапазон портов: 30000-32767</li>
<li class="">Доступен извне кластера</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="loadbalancer">LoadBalancer<a href="#loadbalancer" class="hash-link" aria-label="Прямая ссылка на LoadBalancer" title="Прямая ссылка на LoadBalancer" translate="no">​</a></h4>
<ul>
<li class="">Создает внешний балансировщик нагрузки (в облаке)</li>
<li class="">Автоматически создает ClusterIP и NodePort</li>
<li class="">Получает внешний IP от провайдера</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="externalname">ExternalName<a href="#externalname" class="hash-link" aria-label="Прямая ссылка на ExternalName" title="Прямая ссылка на ExternalName" translate="no">​</a></h4>
<ul>
<li class="">Создает CNAME запись для внешнего сервиса</li>
<li class="">Не создает прокси или балансировщик</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="примеры-service">Примеры Service<a href="#примеры-service" class="hash-link" aria-label="Прямая ссылка на Примеры Service" title="Прямая ссылка на Примеры Service" translate="no">​</a></h4>
<p><strong>ClusterIP Service:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">clusterip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ClusterIP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> TCP</span><br></span></code></pre></div></div>
<p><strong>NodePort Service:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">nodeport</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NodePort</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">nodePort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> TCP</span><br></span></code></pre></div></div>
<p><strong>LoadBalancer Service:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">loadbalancer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> LoadBalancer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> http</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> TCP</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="проверки-работоспособности-health-checks">Проверки работоспособности (Health Checks)<a href="#проверки-работоспособности-health-checks" class="hash-link" aria-label="Прямая ссылка на Проверки работоспособности (Health Checks)" title="Прямая ссылка на Проверки работоспособности (Health Checks)" translate="no">​</a></h2>
<p>Kubernetes использует <strong>пробы (probes)</strong> для определения состояния контейнеров. Проверки выполняет kubelet.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="типы-проб">Типы проб<a href="#типы-проб" class="hash-link" aria-label="Прямая ссылка на Типы проб" title="Прямая ссылка на Типы проб" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="startup-probe">Startup Probe<a href="#startup-probe" class="hash-link" aria-label="Прямая ссылка на Startup Probe" title="Прямая ссылка на Startup Probe" translate="no">​</a></h4>
<p><strong>Проверка запуска</strong> - определяет, когда контейнер готов к работе.</p>
<p><strong>Когда использовать:</strong></p>
<ul>
<li class="">Для приложений с долгим временем запуска</li>
<li class="">Когда нужно отключить другие пробы до завершения инициализации</li>
</ul>
<p><strong>Поведение:</strong></p>
<ul>
<li class="">Выполняется только при запуске контейнера</li>
<li class="">Блокирует выполнение liveness и readiness проб</li>
<li class="">При неудаче контейнер перезапускается</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="liveness-probe">Liveness Probe<a href="#liveness-probe" class="hash-link" aria-label="Прямая ссылка на Liveness Probe" title="Прямая ссылка на Liveness Probe" translate="no">​</a></h4>
<p><strong>Проверка жизнеспособности</strong> - определяет, нужно ли перезапустить контейнер.</p>
<p><strong>Когда использовать:</strong></p>
<ul>
<li class="">Для обнаружения зависших приложений</li>
<li class="">При необходимости перезапуска проблемных контейнеров</li>
</ul>
<p><strong>Поведение:</strong></p>
<ul>
<li class="">Выполняется периодически во время работы контейнера</li>
<li class="">При неудаче контейнер перезапускается</li>
<li class="">Не влияет на готовность к обслуживанию трафика</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="readiness-probe">Readiness Probe<a href="#readiness-probe" class="hash-link" aria-label="Прямая ссылка на Readiness Probe" title="Прямая ссылка на Readiness Probe" translate="no">​</a></h4>
<p><strong>Проверка готовности</strong> - определяет, готов ли контейнер принимать трафик.</p>
<p><strong>Когда использовать:</strong></p>
<ul>
<li class="">Для приложений, которым нужно время на прогрев</li>
<li class="">При зависимости от внешних сервисов</li>
</ul>
<p><strong>Поведение:</strong></p>
<ul>
<li class="">Выполняется периодически во время работы контейнера</li>
<li class="">При неудаче под исключается из Service endpoints</li>
<li class="">Контейнер не перезапускается</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="методы-проверки">Методы проверки<a href="#методы-проверки" class="hash-link" aria-label="Прямая ссылка на Методы проверки" title="Прямая ссылка на Методы проверки" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="http-get">HTTP GET<a href="#http-get" class="hash-link" aria-label="Прямая ссылка на HTTP GET" title="Прямая ссылка на HTTP GET" translate="no">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">livenessProbe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /health</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">httpHeaders</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Custom</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">Header</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> health</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">check</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">timeoutSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="tcp-socket">TCP Socket<a href="#tcp-socket" class="hash-link" aria-label="Прямая ссылка на TCP Socket" title="Прямая ссылка на TCP Socket" translate="no">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">readinessProbe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">tcpSocket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5432</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="command-execution">Command Execution<a href="#command-execution" class="hash-link" aria-label="Прямая ссылка на Command Execution" title="Прямая ссылка на Command Execution" translate="no">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">livenessProbe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">exec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">command</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> /bin/sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">c</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;pgrep -f my-app&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="параметры-конфигурации">Параметры конфигурации<a href="#параметры-конфигурации" class="hash-link" aria-label="Прямая ссылка на Параметры конфигурации" title="Прямая ссылка на Параметры конфигурации" translate="no">​</a></h3>
<ul>
<li class=""><strong>initialDelaySeconds</strong> - задержка перед первой проверкой</li>
<li class=""><strong>periodSeconds</strong> - интервал между проверками</li>
<li class=""><strong>timeoutSeconds</strong> - таймаут для одной проверки</li>
<li class=""><strong>successThreshold</strong> - количество успешных проверок для восстановления</li>
<li class=""><strong>failureThreshold</strong> - количество неудачных проверок для сбоя</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="жизненный-цикл-запроса-в-kubernetes">Жизненный цикл запроса в Kubernetes<a href="#жизненный-цикл-запроса-в-kubernetes" class="hash-link" aria-label="Прямая ссылка на Жизненный цикл запроса в Kubernetes" title="Прямая ссылка на Жизненный цикл запроса в Kubernetes" translate="no">​</a></h2>
<p>Рассмотрим, что происходит при выполнении команды <code>kubectl apply -f deployment.yaml</code>:</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-отправка-запроса">1. Отправка запроса<a href="#1-отправка-запроса" class="hash-link" aria-label="Прямая ссылка на 1. Отправка запроса" title="Прямая ссылка на 1. Отправка запроса" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> deployment.yaml </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-n</span><span class="token plain"> production</span><br></span></code></pre></div></div>
<p><strong>Процесс:</strong></p>
<ol>
<li class=""><strong>kubectl</strong> читает конфигурацию и отправляет HTTPS запрос к API Server</li>
<li class=""><strong>API Server</strong> получает запрос и начинает его обработку</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-аутентификация-и-авторизация">2. Аутентификация и авторизация<a href="#2-аутентификация-и-авторизация" class="hash-link" aria-label="Прямая ссылка на 2. Аутентификация и авторизация" title="Прямая ссылка на 2. Аутентификация и авторизация" translate="no">​</a></h3>
<p><strong>API Server выполняет:</strong></p>
<ul>
<li class=""><strong>Аутентификация</strong> - проверяет подлинность пользователя (токены, сертификаты)</li>
<li class=""><strong>Авторизация</strong> - проверяет права доступа (RBAC)</li>
<li class=""><strong>Admission Control</strong> - применяет политики и мутации</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-валидация-и-сохранение">3. Валидация и сохранение<a href="#3-валидация-и-сохранение" class="hash-link" aria-label="Прямая ссылка на 3. Валидация и сохранение" title="Прямая ссылка на 3. Валидация и сохранение" translate="no">​</a></h3>
<p><strong>API Server:</strong></p>
<ul>
<li class="">Валидирует YAML манифест</li>
<li class="">Сохраняет объект в <strong>etcd</strong></li>
<li class="">Возвращает подтверждение клиенту</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-обработка-контроллерами">4. Обработка контроллерами<a href="#4-обработка-контроллерами" class="hash-link" aria-label="Прямая ссылка на 4. Обработка контроллерами" title="Прямая ссылка на 4. Обработка контроллерами" translate="no">​</a></h3>
<p><strong>Deployment Controller:</strong></p>
<ul>
<li class="">Обнаруживает новый Deployment в etcd</li>
<li class="">Создает соответствующий ReplicaSet</li>
<li class="">Записывает ReplicaSet в etcd</li>
</ul>
<p><strong>ReplicaSet Controller:</strong></p>
<ul>
<li class="">Обнаруживает новый ReplicaSet</li>
<li class="">Создает необходимое количество Pod объектов</li>
<li class="">Записывает Pod спецификации в etcd</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="5-планирование">5. Планирование<a href="#5-планирование" class="hash-link" aria-label="Прямая ссылка на 5. Планирование" title="Прямая с сылка на 5. Планирование" translate="no">​</a></h3>
<p><strong>Scheduler:</strong></p>
<ul>
<li class="">Обнаруживает неназначенные поды в etcd</li>
<li class="">Анализирует доступные ноды и требования подов</li>
<li class="">Принимает решение о размещении</li>
<li class="">Обновляет спецификацию пода с назначенной нодой в etcd</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="6-запуск-на-ноде">6. Запуск на ноде<a href="#6-запуск-на-ноде" class="hash-link" aria-label="Прямая ссылка на 6. Запуск на ноде" title="Прямая ссылка на 6. Запуск на ноде" translate="no">​</a></h3>
<p><strong>Kubelet на выбранной ноде:</strong></p>
<ul>
<li class="">Обнаруживает назначенный ему под</li>
<li class="">Взаимодействует с Container Runtime (containerd, Docker)</li>
<li class="">Скачивает образы контейнеров</li>
<li class="">Запускает контейнеры</li>
<li class="">Отправляет статус обратно в API Server</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="7-сетевое-взаимодействие">7. Сетевое взаимодействие<a href="#7-сетевое-взаимодействие" class="hash-link" aria-label="Прямая ссылка на 7. Сетевое взаимодействие" title="Прямая ссылка на 7. Сетевое взаимодействие" translate="no">​</a></h3>
<p><strong>Kube-proxy:</strong></p>
<ul>
<li class="">Обновляет правила iptables/IPVS для новых сервисов</li>
<li class="">Обеспечивает доступность подов через Service</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="схема-взаим одействия">Схема взаимодействия<a href="#схема-взаимодействия" class="hash-link" aria-label="Прямая ссылка на Схема взаимодействия" title="Прямая ссылка на Схема взаимодействия" translate="no">​</a></h3>
<div class="language-mermaid codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-mermaid codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">graph TD</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    A[kubectl] --&gt; B[API Server]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    B --&gt; C[etcd]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    C --&gt; D[Controllers]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    C --&gt; E[Scheduler]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    C --&gt; F[Kubelet]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    F --&gt; G[Container Runtime]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    F --&gt; H[Kube-proxy]</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Важно понимать</div><div class="admonitionContent_BuS1"><p>Все компоненты Kubernetes работают асинхронно и следуют принципу <strong>watch-loop</strong>:</p><ol>
<li class="">Наблюдают за изменениями в etcd</li>
<li class="">Сравнивают текущее состояние с желаемым</li>
<li class="">Предпринимают действия для достижения желаемого состояния</li>
</ol></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="дополнительные-концепции">Дополнительные концепции<a href="#дополнительные-концепции" class="hash-link" aria-label="Прямая ссылка на Дополнительные концепции" title="Прямая ссылка на Дополнительные концепции" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="namespaces">Namespaces<a href="#namespaces" class="hash-link" aria-label="Прямая ссылка на Namespaces" title="Прямая ссылка на Namespaces" translate="no">​</a></h3>
<p><strong>Виртуальные кластеры</strong> внутри физического кластера для изоляции ресурсов.</p>
<p><strong>Системные namespace:</strong></p>
<ul>
<li class=""><code>default</code> - namespace по умолчанию</li>
<li class=""><code>kube-system</code> - системные компоненты Kubernetes</li>
<li class=""><code>kube-public</code> - общедоступные ресурсы</li>
<li class=""><code>kube-node-lease</code> - объекты lease для нод</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="configmaps-и-secrets">ConfigMaps и Secrets<a href="#configmaps-и-secrets" class="hash-link" aria-label="Прямая ссылка на ConfigMaps и Secrets" title="Прямая ссылка на ConfigMaps и Secrets" translate="no">​</a></h3>
<p><strong>ConfigMap</strong> - хранение конфигурационных данных:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">database_url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;postgresql://localhost:5432/myapp&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">debug_mode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span><br></span></code></pre></div></div>
<p><strong>Secret</strong> - хранение конфиденциальной информации:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Secret</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">secrets</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Opaque</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> cGFzc3dvcmQxMjM=  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># base64 encoded</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">api-key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> YWJjZGVmZ2hpams=   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># base64 encoded</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="persistent-volumes">Persistent Volumes<a href="#persistent-volumes" class="hash-link" aria-label="Прямая ссылка на Persistent Volumes" title="Прямая ссылка на Persistent Volumes" translate="no">​</a></h3>
<p><strong>PersistentVolume (PV)</strong> - ресурс хранения в кластере:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> PersistentVolume</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> pv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">example</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">capacity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 10Gi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">accessModes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> ReadWriteOnce</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">persistentVolumeReclaimPolicy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Retain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">storageClassName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> fast</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">ssd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">hostPath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /data/pv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">example</span><br></span></code></pre></div></div>
<p><strong>PersistentVolumeClaim (PVC)</strong> - запрос на хранение:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> PersistentVolumeClaim</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> pvc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">example</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">accessModes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> ReadWriteOnce</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 5Gi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">storageClassName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> fast</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">ssd</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ingress">Ingress<a href="#ingress" class="hash-link" aria-label="Прямая ссылка на Ingress" title="Прямая ссылка на Ingress" translate="no">​</a></h3>
<p><strong>Управление внешним доступом</strong> к сервисам в кластере:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> networking.k8s.io/v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Ingress</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">ingress</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">kubernetes.io/ingress.class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">cert-manager.io/cluster-issuer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> letsencrypt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">tls</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">secretName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">tls</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">pathType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Prefix</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">backend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token key atrule">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="лучшие-практики">Лучшие практики<a href="#лучшие-пра ктики" class="hash-link" aria-label="Прямая ссылка на Лучшие практики" title="Прямая ссылка на Лучшие практики" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ресурсы-и-лимиты">Ресурсы и лимиты<a href="#ресурсы-и-лимиты" class="hash-link" aria-label="Прямая ссылка на Ресурсы и лимиты" title="Прямая ссылка на Ресурсы и лимиты" translate="no">​</a></h3>
<p><strong>Всегда указывайте requests и limits:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;128Mi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;100m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">limits</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;256Mi&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;200m&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="проверки-работоспособности">Проверки работоспособности<a href="#проверки-работоспособности" class="hash-link" aria-label="Прямая ссылка на Проверки работоспособности" title="Прямая ссылка на Проверки работоспособности" translate="no">​</a></h3>
<p><strong>Настройте все типы проб:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">livenessProbe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /health</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">readinessProbe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /ready</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">startupProbe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /startup</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="безопасность">Безопасность<a href="#безопасность" class="hash-link" aria-label="Прямая ссылка на Безопасность" title="Прямая ссылка на Безопасность" translate="no">​</a></h3>
<p><strong>Используйте Security Context:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">securityContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">runAsNonRoot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">runAsUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">readOnlyRootFilesystem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">allowPrivilegeEscalation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">capabilities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">drop</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> ALL</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="мониторинг">Мониторинг<a href="#мониторинг" class="hash-link" aria-label="Прямая ссылка на Мониторинг" title="Прямая ссылка на Мониторинг" translate="no">​</a></h3>
<p><strong>Добавляйте метки для мониторинга:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> myapp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v1.2.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">environment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> production</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">team</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> backend</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="полезные-команды-kubectl">Полезные команды kubectl<a href="#полезные-команды-kubectl" class="hash-link" aria-label="Прямая ссылка на Полезные команды kubectl" title="Прямая ссылка на Полезные команды kubectl" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="основные-команды">Основные команды<a href="#основные-команды" class="hash-link" aria-label="Прямая ссылка на Основные команды" title="Прямая ссылка на Основные команды" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Создание ресурсов</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> manifest.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl create </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> manifest.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Просмотр ресурсов</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-o</span><span class="token plain"> wide</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get services --all-namespaces</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl describe pod my-pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Удаление ресурсов</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete pod my-pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> manifest.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Логи и отладка</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl logs my-pod </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exec</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-it</span><span class="token plain"> my-pod -- /bin/bash</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward my-pod </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain">:80</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Масштабирование</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl scale deployment my-app </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--replicas</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl autoscale deployment my-app </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--min</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--max</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"> --cpu-percent</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">80</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="полезные-флаги">Полезные флаги<a href="#полезные-флаги" class="hash-link" aria-label="Прямая ссылка на Полезные флаги" title="Прямая ссылка на Полезные флаги" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Просмотр в разных форматах</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-o</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-o</span><span class="token plain"> yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-o</span><span class="token plain"> wide</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Фильтрация по лейблам</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-l</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">app</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods --field-selector</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">status.phase</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">Running</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Сортировка</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods --sort-by</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.metadata.creationTimestamp&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl </span><span class="token function" style="color:rgb(130, 170, 255)">top</span><span class="token plain"> pods --sort-by</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">memory</span><br></span></code></pre></div></div>
<hr>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Дополнительные ресурсы</div><div class="admonitionContent_BuS1"><ul>
<li class=""><a href="https://kubernetes.io/docs/" target="_blank" rel="noopener noreferrer" class="">Kubernetes Documentation</a></li>
<li class=""><a href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/" target="_blank" rel="noopener noreferrer" class="">kubectl Cheat Sheet</a></li>
<li class=""><a href="https://kubernetes.io/docs/concepts/configuration/overview/" target="_blank" rel="noopener noreferrer" class="">Kubernetes Best Practices</a></li>
</ul></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/akmalovaa/akmalov.com/tree/main/docs/kubernetes/k8s-notes.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Отредактировать эту страницу</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Страница документа"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/kubernetes/commands"><div class="pagination-nav__sublabel">Предыдущая страница</div><div class="pagination-nav__label">Commands</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/proxmox"><div class="pagination-nav__sublabel">Следующая страница</div><div class="pagination-nav__label">Proxmox</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#архитектура-kubernetes" class="table-of-contents__link toc-highlight">Архитектура Kubernetes</a></li><li><a href="#компоненты-control-plane-master-node" class="table-of-contents__link toc-highlight">Компоненты Control Plane (Master Node)</a><ul><li><a href="#api-server-kube-apiserver" class="table-of-contents__link toc-highlight">API Server (kube-apiserver)</a></li><li><a href="#scheduler-kube-scheduler" class="table-of-contents__link toc-highlight">Scheduler (kube-scheduler)</a></li><li><a href="#controller-manager-kube-controller-manager" class="table-of-contents__link toc-highlight">Controller Manager (kube-controller-manager)</a></li><li><a href="#etcd" class="table-of-contents__link toc-highlight">etcd</a></li></ul></li><li><a href="#компоненты-worker-node" class="table-of-contents__link toc-highlight">Компоненты Worker Node</a><ul><li><a href="#pod" class="table-of-contents__link toc-highlight">Pod</a></li><li><a href="#kubelet" class="table-of-contents__link toc-highlight">Kubelet</a></li><li><a href="#kube-proxy" class="table-of-contents__link toc-highlight">Kube-proxy</a></li><li><a href="#container-runtime" class="table-of-contents__link toc-highlight">Container Runtime</a></li><li><a href="#дополнительные-компоненты-add-ons" class="table-of-contents__link toc-highlight">Дополнительные компоненты (Add-ons)</a></li></ul></li><li><a href="#основные-объекты-kubernetes" class="table-of-contents__link toc-highlight">Основные объекты Kubernetes</a><ul><li><a href="#иерархия-deployment--replicaset--pod" class="table-of-contents__link toc-highlight">Иерархия: Deployment → ReplicaSet → Pod</a></li><li><a href="#service" class="table-of-contents__link toc-highlight">Service</a></li></ul></li><li><a href="#проверки-работоспособности-health-checks" class="table-of-contents__link toc-highlight">Проверки работоспособности (Health Checks)</a><ul><li><a href="#типы-проб" class="table-of-contents__link toc-highlight">Типы проб</a></li><li><a href="#методы-проверки" class="table-of-contents__link toc-highlight">Методы проверки</a></li><li><a href="#параметры-конфигурации" class="table-of-contents__link toc-highlight">Параметры конфигурации</a></li></ul></li><li><a href="#жизненный-цикл-запроса-в-kubernetes" class="table-of-contents__link toc-highlight">Жизненный цикл запроса в Kubernetes</a><ul><li><a href="#1-отправка-запроса" class="table-of-contents__link toc-highlight">1. Отправка запроса</a></li><li><a href="#2-аутентификация-и-авторизация" class="table-of-contents__link toc-highlight">2. Аутентификация и авторизация</a></li><li><a href="#3-валидация-и-сохранение" class="table-of-contents__link toc-highlight">3. Валидация и сохранение</a></li><li><a href="#4-обработка-контроллерами" class="table-of-contents__link toc-highlight">4. Обработка контроллерами</a></li><li><a href="#5-планирование" class="table-of-contents__link toc-highlight">5. Планирование</a></li><li><a href="#6-запуск-на-ноде" class="table-of-contents__link toc-highlight">6. Запуск на ноде</a></li><li><a href="#7-сетевое-взаимодействие" class="table-of-contents__link toc-highlight">7. Сетевое взаимодействие</a></li><li><a href="#схема-взаимодействия" class="table-of-contents__link toc-highlight">Схема взаимодействия</a></li></ul></li><li><a href="#дополнительные-концепции" class="table-of-contents__link toc-highlight">Дополнительные концепции</a><ul><li><a href="#namespaces" class="table-of-contents__link toc-highlight">Namespaces</a></li><li><a href="#configmaps-и-secrets" class="table-of-contents__link toc-highlight">ConfigMaps и Secrets</a></li><li><a href="#persistent-volumes" class="table-of-contents__link toc-highlight">Persistent Volumes</a></li><li><a href="#ingress" class="table-of-contents__link toc-highlight">Ingress</a></li></ul></li><li><a href="#лучшие-практики" class="table-of-contents__link toc-highlight">Лучшие практики</a><ul><li><a href="#ресурсы-и-лимиты" class="table-of-contents__link toc-highlight">Ресурсы и лимиты</a></li><li><a href="#проверки-работоспособности" class="table-of-contents__link toc-highlight">Проверки работоспособности</a></li><li><a href="#безопасность" class="table-of-contents__link toc-highlight">Безопасность</a></li><li><a href="#мониторинг" class="table-of-contents__link toc-highlight">Мониторинг</a></li></ul></li><li><a href="#полезные-команды-kubectl" class="table-of-contents__link toc-highlight">Полезные команды kubectl</a><ul><li><a href="#основные-команды" class="table-of-contents__link toc-highlight">Основные команды</a></li><li><a href="#полезные-флаги" class="table-of-contents__link toc-highlight">Полезные флаги</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Akmalov Artur</div></div></div></footer></div>
</body>
</html>