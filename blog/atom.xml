<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://akmalov.com/blog</id>
    <title>Artur Akmalov Blog</title>
    <updated>2025-09-06T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://akmalov.com/blog"/>
    <subtitle>Artur Akmalov Blog</subtitle>
    <icon>https://akmalov.com/img/favicon.ico</icon>
    <rights>Copyright ¬© 2025 Facebook, Inc.</rights>
    <entry>
        <title type="html"><![CDATA[–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä http —Ç—Ä–∞—Ñ–∏–∫–∞ - oha]]></title>
        <id>https://akmalov.com/blog/oha</id>
        <link href="https://akmalov.com/blog/oha"/>
        <updated>2025-09-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä HTTP-–Ω–∞–≥—Ä—É–∑–∫–∏, –∞–Ω–∞–ª–æ–≥ rakyll/hey —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π tui.]]></summary>
        <content type="html"><![CDATA[<p>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ rakyll/hey</p>
<p><a href="https://akmalov.com/blog/oha"><img decoding="async" loading="lazy" alt="oha" src="https://akmalov.com/assets/images/logo-730c08ddb3d246597d881ea3d470a7ca.png" width="1500" height="500" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–≤–≤–µ–¥–µ–Ω–∏–µ">–í–≤–µ–¥–µ–Ω–∏–µ<a href="https://akmalov.com/blog/oha#%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–≤–µ–¥–µ–Ω–∏–µ" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–≤–µ–¥–µ–Ω–∏–µ">‚Äã</a></h2>
<p>–ü—Ä–æ—Å—Ç–æ–π –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTTP-–Ω–∞–≥—Ä—É–∑–∫–∏</p>
<p>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥–∞ –≤ k8s, –∫–æ–≥–¥–∞ –∑–∞–¥–∞–ª —Ä–µ—Å—É—Ä—Å—ã –≤ nginx, –∏ –Ω—É–∂–Ω–æ –±—ã–ª–æ —Å–æ–∑–¥–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É, —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ—à–µ–ª. –ü–æ–ª—É—á–∏–ª–æ—Å—å –±—ã—Å—Ç—Ä–æ –Ω–∞–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫ –≤–µ–¥–µ—Ç —Å–µ–±—è –∫–ª–∞—Å—Ç–µ—Ä.</p>
<ul>
<li>–ø–æ–¥–¥–µ—Ä–∂–∫–∞ HTTP/1.1, HTTP/2 –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è HTTP/3</li>
<li>–∫—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π TUI —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</li>
<li>–≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä—è Rust</li>
<li>–ø—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CLI</li>
<li>–≥–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ (–∑–∞–≥–æ–ª–æ–≤–∫–∏, –º–µ—Ç–æ–¥—ã, —Ç–µ–ª–æ –∏ —Ç.–¥.)</li>
<li>–ø–æ–¥–¥–µ—Ä–∂–∫–∞ burst-—Ä–µ–∂–∏–º–∞ –∏ rate limiting</li>
<li>–≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (text, JSON, CSV)</li>
</ul>
<p>–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π <a href="https://github.com/hatoo/oha" target="_blank" rel="noopener noreferrer"><strong>Github</strong></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="—É—Å—Ç–∞–Ω–æ–≤–∫–∞">–£—Å—Ç–∞–Ω–æ–≤–∫–∞<a href="https://akmalov.com/blog/oha#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞">‚Äã</a></h3>
<p>macOS:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">brew </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> oha</span><br></span></code></pre></div></div>
<p>Debian/Ubuntu:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"deb [signed-by=/usr/share/keyrings/azlux-archive-keyring.gpg] http://packages.azlux.fr/debian/ stable main"</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tee</span><span class="token plain"> /etc/apt/sources.list.d/azlux.list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-O</span><span class="token plain"> /usr/share/keyrings/azlux-archive-keyring.gpg https://azlux.fr/repo.gpg</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> oha</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–ø—Ä–∏–º–µ—Ä-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è">–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è<a href="https://akmalov.com/blog/oha#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è">‚Äã</a></h3>
<p><img decoding="async" loading="lazy" src="https://github.com/hatoo/oha/blob/master/demo.gif?raw=true" alt="oha" class="img_ev3q"></p>
<p>–ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –Ω–∞ 1 –º–∏–Ω—É—Ç—É:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">oha </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-z</span><span class="token plain"> 1m https://akmalov.com</span><br></span></code></pre></div></div>
<p>–¢–µ—Å—Ç —Å 10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –∏ 1000 –∑–∞–ø—Ä–æ—Å–∞–º–∏:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">oha </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-c</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-n</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token plain"> https://akmalov.com</span><br></span></code></pre></div></div>
<p>POST –∑–∞–ø—Ä–æ—Å —Å JSON –¥–∞–Ω–Ω—ã–º–∏:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">oha </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-m</span><span class="token plain"> POST </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-H</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"Content-Type: application/json"</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-d</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'{"test": "data"}'</span><span class="token plain"> https://httpbin.org/post</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–æ—Å–Ω–æ–≤–Ω—ã–µ-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã">–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã<a href="https://akmalov.com/blog/oha#%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã">‚Äã</a></h3>
<ul>
<li><code>-z</code> ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, <code>10s</code>, <code>2m</code>, <code>1h</code>)</li>
<li><code>-n</code> ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤</li>
<li><code>-c</code> ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π</li>
<li><code>-m</code> ‚Äî HTTP –º–µ—Ç–æ–¥ (GET, POST, PUT, DELETE)</li>
<li><code>-H</code> ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏ HTTP</li>
<li><code>-d</code> ‚Äî —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞</li>
<li><code>--json</code> ‚Äî –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã">–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã<a href="https://akmalov.com/blog/oha#%D0%B0%D0%BB%D1%8C%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%82%D0%B8%D0%B2%D1%8B" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã">‚Äã</a></h3>
<ul>
<li><strong>hey</strong> ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞ Go</li>
<li><strong>wrk</strong> ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞ C</li>
<li><strong>ab</strong> (Apache Bench) ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</li>
<li><strong>siege</strong> ‚Äî –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li>
</ul>
<p><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ oha:</strong> –∫—Ä–∞—Å–∏–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä—è Rust.</p>]]></content>
        <category label="networks" term="networks"/>
        <category label="tools" term="tools"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[MikroTik CPU Benchmark]]></title>
        <id>https://akmalov.com/blog/mikrotik-cpu-benchmark</id>
        <link href="https://akmalov.com/blog/mikrotik-cpu-benchmark"/>
        <updated>2025-07-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ CPU –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö MikroTik]]></summary>
        <content type="html"><![CDATA[<p>CPU benchmark ipq-6010 vs 88f7040 —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ MikroTik RB5009 vs hap ax3</p>
<p><a href="https://akmalov.com/blog/mikrotik-cpu-benchmark"><img decoding="async" loading="lazy" alt="mikrotik chr" src="https://akmalov.com/assets/images/logo-e4208a9f1f19736a2bf5aa854103d3b8.png" width="1201" height="470" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–≤–≤–µ–¥–µ–Ω–∏–µ">–í–≤–µ–¥–µ–Ω–∏–µ<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–≤–µ–¥–µ–Ω–∏–µ" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–≤–µ–¥–µ–Ω–∏–µ">‚Äã</a></h2>
<p>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä—è–º–æ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞—Ö MikroTik –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —Ç–µ–ø–µ—Ä—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–Ω—Ç–∞–∑–∏–∏ –∏ —Ä–µ—Å—É—Ä—Å–∞—Ö –∂–µ–ª–µ–∑–∫–∏</p>
<p>–ï—Å–ª–∏ —Ä–µ—à–∏—Ç–µ –ø–æ–∏–≥—Ä–∞—Ç—å –¥–æ–º–∞ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, —Ç–æ —Å–æ–≤–µ—Ç—É—é –≤—ã–±–∏—Ä–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:</p>
<ul>
<li><strong>ARM64</strong></li>
<li><strong>RAM</strong> &gt; 1Gb</li>
</ul>
<p>–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <strong>CHR VM</strong></p>
<p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç 2025 –≥–æ–¥ –∏ —Å–∞–º—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–ª—è —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∂–µ–ª–µ–∑–∫–∏ —ç—Ç–æ:</p>
<ul>
<li>hap ax2 (–Ω–µ—Ç USB –ø–æ—Ä—Ç–∞ –ø—Ä–∏–¥–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤–æ–π –¥–∏—Å–∫)</li>
<li>hap ax3</li>
<li>RB5009</li>
</ul>
<p>–ü–æ –æ—Å–Ω–æ–≤–Ω—ã–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º –≤—Å–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏ —Å—Ö–æ–∂–∏, –Ω–æ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –∏ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã —Å—Ä–∞–≤–Ω–∏—Ç—å –∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-cpu-mikrotik">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ CPU MikroTik<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#%D1%81%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-cpu-mikrotik" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ CPU MikroTik" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ CPU MikroTik">‚Äã</a></h2>
<table><thead><tr><th>Property</th><th>RB5009UG</th><th>HAP AX^3</th><th>HAP AX^2</th></tr></thead><tbody><tr><td><strong>Product code</strong></td><td>RB5009UG+S+IN</td><td>C53UiG+5HPaxD2HPaxD</td><td>C52iG-5HaxD2HaxD-TC</td></tr><tr><td><strong>Architecture</strong></td><td>ARM 64bit</td><td>ARM 64bit</td><td>ARM 64bit</td></tr><tr><td><strong>CPU</strong></td><td>88F7040</td><td>IPQ-6010</td><td>IPQ-6010</td></tr><tr><td><strong>CPU core count</strong></td><td>4</td><td>4</td><td>4</td></tr><tr><td><strong>CPU nominal frequency</strong></td><td>350-1400 MHz</td><td>864 - 1800 MHz</td><td>864 MHz</td></tr><tr><td><strong>Size of RAM</strong></td><td>1 GB</td><td>1 GB</td><td>1 GB</td></tr><tr><td><strong>Storage size</strong></td><td>1 GB</td><td>128 MB</td><td>128 MB</td></tr><tr><td><strong>IPsec hardware acceleration</strong></td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td><strong>Suggested price</strong></td><td>$219.00</td><td>$139.00</td><td>$99.00</td></tr></tbody></table>
<p>–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ CPU –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å sysbench</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--rm</span><span class="token plain"> zyclonite/sysbench </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--test</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">cpu run</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--rm</span><span class="token plain"> zyclonite/sysbench </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--test</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">cpu </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--threads</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> run</span><br></span></code></pre></div></div>
<p>–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç: <code>RouterOS 7.19.3</code></p>
<p>–°–Ω–∞—á–∞–ª–æ –ø—Ä–æ–≤–µ—Ä–∏–º –≤–∫–ª—é—á–µ–Ω –ª–∏ —Ä–µ–∂–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤</p>
<div class="language-routeros codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-routeros codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/system/device-mode/print </span><br></span></code></pre></div></div>
<p>–ï—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –≤–∫–ª—é—á–∞–µ–º</p>
<div class="language-routeros codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-routeros codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/system/device-mode/update container=yes</span><br></span></code></pre></div></div>
<p>–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ</p>
<div class="language-routeros codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-routeros codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Create bridge for containers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/interface/bridge/add name=br-container </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/ip/address/add address=10.200.0.1/24 interface=br-container </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Virtual Ethernet interface for Docker containers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/interface/veth/add name=veth1 address=10.200.0.10/24 gateway=10.200.0.1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/interface/bridge/port/add bridge=br-container interface=veth1 </span><br></span></code></pre></div></div>
<p>C–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å sysbench</p>
<div class="language-routeros codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-routeros codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/container/add remote-image=mirror.gcr.io/zyclonite/sysbench cmd="--test=cpu --threads=1 run" interface=veth1 logging=yes name=sysbench root-dir=docker/sysbench </span><br></span></code></pre></div></div>
<p>–î–∞–ª–µ–µ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ —Å–º–æ—Ç—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ª–æ–≥–∞—Ö</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rb5009---cpu-88f7040">RB5009 - CPU 88F7040<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#rb5009---cpu-88f7040" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ RB5009 - CPU 88F7040" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ RB5009 - CPU 88F7040">‚Äã</a></h3>
<p><a href="https://akmalov.com/assets/files/image-5009-23f2626d6d0e965f94e5cd918f4f18a8.png" target="_blank"><img decoding="async" loading="lazy" alt="RB5009" src="https://akmalov.com/assets/images/image-5009-23f2626d6d0e965f94e5cd918f4f18a8.png" width="3500" height="2200" class="img_ev3q"></a></p>
<p>sysbench</p>
<div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">threads: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sysbench: CPU speed: 1276 events per second</span><br></span></code></pre></div></div>
<div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">threads: 4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sysbench: CPU speed: 5093.27 events per second</span><br></span></code></pre></div></div>
<p><a href="https://akmalov.com/assets/files/cpu-5009-4f5f764801bf693503b963121f4f5036.png" target="_blank"><img decoding="async" loading="lazy" alt="CPU RB5009" src="https://akmalov.com/assets/images/cpu-5009-4f5f764801bf693503b963121f4f5036.png" width="932" height="526" class="img_ev3q"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hap-ax3---cpu-ipq-6010">HAP AX3 - CPU IPQ-6010<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#hap-ax3---cpu-ipq-6010" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ HAP AX3 - CPU IPQ-6010" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ HAP AX3 - CPU IPQ-6010">‚Äã</a></h3>
<p><a href="https://akmalov.com/assets/files/image-hap-ax3-006735e75aad4d126ad5952944f6e832.png" target="_blank"><img decoding="async" loading="lazy" alt="HAP AX3" src="https://akmalov.com/assets/images/image-hap-ax3-006735e75aad4d126ad5952944f6e832.png" width="3233" height="2613" class="img_ev3q"></a>
sysbench</p>
<div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">threads: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sysbench: CPU speed: 841 events per second</span><br></span></code></pre></div></div>
<div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">threads: 4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sysbench: CPU speed: 3347.89 events per second</span><br></span></code></pre></div></div>
<p><a href="https://akmalov.com/assets/files/cpu-hap-ax3-d3d8e9be23a88f20070ec0e27962d2dc.png" target="_blank"><img decoding="async" loading="lazy" alt="CPU HAP AX3" src="https://akmalov.com/assets/images/cpu-hap-ax3-d3d8e9be23a88f20070ec0e27962d2dc.png" width="868" height="512" class="img_ev3q"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="chr-vps-red-hat-kvm-x86_64">CHR VPS Red Hat KVM x86_64<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#chr-vps-red-hat-kvm-x86_64" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ CHR VPS Red Hat KVM x86_64" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ CHR VPS Red Hat KVM x86_64">‚Äã</a></h3>
<p>–ï—Å—Ç—å —Å—Ç–∞—Ä–∞—è –¥–µ—à–µ–≤–∞—è VPS –æ—Ç –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω CHR –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç –Ω–∞–∑–∞–¥, –¥–æ —Å–∏—Ö –ø–æ—Ä –±–µ–∑ –ø—Ä–æ–±–ª–µ–º –∏ —Å–±–æ–µ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ä–µ—à–∏–ª –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –µ–µ —Ç–æ–∂–µ</p>
<ul>
<li><strong>CPU:</strong> 1 core (–¥–æ–ø.–∏–Ω—Ñ–æ –æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ)</li>
<li><strong>RAM:</strong> 1 GB</li>
</ul>
<div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">threads: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sysbench: CPU speed: 2491.79 events per second</span><br></span></code></pre></div></div>
<div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">threads: 4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sysbench: CPU speed: 2483.32 events per second</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏-cpu-–æ–¥–Ω–æ—è–¥–µ—Ä–Ω—ã–π-—Ä–µ–∂–∏–º">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ CPU (–æ–¥–Ω–æ—è–¥–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º)<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#%D1%81%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8-cpu-%D0%BE%D0%B4%D0%BD%D0%BE%D1%8F%D0%B4%D0%B5%D1%80%D0%BD%D1%8B%D0%B9-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ CPU (–æ–¥–Ω–æ—è–¥–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º)" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ CPU (–æ–¥–Ω–æ—è–¥–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º)">‚Äã</a></h2>
<table><thead><tr><th>Device</th><th>CPU</th><th>Frequency</th><th>Events/sec</th><th>Relative performance</th></tr></thead><tbody><tr><td><strong>CHR VPS (KVM)</strong></td><td>x86_64</td><td>-</td><td><strong>2492</strong></td><td>100%</td></tr><tr><td><strong>RB5009UG+S+IN</strong></td><td>88F7040</td><td>350-1400 MHz</td><td><strong>1276</strong></td><td>51%</td></tr><tr><td><strong>HAP AX3</strong></td><td>IPQ-6010</td><td>864-1800 MHz</td><td><strong>841</strong></td><td>34%</td></tr><tr><td><strong>HAP AX2</strong></td><td>IPQ-6010</td><td>864 MHz</td><td><strong>401</strong></td><td>16%</td></tr></tbody></table>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">CHR VPS (x86_64)    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    2492 events/sec</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RB5009 (88F7040)    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñç             1276 events/sec</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HAP AX3 (IPQ-6010)  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñæ                 841 events/sec</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HAP AX2 (IPQ-6010)  ‚ñà‚ñà‚ñà‚ñè                    401 events/sec</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏-cpu-–º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã–π-—Ä–µ–∂–∏–º-4-–ø–æ—Ç–æ–∫–∞">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ CPU (–º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º, 4 –ø–æ—Ç–æ–∫–∞)<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#%D1%81%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8-cpu-%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D1%8F%D0%B4%D0%B5%D1%80%D0%BD%D1%8B%D0%B9-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC-4-%D0%BF%D0%BE%D1%82%D0%BE%D0%BA%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ CPU (–º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º, 4 –ø–æ—Ç–æ–∫–∞)" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ CPU (–º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º, 4 –ø–æ—Ç–æ–∫–∞)">‚Äã</a></h2>
<table><thead><tr><th>Device</th><th>CPU</th><th>Frequency</th><th>Events/sec</th><th>Relative performance</th></tr></thead><tbody><tr><td><strong>RB5009UG+S+IN</strong></td><td>88F7040</td><td>350-1400 MHz</td><td><strong>5093</strong></td><td>100%</td></tr><tr><td><strong>HAP AX3</strong></td><td>IPQ-6010</td><td>864-1800 MHz</td><td><strong>3348</strong></td><td>66%</td></tr><tr><td><strong>CHR VPS (KVM)</strong></td><td>x86_64</td><td>-</td><td><strong>2483</strong></td><td>49%</td></tr><tr><td><strong>HAP AX2</strong></td><td>IPQ-6010</td><td>864 MHz</td><td><strong>1603</strong></td><td>31%</td></tr></tbody></table>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">RB5009 (88F7040)    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    5093 events/sec</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HAP AX3 (IPQ-6010)  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñé          3348 events/sec</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CHR VPS (x86_64)    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñæ              2483 events/sec</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HAP AX2 (IPQ-6010)  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñé                 1603 events/sec</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–≤—ã–≤–æ–¥—ã">–í—ã–≤–æ–¥—ã<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4%D1%8B" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í—ã–≤–æ–¥—ã" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í—ã–≤–æ–¥—ã">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rb5009-88f7040">RB5009 (88F7040)<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#rb5009-88f7040" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ RB5009 (88F7040)" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ RB5009 (88F7040)">‚Äã</a></h3>
<p>–õ–∏–¥–µ—Ä—É–µ—Ç, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã—à–µ —á–µ–º HAP AX3 –Ω–∞ 52%, –Ω–æ –∏ —Ü–µ–Ω–∞ –¥–æ—Ä–æ–∂–µ –Ω–∞ 58%</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hap-ax3-ipq-6010">HAP AX3 (IPQ-6010)<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#hap-ax3-ipq-6010" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ HAP AX3 (IPQ-6010)" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ HAP AX3 (IPQ-6010)">‚Äã</a></h3>
<p>–î–æ—Å—Ç–æ–π–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Ö–æ—Ä–æ—à–µ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω–∞/–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hap-ax2-ipq-6010">HAP AX2 (IPQ-6010)<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#hap-ax2-ipq-6010" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ HAP AX2 (IPQ-6010)" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ HAP AX2 (IPQ-6010)">‚Äã</a></h3>
<p>–û–Ω –∏–º–µ–µ—Ç —Ç–∞–∫–æ–π –∂–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∫–∞–∫ ax3 IPQ-6010, –Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–ª—å–Ω–æ –Ω–∏–∂–µ,  –∏–∑-–∑–∞ –º–µ–Ω—å—à–µ–≥–æ —Ñ–æ—Ä–º-—Ñ–∞–∫—Ç–æ—Ä–∞ ax2 —Ö—É–∂–µ –æ—Ç–≤–æ–¥–∏—Ç —Ç–µ–ø–ª–æ, –ø–æ—ç—Ç–æ–º—É —Ç–∞–∫—Ç–æ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ ax3 –º–æ–∂–µ—Ç –¥–æ—Å—Ç–∏–≥–∞—Ç—å 1800 –ú–ì—Ü.</p>
<p>–û–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ 48% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ HAP AX3 + –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ USB-–ø–æ—Ä—Ç–∞ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –º–µ–Ω–µ–µ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º, –∏ –Ω–µ—Ç –æ—Å–æ–±–æ–≥–æ —Å–º—ã—Å–ª–∞ –ø–æ–∫—É–ø–∞—Ç—å —ç—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="chr-vps-x86_64">CHR VPS (x86_64)<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#chr-vps-x86_64" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ CHR VPS (x86_64)" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ CHR VPS (x86_64)">‚Äã</a></h3>
<p>–¢—É—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–∂–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞ –∏ —Ç–∞—Ä–∏—Ñ–∞, –∏–º–µ–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ VPS —Å CHR –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é —Å–∞–º—ã–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–∞—Ä–∏—Ñ (1 core, 1 GB RAM), –Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–µ–∑–¥–µ —Ä–∞–∑–Ω–∞—è, –Ω–∞ –æ–¥–Ω–æ–º –¥–∞–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª –ø—Ä–∏–º–µ—Ä–Ω–æ 753 (—è —Å–∞–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —á—Ç–æ —Ç–æ —É–ø—É—Å—Ç–∏–ª –∏–ª–∏ –æ–±–ª–∞—á–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –º—É—Ç–∏—Ç)</p>
<p>–ë–æ–ª—å—à–æ–π –æ—Ç—Ä—ã–≤ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ, –Ω–æ —Ç.–∫. –Ω–∞ –º–æ–µ–º —Ç–∞—Ä–∏—Ñ–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —è–¥—Ä–æ, —Ç–æ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ —É–∂–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç –æ–±—ã—á–Ω—ã–º –∂–µ–ª–µ–∑–∫–∞–º</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–æ-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö">–û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#%D0%BE-%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80%D0%B0%D1%85" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö">‚Äã</a></h3>
<p>–ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ —Å–∞–π—Ç–µ MikroTik –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –∏ –∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–µ <a href="https://help.mikrotik.com/docs/spaces/ROS/pages/84901929/Container" target="_blank" rel="noopener noreferrer">Container on MikroTik</a></p>
<p>–†–æ–ª–∏–∫ –Ω–∞ YouTube - <a href="https://www.youtube.com/watch?v=gfM1FvrWN18" target="_blank" rel="noopener noreferrer">Docker –≤ Mikrotik</a></p>
<p>–í —Ü–µ–ª–æ–º –Ω–∞—á–∞–ª–æ —É–∂–µ –ø–æ–ª–æ–∂–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —á—Ç–æ–± –ø–æ–¥–Ω—è—Ç—å —Ä–µ–≤–µ—Ä—Å –ø—Ä–æ–∫—Å–∏ nginx –∏ —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ.</p>
<p>–ù–∞ –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —Å 512Mb RAM –∏ —Å—Ç–∞—Ä—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ ARM –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é, —Ç.–∫. –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —Å–±–æ—Ä–∫–∞–º–∏. –ü—Ä–æ–±–æ–≤–∞–ª –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∞—Ä—ã—Ö —Ä–æ—É—Ç–µ—Ä–∞—Ö –±–∞–ª–æ–≤–∞—Ç—å—Å—è, –µ—Å—Ç—å –Ω—é–∞–Ω—Å—ã –∏ –Ω–µ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sysbench">sysbench<a href="https://akmalov.com/blog/mikrotik-cpu-benchmark#sysbench" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ sysbench" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ sysbench">‚Äã</a></h2>
<p>–î–ª—è —Å—Ä–∞–≤–µ–Ω–µ–Ω–∏—è –¥—Ä—É–≥–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ <code>sysbench</code> threads=1</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--rm</span><span class="token plain"> zyclonite/sysbench </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--test</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">cpu </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--threads</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> run</span><br></span></code></pre></div></div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Intel N100:            2951.01</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- AMD Ryzen 5 5600G:     4711.98</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- AMD Ryzen 7 8745H:     5390.37</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Apple Mac Mini M4 16:  10459.80</span><br></span></code></pre></div></div>
<p>sysbench - –∏–º–µ–µ—Ç —Å–∏–ª—å–Ω–æ –±–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –µ—â–µ —É–º–µ–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞–º—è—Ç–∏, –¥–∏—Å–∫–æ–≤ –∏ —Ç.–¥. –í —ç—Ç–∏—Ö —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ</p>
<p>–î–∞–ª—å–Ω–µ–π—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É –æ–±–Ω–æ–≤–ª—è—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ github <a href="https://github.com/akmalovaa/mikrotik-containers/blob/main/benchmark_cpu.md" target="_blank" rel="noopener noreferrer">mikrotik-cpu-benchmark</a></p>]]></content>
        <category label="homelab" term="homelab"/>
        <category label="networks" term="networks"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Homelab SSL Certificate]]></title>
        <id>https://akmalov.com/blog/homelab-ssl-certificate</id>
        <link href="https://akmalov.com/blog/homelab-ssl-certificate"/>
        <updated>2024-08-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[–°–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç]]></summary>
        <content type="html"><![CDATA[<p>–°–æ–∑–¥–∞–Ω–∏–µ —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</p>
<p><a href="https://akmalov.com/blog/homelab-ssl-certificate"><img decoding="async" loading="lazy" alt="homelab ssl certificate" src="https://akmalov.com/assets/images/logo-763162b9d97b418dae8911d000fb916f.png" width="1201" height="470" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–≤–≤–µ–¥–µ–Ω–∏–µ">–í–≤–µ–¥–µ–Ω–∏–µ<a href="https://akmalov.com/blog/homelab-ssl-certificate#%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–≤–µ–¥–µ–Ω–∏–µ" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–≤–µ–¥–µ–Ω–∏–µ">‚Äã</a></h2>
<p>–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫—É–ø–ª–µ–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏ ‚Äî –ø–æ–ª—É—á–∏—Ç—å wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt.</p>
<p>–ï—Å–ª–∏ –Ω–µ—Ç —Å–≤–æ–µ–≥–æ –¥–æ–º–µ–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥–¥–æ–º–µ–Ω—ã —Å HTTPS –≤ —Å–≤–æ–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã.</p>
<p>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ö–µ–º–∞ —Ü–µ–ø–æ—á–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:</p>
<ul>
<li>–ö–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Root CA)</li>
<li>–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Intermediate CA)</li>
<li>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ (Server Certificate)</li>
</ul>
<p>–î–ª—è –¥–æ–º–∞—à–Ω–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –º–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Å—Ö–µ–º—É –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Intermediate CA.</p>
<p>–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –∫—Ä—É–ø–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è—Ö –¥–ª—è:</p>
<ul>
<li>üè¢ –†–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –æ—Ç–¥–µ–ª–∞–º–∏</li>
<li>üîí –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–º–æ–∂–Ω–æ –æ—Ç–æ–∑–≤–∞—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π CA, –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è –∫–æ—Ä–Ω–µ–≤–æ–π)</li>
<li>üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤</li>
<li>üåê –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö Certificate Authority</li>
</ul>
<p><strong>–ü–ª–∞–Ω:</strong></p>
<ul>
<li>–°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Root CA)</li>
<li>–°–æ–∑–¥–∞—Ç—å wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ (Server Certificate) –∏ –ø–æ–¥–ø–∏—Å–∞—Ç—å –µ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É—è Root CA</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è">–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è<a href="https://akmalov.com/blog/homelab-ssl-certificate#%D0%BF%D1%80%D0%B5%D0%B4%D0%B2%D0%B0%D1%80%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è">‚Äã</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</div><div class="admonitionContent_BuS1"><ul>
<li>OpenSSL (–ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ Linux/macOS —Å–∏—Å—Ç–µ–º)</li>
<li>–¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä (nano, vim –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π)</li>
<li>–ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–º</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-—Å–æ–∑–¥–∞–Ω–∏–µ-–∫–æ—Ä–Ω–µ–≤–æ–≥–æ-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞-root-ca">1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (Root CA)<a href="https://akmalov.com/blog/homelab-ssl-certificate#1-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D1%80%D0%BD%D0%B5%D0%B2%D0%BE%D0%B3%D0%BE-%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%B0-root-ca" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (Root CA)" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (Root CA)">‚Äã</a></h2>
<p>–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl genrsa </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-aes256</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-out</span><span class="token plain"> root.key </span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><br></span></code></pre></div></div>
<p>–ó–∞–ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å <code>Enter PEM pass phrase</code> ‚Äî –Ω—É–∂–Ω–æ –µ–≥–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å, –æ–Ω –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>–í–∞–∂–Ω–æ</div><div class="admonitionContent_BuS1"><p>–ó–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –Ω–∞–¥–µ–∂–Ω–æ–º –º–µ—Å—Ç–µ.</p></div></div>
<p>–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 20 –ª–µ—Ç):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl req </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-new</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-x509</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-days</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7200</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-key</span><span class="token plain"> root.key </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-sha256</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-out</span><span class="token plain"> root.pem</span><br></span></code></pre></div></div>
<p>–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø—Ä–∏–¥—É–º–∞–ª–∏ –≤—ã—à–µ, –∏ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ —è–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ C (Country) –∏ CN (Common Name):</p>
<div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Country Name (2 letter code) [XX]: RU</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- State or Province Name (full name) []: Moscow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Locality Name (eg, city) []: Moscow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Organization Name (eg, company) [Internet Widgits Pty Ltd]: Homelab</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Organizational Unit Name (eg, section) []: IT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Common Name (eg, fully qualified host name) []: *.akmalov.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- Email Address []:</span><br></span></code></pre></div></div>
<p>–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl x509 </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-text</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-noout</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-in</span><span class="token plain"> root.pem </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">head</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-15</span><br></span></code></pre></div></div>
<p>–ß—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —ç—Ç–æ —Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –≤–≤–µ—Å—Ç–∏ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl x509 </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-text</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-noout</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-in</span><span class="token plain"> root.pem  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> CA:</span><br></span></code></pre></div></div>
<p>–ï—Å–ª–∏ <code>CA:TRUE</code>, –∑–Ω–∞—á–∏—Ç –≤—Å–µ —É—Å–ø–µ—à–Ω–æ, –Ω–∞ –≤—ã—Ö–æ–¥–µ –∏–º–µ–µ–º –¥–≤–∞ —Ñ–∞–π–ª–∞:</p>
<ul>
<li>root.key (–∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á)</li>
<li>root.pem (–∫–æ—Ä–Ω–µ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç)</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞</div><div class="admonitionContent_BuS1"><p>–§–∞–π–ª <code>root.pem</code> –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –≤ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ—Ä–Ω–µ–≤—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-—Å–æ–∑–¥–∞–Ω–∏–µ-–∫–ª—é—á–∞-–∏-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏-wildcard-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞">2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞<a href="https://akmalov.com/blog/homelab-ssl-certificate#2-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BB%D1%8E%D1%87%D0%B0-%D0%B8-%D0%BF%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B8-wildcard-%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞">‚Äã</a></h2>
<p>–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl genrsa </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-out</span><span class="token plain"> wildcard.akmalov.key </span><span class="token number" style="color:rgb(247, 140, 108)">4096</span><br></span></code></pre></div></div>
<p>–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">nano</span><span class="token plain"> wildcard.akmalov.cnf</span><br></span></code></pre></div></div>
<p>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –¥–ª—è wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ <code>*.akmalov.com</code>:</p>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[req]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">distinguished_name = homelab</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">req_extensions = req_ext</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">prompt = no</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[homelab]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">C = RU</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">O = Wildcard Homelab</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">OU = IT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CN = *.akmalov.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[req_ext]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">keyUsage = keyEncipherment, dataEncipherment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">extendedKeyUsage = serverAuth</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">subjectAltName = @alt_names</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[alt_names]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DNS.1 = *.akmalov.com</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-—Å–æ–∑–¥–∞–Ω–∏–µ-—Ñ–∞–π–ª–∞-csr">3. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ CSR<a href="https://akmalov.com/blog/homelab-ssl-certificate#3-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0-csr" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ CSR" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ CSR">‚Äã</a></h2>
<p>CSR (Certificate Signing Request) ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–¥–ø–∏—Å—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏–ª–∏, –ø—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, "–∑–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç".</p>
<p>–ê–Ω–∞–ª–æ–≥–∏—è —Å –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–º —Å—Ç–æ–ª–æ–º:</p>
<ol>
<li>–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á = –≤–∞—à–∞ –ª–∏—á–Ω–æ—Å—Ç—å (—Å–µ–∫—Ä–µ—Ç–Ω–∞—è)</li>
<li>CSR = –∑–∞—è–≤–ª–µ–Ω–∏–µ –≤ –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–π —Å—Ç–æ–ª —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏</li>
<li>CA (—Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏) = –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–π —Å—Ç–æ–ª</li>
<li>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç = –≥–æ—Ç–æ–≤—ã–π –ø–∞—Å–ø–æ—Ä—Ç —Å –ø–µ—á–∞—Ç—å—é</li>
</ol>
<p>–°–æ–∑–¥–∞–Ω–∏–µ CSR —Å –ø–æ–º–æ—â—å—é –∫–ª—é—á–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl req </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-new</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-key</span><span class="token plain"> wildcard.akmalov.key </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-config</span><span class="token plain"> wildcard.akmalov.cnf </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-out</span><span class="token plain"> wildcard.akmalov.csr</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-–ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ-wildcard-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞-—Å-–ø–æ–º–æ—â—å—é-root-ca">4. –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å –ø–æ–º–æ—â—å—é Root CA<a href="https://akmalov.com/blog/homelab-ssl-certificate#4-%D0%BF%D0%BE%D0%B4%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-wildcard-%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%B0-%D1%81-%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E-root-ca" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 4. –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å –ø–æ–º–æ—â—å—é Root CA" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 4. –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å –ø–æ–º–æ—â—å—é Root CA">‚Äã</a></h2>
<p>–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∫–æ—Ä–Ω–µ–≤—ã–º —Ü–µ–Ω—Ç—Ä–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl x509 </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-req</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-days</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">365</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-in</span><span class="token plain"> wildcard.akmalov.csr </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-CA</span><span class="token plain"> root.pem </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-CAkey</span><span class="token plain"> root.key </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-CAcreateserial</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-sha256</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-extensions</span><span class="token plain"> req_ext </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-extfile</span><span class="token plain"> wildcard.akmalov.cnf </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-out</span><span class="token plain"> wildcard.akmalov.crt</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>–ü–∞—Ä–æ–ª—å</div><div class="admonitionContent_BuS1"><p>–î–ª—è –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –æ—Ç <strong>Root CA</strong> (–∫–æ—Ç–æ—Ä—ã–π –≤—ã –∑–∞–¥–∞–ª–∏ –ø—Ä–∏ –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏–∏).</p></div></div>
<p>–ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ —Ü–µ–ø–æ—á–∫–∞ –¥–æ–≤–µ—Ä–∏—è –Ω–∞–¥—ë–∂–Ω–∞—è:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl verify </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-CAfile</span><span class="token plain"> root.pem wildcard.akmalov.crt</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-success admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>–†–µ–∑—É–ª—å—Ç–∞—Ç</div><div class="admonitionContent_BuS1"><p>wildcard.akmalov.crt: OK</p></div></div>
<p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl x509 </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-text</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-noout</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-in</span><span class="token plain">  wildcard.akmalov.crt  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">head</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-15</span><br></span></code></pre></div></div>
<p>–ü—Ä–æ–≤–µ—Ä–∫–∞ DNS:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl x509 </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-text</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-noout</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-in</span><span class="token plain">  wildcard.akmalov.crt </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">grep</span><span class="token plain"> DNS</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞">5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞<a href="https://akmalov.com/blog/homelab-ssl-certificate#5-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞">‚Äã</a></h2>
<p>–¢–µ–ø–µ—Ä—å –µ—Å—Ç—å –ø–∞—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏ –∫–ª—é—á–∞:</p>
<ul>
<li><code>wildcard.akmalov.crt</code> (—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç)</li>
<li><code>wildcard.akmalov.key</code> (–∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á)</li>
</ul>
<p>–ò—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ proxy –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö –¥–ª—è –ª—é–±—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –≤ –∑–æ–Ω–µ <code>*.akmalov.com</code>:</p>
<ul>
<li>test.akmalov.com</li>
<li>grafana.akmalov.com</li>
<li>api.akmalov.com</li>
<li>–∏ —Ç.–¥.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–∏—Ç–æ–≥–∏">–ò—Ç–æ–≥–∏<a href="https://akmalov.com/blog/homelab-ssl-certificate#%D0%B8%D1%82%D0%BE%D0%B3%D0%B8" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Ç–æ–≥–∏" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Ç–æ–≥–∏">‚Äã</a></h3>
<p>–ü–æ–ª—É—á–∞–ª–∏ —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞ 20 –ª–µ—Ç –¥–ª—è —Å–≤–æ–µ–≥–æ –¥–æ–º–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ—Ä–Ω–µ–≤–æ–π —Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (CA). –î–ª—è –¥–æ–º–∞—à–Ω–µ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–µ —á–µ–º.</p>
<p>–ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±–æ–ª–µ–µ —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–∞–∫ —Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏, –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ —Å–µ—Ä–≤–µ—Ä–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ <a href="https://github.com/smallstep/certificates" target="_blank" rel="noopener noreferrer">smallstep/certificates</a>.</p>
<p>–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å <code>root.pem</code> –Ω–∞ –≤—Å–µ –¥–æ–º–∞—à–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:</p>
<ul>
<li>Windows</li>
<li>Linux</li>
<li>Android</li>
<li>iOS</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="macos">macOS<a href="https://akmalov.com/blog/homelab-ssl-certificate#macos" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ macOS" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ macOS">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> security add-trusted-cert </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-r</span><span class="token plain"> trustRoot </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-k</span><span class="token plain"> /Library/Keychains/System.keychain root.pem</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-ubuntudebian">Linux (Ubuntu/Debian)<a href="https://akmalov.com/blog/homelab-ssl-certificate#linux-ubuntudebian" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Linux (Ubuntu/Debian)" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Linux (Ubuntu/Debian)">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cp</span><span class="token plain"> root.pem /usr/local/share/ca-certificates/homelab-root.crt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> update-ca-certificates</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="windows">Windows<a href="https://akmalov.com/blog/homelab-ssl-certificate#windows" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Windows" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Windows">‚Äã</a></h3>
<ol>
<li>–û—Ç–∫—Ä–æ–π—Ç–µ <code>root.pem</code> —á–µ—Ä–µ–∑ –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫</li>
<li>–ù–∞–∂–º–∏—Ç–µ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç"</li>
<li>–í—ã–±–µ—Ä–∏—Ç–µ "–õ–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä" ‚Üí "–î–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ—Ä–Ω–µ–≤—ã–µ —Ü–µ–Ω—Ç—Ä—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏"</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="androidios">Android/iOS<a href="https://akmalov.com/blog/homelab-ssl-certificate#androidios" class="hash-link" aria-label="–ü—Ä—è–º–∞ÔøΩ—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Android/iOS" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Android/iOS">‚Äã</a></h3>
<p>–ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ —Ñ–∞–π–ª –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>iPhone –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</div><div class="admonitionContent_BuS1"><p>iPhone –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –¥–æ–≤–µ—Ä—è—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º —Å—Ä–æ–∫–æ–º –±–æ–ª–µ–µ 365 –¥–Ω–µ–π. –ü—Ä–∏ –≤—ã–ø—É—Å–∫–µ wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –≤—ã–±–∏—Ä–∞–π—Ç–µ —Å—Ä–æ–∫ 365 –¥–Ω–µ–π –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –µ–∂–µ–≥–æ–¥–Ω–æ.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–∏—Ç–æ–≥–∏-1">–ò—Ç–æ–≥–∏<a href="https://akmalov.com/blog/homelab-ssl-certificate#%D0%B8%D1%82%D0%BE%D0%B3%D0%B8-1" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Ç–æ–≥–∏" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Ç–æ–≥–∏">‚Äã</a></h2>
<p>–ü–æ–ª—É—á–∏–ª–∏ —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞ 20 –ª–µ—Ç –¥–ª—è —Å–≤–æ–µ–≥–æ –¥–æ–º–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ—Ä–Ω–µ–≤–æ–π —Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (CA). –î–ª—è –¥–æ–º–∞—à–Ω–µ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ —ç—Ç–æ–≥–æ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.</p>
<p>–ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –±–æ–ª–µ–µ —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–ª–∏ –Ω—É–∂–Ω–æ –∫–∞–∫-—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏, –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ <a href="https://github.com/smallstep/certificates" target="_blank" rel="noopener noreferrer">smallstep/certificates</a> –∏–ª–∏ <a href="https://github.com/FiloSottile/mkcert" target="_blank" rel="noopener noreferrer">mkcert</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ-—Ä–µ—à–µ–Ω–∏—è">–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è<a href="https://akmalov.com/blog/homelab-ssl-certificate#%D0%B0%D0%BB%D1%8C%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D0%B5-%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è">‚Äã</a></h2>
<ul>
<li><strong>mkcert</strong> ‚Äî –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö CA</li>
<li><strong>step-ca</strong> ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Certificate Authority —Å–µ—Ä–≤–µ—Ä</li>
<li><strong>OpenSSL GUI</strong> ‚Äî –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏</li>
</ul>]]></content>
        <category label="homelab" term="homelab"/>
        <category label="networks" term="networks"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mikrotik CHR cloud hosted router]]></title>
        <id>https://akmalov.com/blog/mikrotik-chr</id>
        <link href="https://akmalov.com/blog/mikrotik-chr"/>
        <updated>2024-05-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Mikrotik CHR Cloud Hosted Router install timeweb VPS]]></summary>
        <content type="html"><![CDATA[<p>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Mikrotik Cloud Hosted Router –Ω–∞ –æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏ –¥–ª—è —á–µ–≥–æ —è –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é</p>
<p><a href="https://akmalov.com/blog/mikrotik-chr"><img decoding="async" loading="lazy" alt="mikrotik chr" src="https://akmalov.com/assets/images/logo-bca9c52c8617b3e673896b5bec7fcc75.png" width="1500" height="500" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–≤–≤–µ–¥–µ–Ω–∏–µ">–í–≤–µ–¥–µ–Ω–∏–µ<a href="https://akmalov.com/blog/mikrotik-chr#%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–≤–µ–¥–µ–Ω–∏–µ" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–≤–µ–¥–µ–Ω–∏–µ">‚Äã</a></h2>
<p>MikroTik Cloud Hosted Router (CHR) ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è RouterOS, –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É x86-64-—Ä–∞–∑—Ä—è–¥–Ω—É—é –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ VMware, Hyper-V, VirtualBox, KVM –∏ —Ç.–¥.</p>
<p>–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è CHR:</p>
<ul>
<li><strong>CPU:</strong> 64-bit with virtualization support</li>
<li><strong>RAM:</strong> &gt; 256MB</li>
<li><strong>Disk:</strong> &gt; 128MB (Max: 16GB)</li>
</ul>
<p>–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ CHR –≤–∫–ª—é—á–µ–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ RouterOS, –Ω–æ –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –º–æ–¥–µ–ª—å –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏—è. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ª–∏—Ü–µ–Ω–∑–∏–∏ —ç—Ç–æ —Å–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞—Ä—É–∂—É - 1 –ú–±–∏—Ç –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏.</p>
<p><strong>–õ–∏—Ü–µ–Ω–∑–∏–∏</strong></p>
<table><thead><tr><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–°–∫–æ—Ä–æ—Å—Ç—å</th><th>–¶–µ–Ω–∞</th></tr></thead><tbody><tr><td>Free</td><td>1 Mbit</td><td>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</td></tr><tr><td>P1</td><td>1 Gbit</td><td>$45</td></tr><tr><td>P10</td><td>10 Gbit</td><td>$95</td></tr></tbody></table>
<p>–£–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏ –º–æ–∂–Ω–æ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ mikrotik.com</p>
<p>–ù–∞ Avito –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø–∞—Ö telegram –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –æ—Ç 1000 —Ä—É–±–ª–µ–π –∑–∞ P1</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–¥–ª—è-—á–µ–≥–æ-–∏—Å–ø–æ–ª—å–∑—É—é-mikrotik-chr-–≤-–æ–±–ª–∞–∫–µ">–î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é Mikrotik CHR –≤ –æ–±–ª–∞–∫–µ<a href="https://akmalov.com/blog/mikrotik-chr#%D0%B4%D0%BB%D1%8F-%D1%87%D0%B5%D0%B3%D0%BE-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8E-mikrotik-chr-%D0%B2-%D0%BE%D0%B1%D0%BB%D0%B0%D0%BA%D0%B5" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é Mikrotik CHR –≤ –æ–±–ª–∞–∫–µ" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é Mikrotik CHR –≤ –æ–±–ª–∞–∫–µ">‚Äã</a></h2>
<p>–ö–∞–∫ –≤–Ω–µ—à–Ω–∏–π —É–∑–µ–ª –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è-—Å—Ö–µ–º–∞">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ö–µ–º–∞<a href="https://akmalov.com/blog/mikrotik-chr#%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%B0%D1%8F-%D1%81%D1%85%D0%B5%D0%BC%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ö–µ–º–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ö–µ–º–∞">‚Äã</a></h3>
<p>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç + —Å—Ç–∞—Ç–∏—á–Ω—ã–π –±–µ–ª—ã–π IP –∞–¥—Ä–µ—Å –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å—Ä–∞–∑—É –Ω–∞ —Ä–æ—É—Ç–µ—Ä, –≤—Å–µ –≤ –¥–æ–º, –∞ –¥–∞–ª—å—à–µ —Ç—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏</p>
<p><a href="https://akmalov.com/assets/files/scheme1.excalidraw-a2a49e7c5d5561fc25bf53a38b1319fd.png" target="_blank"><img decoding="async" loading="lazy" alt="scheme1" src="https://akmalov.com/assets/images/scheme1.excalidraw-a2a49e7c5d5561fc25bf53a38b1319fd.png" width="1600" height="1000" class="img_ev3q"></a></p>
<p><strong>–ü–ª—é—Å—ã:</strong></p>
<ul>
<li>–ù–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ –º–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</li>
</ul>
<p><strong>–ú–∏–Ω—É—Å—ã:</strong></p>
<ul>
<li>–¶–µ–Ω–∞ 250 —Ä—É–±–ª–µ–π –≤ –º–µ—Å—è—Ü –∑–∞ –±–µ–ª—ã–π IP –∞–¥—Ä–µ—Å</li>
<li>–í —Å–ª—É—á–∞–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, —è –∑–∞–≤—è–∑–∞–Ω –Ω–∞ –≤—ã–¥–∞–Ω–Ω—ã–π IP –∞–¥—Ä–µ—Å –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∫–∞–Ω–∞–ª—ã –Ω–µ —Å–ø–∞—Å—É—Ç –æ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="—Å—Ö–µ–º–∞-c-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º-cloud-hosted-router">–°—Ö–µ–º–∞ c –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Cloud Hosted Router<a href="https://akmalov.com/blog/mikrotik-chr#%D1%81%D1%85%D0%B5%D0%BC%D0%B0-c-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC-cloud-hosted-router" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ö–µ–º–∞ c –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Cloud Hosted Router" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ö–µ–º–∞ c –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Cloud Hosted Router">‚Äã</a></h3>
<p>–ü–æ–¥–Ω—è—Ç—å RouterOS –Ω–∞ –æ–±–ª–∞—á–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å VPN + IPsec —Å–µ—Ä–≤–µ—Ä</p>
<p>–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –¥–æ–º–∞—à–Ω–µ–π —Å–µ—Ç–∏ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞</p>
<p><a href="https://akmalov.com/assets/files/scheme_chr.excalidraw-65ca3a4fb33149d829de7a65a5938320.png" target="_blank"><img decoding="async" loading="lazy" alt="scheme_chr" src="https://akmalov.com/assets/images/scheme_chr.excalidraw-65ca3a4fb33149d829de7a65a5938320.png" width="1720" height="1000" class="img_ev3q"></a></p>
<p><strong>–ü–ª—é—Å—ã:</strong></p>
<ul>
<li>–¶–µ–Ω–∞ VPS + —Å—Ç–∞—Ç–∏—á–Ω—ã–π –±–µ–ª—ã–π IP, –¥–µ—à–µ–≤–ª–µ —á–µ–º –ø—Ä–æ—Å—Ç–æ IP –∞–¥—Ä–µ—Å —É –º–æ–µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –Ω–∞ timeweb —Å–µ—Ä–≤–µ—Ä —Å <code>1 CPU, 1Gb RAM, 15GB NVMe</code> (—Ç–∞–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è —Ä–æ—É—Ç–µ—Ä–∞ —Ö–≤–∞—Ç–∏—Ç —Å –±–æ–ª—å—à–∏–º –∑–∞–ø–∞—Å–æ–º) –≤—ã—à–ª–æ 177 ‚ÇΩ/–º–µ—Å</li>
<li>–ú–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –º–µ–Ω—è—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –ø–æ–¥–Ω–∏–º–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —Å–≤—è–∑–∏</li>
<li>–ï—â–µ –æ–¥–Ω–∞ —Å—Ç—É–ø–µ–Ω—å –∑–∞—â–∏—Ç—ã (–ø—Ä–∏ –≥—Ä–∞–º–æ—Ç–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Firewall)</li>
<li>–û—Å—Ç–∞—é—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –º–æ–∂–Ω–æ –µ—â–µ —á—Ç–æ-—Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ –ø–æ–¥–Ω—è—Ç—å</li>
</ul>
<p><strong>–ú–∏–Ω—É—Å—ã:</strong></p>
<ul>
<li>–ü–æ—è–≤–ª—è–µ—Ç—Å—è –µ—â–µ –æ–¥–Ω–∞ —Å–µ—Ç–µ–≤–∞—è —Ç–æ—á–∫–∞ –æ—Ç–∫–∞–∑–∞</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="—Å—Ö–µ–º–∞-c-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º-cloudflare-tunnel">–°—Ö–µ–º–∞ c –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Cloudflare tunnel<a href="https://akmalov.com/blog/mikrotik-chr#%D1%81%D1%85%D0%B5%D0%BC%D0%B0-c-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC-cloudflare-tunnel" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ö–µ–º–∞ c –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Cloudflare tunnel" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°—Ö–µ–º–∞ c –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Cloudflare tunnel">‚Äã</a></h3>
<p>–ï—â–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç, DNS –ø—Ä–æ–≤–∞–π–¥–µ—Ä Cloudflare –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ–æ–±—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–ª—ã–µ IP –∞–¥—Ä–µ—Å–∞</p>
<p>–ï—Å–ª–∏ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ Cloudflare, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>Cloudflare Zero Trust</code> –∏ –≤–Ω—É—Ç—Ä–∏ —Å–≤–æ–µ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞ –ø–æ–¥–Ω—è—Ç—å —Å–µ—Ä–≤–∏—Å(—Å–ª—É–∂–±—É) –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—É–Ω–µ–ª—å —Å Cloudflare –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ–º–µ–Ω—ã –Ω–∞ –Ω—É–∂–Ω—ã–µ –∞–¥—Ä–µ—Å–∞, –±–µ—Ä–µ—Ç –Ω–∞ —Å–µ–±—è –¥–∞–∂–µ —Ä–æ–ª—å –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä–∞.</p>
<p><a href="https://akmalov.com/assets/files/scheme_cloudflare.excalidraw-869415cce781417750813dfcaa47c34e.png" target="_blank"><img decoding="async" loading="lazy" alt="scheme_cloudflare" src="https://akmalov.com/assets/images/scheme_cloudflare.excalidraw-869415cce781417750813dfcaa47c34e.png" width="1780" height="1000" class="img_ev3q"></a></p>
<p>–ü–ª—é—Å—ã:</p>
<ul>
<li>–ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω–∞</li>
<li>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS</li>
<li>–ú–æ–∂–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π proxy —Å–µ—Ä–≤–µ—Ä (–¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)</li>
<li>–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ IP –∞–¥—Ä–µ—Å–∞–º</li>
<li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞</li>
</ul>
<p>–ú–∏–Ω—É—Å—ã:</p>
<ul>
<li>–ü–æ–¥–Ω–∏–º–∞—Ç—å –≤ —Å–≤–æ–µ–º –∫–æ–Ω—Ç—É—Ä–µ –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∏ –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –≥–æ–Ω—è—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–≥–æ</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="—É—Å—Ç–∞–Ω–æ–≤–∫–∞-mikrotik-chr-–≤-–æ–±–ª–∞–∫–µ">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ MikroTik CHR –≤ –æ–±–ª–∞–∫–µ<a href="https://akmalov.com/blog/mikrotik-chr#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-mikrotik-chr-%D0%B2-%D0%BE%D0%B1%D0%BB%D0%B0%D0%BA%D0%B5" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MikroTik CHR –≤ –æ–±–ª–∞–∫–µ" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ MikroTik CHR –≤ –æ–±–ª–∞–∫–µ">‚Äã</a></h2>
<p>–í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞–∫–∞ –æ—Ç <a href="https://timeweb.cloud/r/cp14436" target="_blank" rel="noopener noreferrer">timeweb</a></p>
<p>–°–æ–∑–¥–∞—é —Å–µ—Ä–≤–µ—Ä <strong>Ubuntu</strong> –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏</p>
<p><a href="https://akmalov.com/assets/files/chr_cloud_create-6b936a4391b81adb8f51e83d84f0730f.png" target="_blank"><img decoding="async" loading="lazy" alt="chr_cloud_create" src="https://akmalov.com/assets/images/chr_cloud_create-6b936a4391b81adb8f51e83d84f0730f.png" width="955" height="571" class="img_ev3q"></a></p>
<p>–ù–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–º–µ–Ω—è—Ç—å —Ä–µ–∂–∏–º –∑–∞–≥—Ä—É–∑–∫–∏ –û–° –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –Ω–∞ –¥–∏—Å–∫ <code>/dev/vda</code></p>
<p><a href="https://akmalov.com/assets/files/chr_cloud_create2-9ae00b9eaf9d1ae282b531f98d710c3a.png" target="_blank"><img decoding="async" loading="lazy" alt="chr_cloud_create2" src="https://akmalov.com/assets/images/chr_cloud_create2-9ae00b9eaf9d1ae282b531f98d710c3a.png" width="980" height="555" class="img_ev3q"></a></p>
<p><strong>–†–µ–∂–∏–º –∑–∞–≥—Ä—É–∑–∫–∏ –û–°</strong></p>
<p><strong>–í—ã–±—Ä–∞—Ç—å —Ç–∏–ø:</strong> –ó–∞–≥—Ä—É–∑–∫–∞ —Å –¥–∏—Å–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</p>
<p>–ö–æ–Ω—Å–æ–ª—å SystemRescue (<strong>Ctrl + V</strong> —Ä–∞–±–æ—Ç–∞–µ—Ç)</p>
<p><a href="https://akmalov.com/assets/files/chr_install-ad3d75316f22068174a6dfe2a12e78f5.png" target="_blank"><img decoding="async" loading="lazy" alt="chr_install" src="https://akmalov.com/assets/images/chr_install-ad3d75316f22068174a6dfe2a12e78f5.png" width="978" height="433" class="img_ev3q"></a></p>
<p>–ù–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ <a href="https://mikrotik.com/download" target="_blank" rel="noopener noreferrer">Mikrotik Software</a></p>
<p>–ù–∞–π—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é Cloud Hosted Router - <code>Raw disk image</code> –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É, –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (wget –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞)</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://download.mikrotik.com/routeros/7.14.3/chr-7.14.3.img.zip</span><br></span></code></pre></div></div>
<p>–†–∞–∑–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">unzip</span><span class="token plain"> chr-7.14.3.img.zip</span><br></span></code></pre></div></div>
<p>–ó–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –¥–∏—Å–∫ <code>/dev/vda</code>:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">dd</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">if</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">chr-7.14.3.img </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">of</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/dev/vda</span><br></span></code></pre></div></div>
<p>–í–µ—Ä–Ω—É—Ç—å —Å–µ—Ä–≤–µ—Ä—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å.</p>
<p>–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏–ª–∏ c winbox, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å <code>admin</code> –ø–∞—Ä–æ–ª—å –ø—É—Å—Ç–æ–π.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>–í–∞–∂–Ω–æ</div><div class="admonitionContent_BuS1"><p>–ù—É–∂–Ω–æ —Å—Ä–∞–∑—É —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å, –∏–Ω–∞—á–µ –±—ã—Å—Ç—Ä–æ –ø—Ä–∏–¥—É—Ç –±–æ—Ç—ã, —Å–∞–º–∏ –ø–æ–º–µ–Ω—è—é—Ç –∏ –Ω–∞—Å—Ç—Ä–æ—è—Ç</p></div></div>
<p><a href="https://akmalov.com/assets/files/chr_winbox-bca1c7362ea379be5e0586570667f32b.png" target="_blank"><img decoding="async" loading="lazy" alt="chr_winbox" src="https://akmalov.com/assets/images/chr_winbox-bca1c7362ea379be5e0586570667f32b.png" width="964" height="558" class="img_ev3q"></a></p>
<blockquote>
<p>–õ–æ–≥–∏: —á—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –º–µ–¥–ª–∏—Ç—å —Å –ø–∞—Ä–æ–ª–µ–º –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π</p>
</blockquote>
<p>–ë—ã—Å—Ç—Ä–æ –ø–æ–¥–±–µ—Ä—É—Ç –ø–∞—Ä–æ–ª—å, –¥–æ–±–∞–≤—è—Ç —Å–≤–æ–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤–∫–ª—é—á–∞—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, admin-—Å–∫—É—é —Å–º–µ—Å—Ç—è—Ç –≤ –ø—Ä–∞–≤–∞—Ö –∏ –¥–æ–±–∞–≤—è—Ç –¥–∞–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Å–µ—Ç—å –∞–≤—Ç–æ–±–æ—Ç–æ–≤ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–∏—è –º–∞—à–∏–Ω</p>
<p><a href="https://akmalov.com/assets/files/chr_hacked-bc874a5a54bfbc7b5abd52ca78183a6e.png" target="_blank"><img decoding="async" loading="lazy" alt="chr_hacked" src="https://akmalov.com/assets/images/chr_hacked-bc874a5a54bfbc7b5abd52ca78183a6e.png" width="1099" height="567" class="img_ev3q"></a></p>
<p>–ò–¥–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤: <code>22,23,8291,8022,8728,8729</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-chr">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ CHR<a href="https://akmalov.com/blog/mikrotik-chr#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-chr" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CHR" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CHR">‚Äã</a></h2>
<p>–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</p>
<p>–ß–µ–∫ –ª–∏—Å—Ç:</p>
<ul>
<li>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏, <code>admin</code> –æ—Ç–∫–ª—é—á–∏—Ç—å | —É–¥–∞–ª–∏—Ç—å</li>
<li>–û—Ç–∫–ª—é—á–∏—Ç—å –ª–∏—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –ø–æ–º–µ–Ω—è—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ä—Ç—ã</li>
<li>–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Firewall</li>
<li>–û—Ç–∫–ª—é—á–∏—Ç—å mac-telnet, neighbors</li>
<li>–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Firewall IPv6 –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –∏–Ω–∞—á–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫–ª—é—á–∏—Ç—å IPv6</li>
<li>–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: <em>Port Knocking</em></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vpn">VPN<a href="https://akmalov.com/blog/mikrotik-chr#vpn" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ VPN" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ VPN">‚Äã</a></h3>
<p>–≠—Ç–æ—Ç –æ–±–ª–∞—á–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ—é –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ö–∞–±, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –¥–æ–º–∞—à–Ω–µ–π —Å–µ—Ç–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ –º–æ–∏–º —Å–µ—Ä–≤–∏—Å–∞–º –ø–æ https</p>
<p>–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–≤—è–∑–∫–∞ IPSec/L2TP. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å—ã–≤–∞—Ç—å –Ω–µ –±—É–¥—É, –µ—Å—Ç—å —É–∂–µ –º–Ω–æ–≥–æ –≥–æ—Ç–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.</p>
<p>–ö–æ–≥–¥–∞ <strong>Reverse Proxy Server</strong> –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–æ–º–∞—à–Ω–µ–π —Å–µ—Ç–∏, –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –ø–æ–≤–æ–∑–∏—Ç—å—Å—è —Å –º–∞—à—Ä—É—Ç–∞–º–∏ —Ç.–∫. –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±—Ä–∞—Ç–Ω—ã–µ –º–∞—à—Ä—É—Ç—ã <strong>nginx</strong> –ø–æ–ø—ã—Ç–∞—é—Ç—Å—è –ø–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –¥–æ–º–∞—à–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç</p>
<p><a href="https://akmalov.com/assets/files/chr.excalidraw-1c393ce95540131e6f6e341acce7774d.png" target="_blank"><img decoding="async" loading="lazy" alt="chr" src="https://akmalov.com/assets/images/chr.excalidraw-1c393ce95540131e6f6e341acce7774d.png" width="1760" height="860" class="img_ev3q"></a></p>
<p>–î–æ–±–∞–≤–ª—è—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ <code>chr</code> –Ω–∞ –¥–æ–º–∞—à–Ω–µ–º —Ä–æ—É—Ç–µ—Ä–µ</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/ip route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> dst-address</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">.0.0/0 </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">gateway</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">l2tp routing-table</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">chr</span><br></span></code></pre></div></div>
<p>–º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω–Ω–µ–∫—Ç–æ–≤ –∏ —Ç—Ä–∞—Ñ–∏–∫–∞</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">action</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">mark-connection </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">chain</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">prerouting in-interface</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">l2tp new-connection-mark</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">chr-conn </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">passthrough</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">yes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">action</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">mark-routing </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">chain</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">prerouting connection-mark</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">chr-conn new-routing-mark</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">chr-route </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">passthrough</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">yes</span><br></span></code></pre></div></div>
<ul>
<li>–ï—Å–ª–∏ —Ç—Ä–∞—Ñ–∏–∫ –ø—Ä–∏—à–µ–ª —á–µ—Ä–µ–∑ l2tp —Ç—É–Ω–Ω–µ–ª—å, –ø–æ–º–µ—á–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –µ–≥–æ –∫–∞–∫ <code>chr-conn</code></li>
<li>–ï—Å–ª–∏ –≤–∏–¥–∏–º –ø–æ–º–µ—á–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ <code>chr-conn</code>, —Ç–æ –¥–æ–±–∞–≤–ª—è–µ–º –º–∞—Ä–∫–∏—Ä–æ–≤–∫—É —Ç—Ä–∞—Ñ–∏–∫–∞ <code>chr-route</code></li>
</ul>
<p>–î–æ–±–∞–≤–ª—è—é –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è <code>chr-route</code>, –ø–æ–º–µ–Ω—è—Ç—å —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ <code>chr</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/routing rule</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">add action=lookup-only-in-table disabled=no routing-mark=chr-route table=chr</span><br></span></code></pre></div></div>
<p>–ö–∞–∫ –≤–∞—Ä–∏–∞–Ω—Ç –º–æ–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å <strong>Reverse Proxy</strong> <a href="https://akmalov.com/blog/mikrotik-nginx" target="_blank" rel="noopener noreferrer">Nginx –Ω–∞ —Å–∞–º–æ–º Mikrotik CHR </a>. –†–µ—Å—É—Ä—Å—ã –Ω–∞ VPS –ø–æ–∑–≤–æ–ª—è—é—Ç —ç—Ç–æ —Å–ø–æ–∫–æ–π–Ω–æ —Å–¥–µ–ª–∞—Ç—å.</p>
<p>–î–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—ã–≥–ª—è–¥–∏—Ç –µ—â–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ –∏ –Ω–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏ –≤–æ–∑–∏—Ç—Å—è.</p>
<p>–í —Ü–µ–ª–æ–º –≤—Å–µ.</p>
<p>–ü—ã—Ç–∞–ª—Å—è –ø–æ–∫–∞–∑–∞—Ç—å –¥–ª—è —á–µ–≥–æ —è –∏—Å–ø–æ–ª—å–∑—É—é RouterOS CHR –∏ –∫–∞–∫ –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –µ–≥–æ –≤ –æ–±–ª–∞–∫–µ.</p>]]></content>
        <category label="homelab" term="homelab"/>
        <category label="networks" term="networks"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mikrotik nginx reverse proxy]]></title>
        <id>https://akmalov.com/blog/mikrotik-nginx</id>
        <link href="https://akmalov.com/blog/mikrotik-nginx"/>
        <updated>2023-11-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Mikrotik container nginx reverse proxy RouterOS container]]></summary>
        <content type="html"><![CDATA[<p>Mikrotik –∑–∞–ø—É—Å—Ç–∏—Ç—å NGINX Reverse Proxy –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ä–æ—É—Ç–µ—Ä–µ</p>
<p><a href="https://akmalov.com/blog/mikrotik-nginx"><img decoding="async" loading="lazy" alt="mikrotik nginx container" src="https://akmalov.com/assets/images/logo-469e9f6a2bf984c4ebe66a38708cc51f.png" width="1500" height="500" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–≤–≤–µ–¥–µ–Ω–∏–µ">–í–≤–µ–¥–µ–Ω–∏–µ<a href="https://akmalov.com/blog/mikrotik-nginx#%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–≤–µ–¥–µ–Ω–∏–µ" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–≤–µ–¥–µ–Ω–∏–µ">‚Äã</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–æ-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö-–≤-router-os">–û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –≤ Router OS<a href="https://akmalov.com/blog/mikrotik-nginx#%D0%BE-%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80%D0%B0%D1%85-%D0%B2-router-os" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –≤ Router OS" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –≤ Router OS">‚Äã</a></h2>
<p>–ù–∞—á–∏–Ω–∞—è —Å RouterOS v7.4 –∏ –≤—ã—à–µ, –≤ mikrotik –ø–æ–¥–≤–µ–∑–ª–∏ —Ç–∞–∫—É—é —à—Ç—É–∫—É –∫–∞–∫ <strong>Container</strong>, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö <strong>arm, arm64, x86</strong></p>
<p>–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–∞ wiki <a href="https://help.mikrotik.com/docs/display/ROS/Container" target="_blank" rel="noopener noreferrer">help.mikrotik.com</a></p>
<p>–ú–Ω–µ –æ—á–µ–Ω—å –Ω—Ä–∞–≤—è—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –ª—é–±–ª—é Docker –∏ —Å —Ç–∞–∫–æ–π —Ñ–∏—á–µ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–æ–º–∞—à–Ω–µ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞ —Ç–µ–ø–µ—Ä—å –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ñ–∞–Ω—Ç–∞–∑–∏–µ–π –∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏</p>
<p>–ü—Ä–æ —Ä–µ—Å—É—Ä—Å—ã, –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏–º–µ–µ—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ Mikrotik hap ax3 (C53UiG+5HPaxD2HPaxD) <a href="https://mikrotik.com/product/hap_ax3" target="_blank" rel="noopener noreferrer">—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è</a>:</p>
<ul>
<li><strong>Architecture:</strong>	ARM 64bit</li>
<li><strong>CPU:</strong> IPQ-6010, 4 core, (864 - 1800) MHz</li>
<li><strong>Size of RAM:</strong> 1 GB</li>
<li><strong>Storage size:</strong>	128 MB</li>
</ul>
<p>–í —Ü–µ–ª–æ–º 1Gb (–∏–∑ –Ω–∏—Ö —Å–≤–æ–±–æ–¥–Ω–æ –ø—Ä–∏–º–µ—Ä–Ω–æ 650Mb) –Ω–µ —Ç–∞–∫ –∏ –º–Ω–æ–≥–æ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è, —á—Ç–æ –∂–µ –º–æ–∂–Ω–æ —Ç–∞–º –ø–æ–¥–Ω—è—Ç—å? –ù–∞ —Å–∞–π—Ç–µ wiki —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∏–º–µ—Ä—ã —Å</p>
<ul>
<li>PiHole (DNS Server —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–∫–ª–∞–º—ã) –º–Ω–µ –±–æ–ª—å—à–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –µ–≥–æ –∞–Ω–∞–ª–æ–≥ AdguardHome</li>
<li>freeradius server - –Ω–µ –∑–Ω–∞—é, –Ω–∞—Å–∫–æ–ª—å–∫–æ –∞–∫—Ç—É–∞–ª–µ–Ω —Å–µ–≥–æ–¥–Ω—è radius server</li>
<li>mosquitto MQTT - Message Queuing Telemetry Transport (MQTT) Protocol. –î–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π</li>
<li>ThingsBoard MQTT/HTTP server - –µ—â–µ –æ–¥–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>–°–æ–≤–µ—Ç —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞</div><div class="admonitionContent_BuS1"><p>–í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ RouterOS –ø–æ–∑–≤–æ–ª–∏–ª–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á –≤–Ω—É—Ç—Ä–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ —Å–≤–æ–µ–π —Å–µ—Ç–∏.
–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ/–º–∞—à–∏–Ω–µ, –ø–æ—á–µ–º—É –±—ã –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞?
<a href="https://akmalov.com/assets/files/farcry-b667744f56ae59422879505ce5abb81e.png" target="_blank"><img decoding="async" loading="lazy" alt="farcry" src="https://akmalov.com/assets/images/farcry-b667744f56ae59422879505ce5abb81e.png" width="1440" height="900" class="img_ev3q"></a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="routeros-nginx-reverse-proxy">RouterOS nginx reverse proxy<a href="https://akmalov.com/blog/mikrotik-nginx#routeros-nginx-reverse-proxy" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ RouterOS nginx reverse proxy" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ RouterOS nginx reverse proxy">‚Äã</a></h2>
<p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä–∞ —Å—Ç–æ–∏—Ç –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–±–æ–≤–∞–ª —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (nginx, traefik, caddy)</p>
<p>–ü–æ–ø—Ä–æ–±—É—é –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ –≤–Ω—É—Ç—Ä–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞, –≤—ã–±—Ä–∞–ª <strong>nginx</strong> —Ç.–∫. –ø–æ —Ä–µ—Å—É—Ä—Å–∞–º RAM, –æ–Ω –ø–æ—Ç—Ä–µ–±–ª—è–µ–º –º–µ–Ω—å—à–µ –≤—Å–µ–≥–æ</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞<a href="https://akmalov.com/blog/mikrotik-nginx#%D0%BF%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞">‚Äã</a></h3>
<p>–§—É–Ω–∫—Ü–∏—è <strong>container</strong> –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–µ–Ω–∞, –Ω—É–∂–µ–Ω —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –¥–æ—Å—Ç—É–ø –∫ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—É –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Disclaimer</div><div class="admonitionContent_BuS1"><ul>
<li>–ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –≤–∞—à–µ–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–µ –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å –±—Ä–µ—à—å –≤ —Å–∏—Å—Ç–µ–º–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</li>
<li>–ï—Å–ª–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –≤–∑–ª–æ–º–∞–Ω, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞ –≤–∞—à –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∏ –ø–æ —Å–µ—Ç–∏</li>
</ul></div></div>
<p>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞—Å—Ç–∞–∏–≤–∞—é—Ç –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤–Ω–µ—à–Ω–µ–Ω–≥–æ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è (usb, ssd), —á—Ç–æ–±—ã –Ω–µ –Ω–∞—Å–∏–ª–æ–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É —Å–∞–º–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞. –£—Å—Ç–∞–Ω–æ–≤–∏–ª —Ç—É–¥–∞ –Ω–µ–±–æ–ª—å—à–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–ª–µ—à–∫—É –Ω–∞ 32Gb</p>
<p><a href="https://akmalov.com/assets/files/mikrotik-usb-af1bf381a7e61ad2f2f9e498edf730df.jpg" target="_blank"><img decoding="async" loading="lazy" alt="mikrotik-usb" src="https://akmalov.com/assets/images/mikrotik-usb-af1bf381a7e61ad2f2f9e498edf730df.jpg" width="1200" height="595" class="img_ev3q"></a></p>
<p>–ò–º–µ–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ USB 3.0</p>
<p><a href="https://akmalov.com/assets/files/mikrotik-usb-disk-1fba13d2e18c6927ffc0e71ac9dc181d.png" target="_blank"><img decoding="async" loading="lazy" alt="mikrotik-usb-disk" src="https://akmalov.com/assets/images/mikrotik-usb-disk-1fba13d2e18c6927ffc0e71ac9dc181d.png" width="822" height="495" class="img_ev3q"></a></p>
<p><strong>RouterOS</strong></p>
<ol>
<li>
<p>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–∞—á–∞—Ç—å <a href="https://mikrotik.com/download" target="_blank" rel="noopener noreferrer"><strong>Extra packages</strong> —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞</a> –≤—ã–±—Ä–∞–≤ –Ω—É–∂–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
–í –∞—Ä—Ö–∏–≤–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π, –ø—Ä–∏–º–µ—Ä –Ω–∞–∑–≤–∞–Ω–∏—è - <code>container-7.xx.x-arm64.npk</code>. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</p>
</li>
<li>
<p>–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ <strong>Container</strong></p>
</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/system/device-mode/update container=yes</span><br></span></code></pre></div></div>
<p>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –Ω–∞–ø–∏—à–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –Ω–∞–∂–∞—Ç–∏–µ–º –∫–Ω–æ–ø–∫–∏ —Å–±—Ä–æ—Å–∞ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π –ø–æ –ø–∏—Ç–∞–Ω–∏—é</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–∑–∞–ø—É—Å–∫-nginx-container">–ó–∞–ø—É—Å–∫ nginx container<a href="https://akmalov.com/blog/mikrotik-nginx#%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-nginx-container" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ó–∞–ø—É—Å–∫ nginx container" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ó–∞–ø—É—Å–∫ nginx container">‚Äã</a></h3>
<p>–î–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/interface/veth/add name=veth1 address=172.17.0.2/24 gateway=172.17.0.1</span><br></span></code></pre></div></div>
<p>–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è —ç—Ç–æ–≥–æ –∞–¥—Ä–µ—Å–∞ NAT, –¥–æ–±–∞–≤–∏—Ç—å –≤ bridge, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ firewall</p>
<p>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ <strong>container</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/container/config/set ram-high=200 registry-url=https://registry-1.docker.io tmpdir=usb1/tm</span><br></span></code></pre></div></div>
<p><a href="https://akmalov.com/assets/files/routeros-container-config-747ff0a5a704aaefa0af37142ac4b1e9.png" target="_blank"><img decoding="async" loading="lazy" alt="routeros-container-config" src="https://akmalov.com/assets/images/routeros-container-config-747ff0a5a704aaefa0af37142ac4b1e9.png" width="1067" height="452" class="img_ev3q"></a></p>
<p><strong>RAM Hight</strong> - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ–∑ –ª–∏–º–∏—Ç–∞, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —É–∫–∞–∑–∞—Ç—å)</p>
<p><strong>Mount Points</strong></p>
<p>–¢–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ—Ç–æ—Ä—É—é –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.</p>
<blockquote>
<p>–°–≤–æ—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é NGINX <a href="https://github.com/akmalovaa/mikrotik-nginx" target="_blank" rel="noopener noreferrer">–ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞—é –Ω–∞ Github</a></p>
</blockquote>
<p>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤:
<a href="https://akmalov.com/assets/files/nginx-dir-8acbf5e9de979fdf4db9d800355f6cd6.png" target="_blank"><img decoding="async" loading="lazy" alt="nginx-dir" src="https://akmalov.com/assets/images/nginx-dir-8acbf5e9de979fdf4db9d800355f6cd6.png" width="900" height="500" class="img_ev3q"></a></p>
<p>–í –º–æ–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –≤—Å–µ —Ö–æ—Å—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
<code>config/proxy_host/*.conf</code>. –£–¥–æ–±–Ω–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ö–æ—Å—Ç–æ–≤ - –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –∏ –∏–∑–º–µ–Ω–∏—Ç—å –∞–¥—Ä–µ—Å, –ø–æ—Ä—Ç, –¥–æ–º–µ–Ω (–¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª). –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —ç—Ç–æ–º –º–æ–∂–Ω–æ –≤–æ–æ–±—â–µ –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/container/mounts/add dst=/etc/nginx/nginx.conf name=nginx_conf src=/usb1/nginx/nginx.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/container/mounts/add dst=/etc/nginx/certs name=certs src=/usb1/nginx/certs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/container/mounts/add dst=/data name=nginx_data src=/usb1/nginx/data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/container/mounts/add dst=/etc/nginx/conf.d name=nginx_confd src=/usb1/nginx/config</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏</div><div class="admonitionContent_BuS1"><p>–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å <strong>IP -&gt; SMB</strong> –∏ —Ä–∞—Å—à–∞—Ä–∏—Ç—å USB –ø–æ —Å–µ—Ç–∏</p></div></div>
<p>–ë—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <a href="https://hub.docker.com/_/nginx" target="_blank" rel="noopener noreferrer">nginx alpine —Å docker hub</a>
–ù–∞ —Å–µ–≥–æ–¥–Ω—è –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è —ç—Ç–æ <code>nginx:1.25.3-alpine</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/container/add remote-image=nginx:1.25.3-alpine interface=veth1 root-dir=usb1/docker/nginx mounts=nginx_conf,nginx_confd,nginx_data,certs</span><br></span></code></pre></div></div>
<p>–£–∫–∞–∑–∞—Ç—å –æ–±—Ä–∞–∑, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –º–æ–Ω—Ç–∏—Ä—É–µ–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏,
<a href="https://akmalov.com/assets/files/mikrotik-container-4ff6aa0fa5e118009e7da0ea7f954d95.png" target="_blank"><img decoding="async" loading="lazy" alt="mikrotik-container" src="https://akmalov.com/assets/images/mikrotik-container-4ff6aa0fa5e118009e7da0ea7f954d95.png" width="977" height="647" class="img_ev3q"></a></p>
<p>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</p>
<ul>
<li>–ø–µ—Ä–µ–¥–∞—Ç—å ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</li>
<li>–∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —Ä–æ—É—Ç–µ—Ä–∞</li>
<li>–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å CMD –∏ Entrypoint</li>
<li>–∏ —Ç.–¥.</li>
</ul>
<p><strong>root-dir</strong> - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–≤ docker <strong>var/lib/docker/volume</strong>)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–∏—Ç–æ–≥–∏">–ò—Ç–æ–≥–∏<a href="https://akmalov.com/blog/mikrotik-nginx#%D0%B8%D1%82%D0%BE%D0%B3%D0%B8" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Ç–æ–≥–∏" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Ç–æ–≥–∏">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nginx-container">nginx container<a href="https://akmalov.com/blog/mikrotik-nginx#nginx-container" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ nginx container" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ nginx container">‚Äã</a></h3>
<p>NGINX –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–µ–Ω—è—Ç—å –Ω–µ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ, –∫–∞–∫ –≤–∞—Ä–∏–∞–Ω—Ç –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <strong>Nginx Proxy Manager</strong></p>
<p><strong>Nginx Proxy Manager</strong> - opensource –ø—Ä–æ–µ–∫—Ç, –≥–¥–µ –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ web-gui, db, nginx, certbot (–∏ –¥–∞–∂–µ API –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)</p>
<ul>
<li><a href="https://github.com/NginxProxyManager/nginx-proxy-manager" target="_blank" rel="noopener noreferrer">Github –ø—Ä–æ–µ–∫—Ç–∞</a></li>
<li><a href="https://akmalov.com/blog/nginx-proxy-manager" target="_blank" rel="noopener noreferrer">–°—Ç–∞—Ç—å—è</a></li>
</ul>
<p>–Ω–æ, –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ <strong>RAM</strong> –µ—Å–ª–∏ –Ω–∞ 1Gb –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ–≥–æ - –¥—É–º–∞—é –ø–æ—Ç—è–Ω–µ—Ç.</p>
<p>–ï—Å—Ç—å –º—ã—Å–ª–∏ –∫–∞–∫ –¥–∞–∂–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º nginx —Å–¥–µ–ª–∞—Ç—å —É–¥–æ–±–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –Ω–æ –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="container-stats">container stats<a href="https://akmalov.com/blog/mikrotik-nginx#container-stats" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ container stats" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ container stats">‚Äã</a></h3>
<p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–¥–æ–±–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ mikrotik —Å–∫–æ–ª—å–∫–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∏–ª–∏ –∏–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–µ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="—á—Ç–æ-–µ—â–µ-–ø–æ–∑–∞–ø—É—Å–∫–∞—Ç—å">—á—Ç–æ –µ—â–µ –ø–æ–∑–∞–ø—É—Å–∫–∞—Ç—å<a href="https://akmalov.com/blog/mikrotik-nginx#%D1%87%D1%82%D0%BE-%D0%B5%D1%89%D0%B5-%D0%BF%D0%BE%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA%D0%B0%D1%82%D1%8C" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —á—Ç–æ –µ—â–µ –ø–æ–∑–∞–ø—É—Å–∫–∞—Ç—å" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —á—Ç–æ –µ—â–µ –ø–æ–∑–∞–ø—É—Å–∫–∞—Ç—å">‚Äã</a></h3>
<ul>
<li>AdguardHome - –º–æ–∂–Ω–æ, –Ω–µ –æ—Å–æ–±–æ —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª–µ–Ω –∫ —Ä–µ—Å—É—Ä—Å–∞–º</li>
<li>Home Assistant - –Ω–µ —Ö–≤–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å–æ–≤</li>
<li>–ê–ª—å–µ—Ç—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ reverse proxy - –∞–Ω–∞–ª–æ–≥–∏ treafik, caddy</li>
<li>Python, bash, go - —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–æ—É—Ç–µ—Ä–∞</li>
<li>Prometheus exporter - –±—ã–ª–æ –±—ã —É–¥–æ–±–Ω–µ–µ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å</li>
<li>–°—Ç–∞—Ç–∏—á–Ω—ã–µ —Å–∞–π—Ç—ã - –±–µ–∑ –ø—Ä–æ–±–ª–µ–º</li>
<li>NextCloud, DB, S3, —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ - –ø–æ–ø–∞—Ö–∏–≤–∞–µ—Ç –∏–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º</li>
<li>Speedtest - —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–Ω–∞–ª, —Å–∫–æ—Ä–æ—Å—Ç—å USB + RAM –Ω–∞–≤–µ—Ä–Ω–æ–µ –ø–æ–¥—Å—Ç–∞–≤—è—Ç</li>
</ul>
<p>–î—Ä—É–≥–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –¥–ª—è —á–µ–≥–æ –µ—â–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ä–æ—É—Ç–µ—Ä–µ –º–∏–∫—Ä–æ—Ç–∏–∫ –Ω–∞–ø–∏–∂–∏—Ç–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö</p>]]></content>
        <category label="homelab" term="homelab"/>
        <category label="linux" term="linux"/>
        <category label="networks" term="networks"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Uptime-kuma self-hosted monitoring]]></title>
        <id>https://akmalov.com/blog/uptime-kuma</id>
        <link href="https://akmalov.com/blog/uptime-kuma"/>
        <updated>2023-11-06T10:00:00.000Z</updated>
        <summary type="html"><![CDATA[–ü—Ä–æ—Å—Ç–æ–π –∏ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ö–æ—Å—Ç—ã]]></summary>
        <content type="html"><![CDATA[<p>–í–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ö–æ—Å—Ç–æ–≤</p>
<p><a href="https://akmalov.com/blog/uptime-kuma"><img decoding="async" loading="lazy" alt="uptime-kuma" src="https://akmalov.com/assets/images/uptime-kuma-logo-cc272605e170ba93a58faa0939fdc358.png" width="1500" height="500" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–≤–Ω–µ—à–Ω–∏–π-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-—Ö–æ—Å—Ç–æ–≤">–í–Ω–µ—à–Ω–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ö–æ—Å—Ç–æ–≤<a href="https://akmalov.com/blog/uptime-kuma#%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B8%D0%B9-%D0%BC%D0%BE%D0%BD%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%BD%D0%B3-%D1%85%D0%BE%D1%81%D1%82%D0%BE%D0%B2" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–Ω–µ—à–Ω–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ö–æ—Å—Ç–æ–≤" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–Ω–µ—à–Ω–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ö–æ—Å—Ç–æ–≤">‚Äã</a></h2>
<p>–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–≤–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ —Å–Ω–∞—Ä—É–∂–∏ (—Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞), –Ω–µ–æ–±—Ö–æ–¥–∏–º –≤–Ω–µ—à–Ω–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
–≠—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–æ–¥–Ω–∏–º–∞—Ç—å —Å–Ω–∞—Ä—É–∂–∏, –Ω–µ –Ω–∞ —Å–≤–æ–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ, —Ç.–∫. –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —ç—Ç–æ–º –¥–µ–ª–µ –Ω–µ –æ—Å–æ–±–æ –ø–æ–¥—Ö–æ–¥–∏—Ç, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –≤–Ω—É—Ç—Ä–∏ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤—ã–≥–ª—è–¥—è—Ç –∂–∏–≤—ã–º–∏, —Å–Ω–∞—Ä—É–∂–∏ –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–∞ –ø–æ —Ä–∞–∑–Ω—ã–º –ø—Ä–∏—á–∏–Ω–∞–º.</p>
<p>–ü—Ä–æ–±–æ–≤–∞–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–æ —Å–∞–º—ã–º –ø—Ä–æ—Å—Ç—ã–º –æ–∫–∞–∑–∞–ª—Å—è <strong>uptime-kuma</strong> —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∏ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ö–æ—Å—Ç–æ–≤.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–æ-–ø—Ä–æ–µ–∫—Ç–µ-uptime-kuma">–û –ø—Ä–æ–µ–∫—Ç–µ uptime-kuma<a href="https://akmalov.com/blog/uptime-kuma#%D0%BE-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B5-uptime-kuma" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –û –ø—Ä–æ–µ–∫—Ç–µ uptime-kuma" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –û –ø—Ä–æ–µ–∫—Ç–µ uptime-kuma">‚Äã</a></h2>
<p>–°—Å—ã–ª–∫–∞ –Ω–∞ <a href="https://github.com/louislam/uptime-kuma" target="_blank" rel="noopener noreferrer">Github</a></p>
<p>–û—Å–Ω–æ–≤–Ω—ã–µ –ø–ª—é—Å—ã:</p>
<ul>
<li>–ë–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (—Å–ø–æ—Å–æ–±–æ–≤) –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ HTTP, TCP, json, ping, DNS, Push, Steam —Å–µ—Ä–≤–∏—Å—ã, Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã</li>
<li>–ü—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</li>
<li>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram, Discord, Gotify, Slack, Pushover, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É—é –ø–æ—á—Ç—É (SMTP) –∏ —Ç.–¥.</li>
<li>–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–π</li>
<li>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ–±—â–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—Ç–∞—Ç—É—Å–∞–º</li>
<li>–í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –≥—Ä–∞—Ñ–∏–∫–µ</li>
<li>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞—Ö SSL –∏ —Å—Ä–æ–∫–∞—Ö –¥–µ–π—Å—Ç–≤–∏—è</li>
<li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞</li>
<li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 2FA (–¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)</li>
<li>Open-source</li>
</ul>
<p><a href="https://akmalov.com/assets/files/orig-f395a546e1b559d5a5008b8ec38b22e5.png" target="_blank"><img decoding="async" loading="lazy" alt="uptime-kuma" src="https://akmalov.com/assets/images/orig-f395a546e1b559d5a5008b8ec38b22e5.png" width="1024" height="641" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="—É—Å—Ç–∞–Ω–æ–≤–∫–∞">–£—Å—Ç–∞–Ω–æ–≤–∫–∞<a href="https://akmalov.com/blog/uptime-kuma#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞">‚Äã</a></h2>
<p>–ü–ª–∞–Ω–∏—Ä—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω—ã–π —Å–µ–≤–µ—Ä –æ—Ç timeweb, –º–æ–∂–Ω–æ –≤–∑—è—Ç—å —Å–µ—Ä–≤–µ—Ä –≤ –†–§ –∏–ª–∏ –∑–∞–≥—Ä–∞–Ω–∏—Ü–µ–π</p>
<p><a href="https://akmalov.com/assets/files/timweb-server-254758ec7b3638d4bf1079e2bfbcfccd.png" target="_blank"><img decoding="async" loading="lazy" alt="uptime-kuma-server" src="https://akmalov.com/assets/images/timweb-server-254758ec7b3638d4bf1079e2bfbcfccd.png" width="1234" height="576" class="img_ev3q"></a></p>
<p>–ü–æ–¥–æ–π–¥—É—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–ª–∞–Ω–∏—Ä—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—â–µ –∏ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è - <code>monitoring.example.com</code></p>
<ul>
<li><strong>OS</strong>: Ubuntu 22.02</li>
<li><strong>CPU</strong>: 1 x 2.8 –ì–ì—Ü</li>
<li><strong>RAM</strong>: 1 Gb</li>
<li><strong>SSD</strong>: 15 Gb</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞">1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞<a href="https://akmalov.com/blog/uptime-kuma#1-%D0%BF%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞">‚Äã</a></h3>
<p>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ docker</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">apt update &amp;&amp; apt upgrade -y &amp;&amp; apt install -y curl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -fsSL https://get.docker.com -o get-docker.sh &amp;&amp; sudo sh get-docker.sh</span><br></span></code></pre></div></div>
<p>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è DNS –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ <code>monitoring.example.com</code> - –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –±–µ–ª—ã–π IP –æ—Ç timeweb</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-docker-composeyaml">2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ docker-compose.yaml<a href="https://akmalov.com/blog/uptime-kuma#2-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-docker-composeyaml" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ docker-compose.yaml" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ docker-compose.yaml">‚Äã</a></h3>
<div class="language-YAML language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'3.8'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">caddy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> caddy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">2.7.5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token datetime number" style="color:rgb(247, 140, 108)">80:80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> 443</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token number" style="color:rgb(247, 140, 108)">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> ./Caddyfile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">/etc/caddy/Caddyfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">restart</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">uptime-kuma</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> louislam/uptime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">kuma</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">1.23.3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">debian</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> ./uptime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">kuma</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">/app/data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">restart</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> always</span><br></span></code></pre></div></div>
<p>–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é Caddy –∏ —Å–æ–∑–¥–∞—é —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ <strong>Caddyfile</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">touch</span><span class="token plain"> Caddyfile</span><br></span></code></pre></div></div>
<p>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ <strong>Caddyfile</strong>:</p>
<div class="language-JSON language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">monitoring.example.com </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    reverse_proxy uptime-kuma</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token number" style="color:rgb(247, 140, 108)">3001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker compose up -d</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–∑–∞–ø—É—Å–∫-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞">–ó–∞–ø—É—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞<a href="https://akmalov.com/blog/uptime-kuma#%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-%D0%B8-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ó–∞–ø—É—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ó–∞–ø—É—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞">‚Äã</a></h2>
<p>–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –≤–µ–± –ø–∞–Ω–µ–ª–∏ –ø–æ –¥–æ–º–µ–Ω—É <strong>monitoring.example.com</strong>.</p>
<p>Proxy —Å–µ—Ä–≤–∏—Å Caddy —Å–∞–º —Å—Ö–æ–¥–∏—Ç –ø–æ–ª—É—á–∏—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ HTTPS</p>
<p>–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏, –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø—Ä–∏–¥—É–º–∞—Ç—å –ø–∞—Ä–æ–ª—å</p>
<p>–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:</p>
<ul>
<li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–æ–Ω—É</li>
<li>–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ç–µ–º–Ω—É—é —Ç–µ–º—É</li>
<li>–°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫ –Ω–∞ —É–¥–æ–±–Ω—ã–π</li>
<li>–î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</li>
</ul>
<p>–î–∞–ª–µ–µ –º–æ–∂–Ω–æ —É–∂–µ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä</p>
<p><a href="https://akmalov.com/assets/files/main-site-15cb66bcb13deb8e976b6db0ce1d649e.png" target="_blank"><img decoding="async" loading="lazy" alt="uptime-kuma-server" src="https://akmalov.com/assets/images/main-site-15cb66bcb13deb8e976b6db0ce1d649e.png" width="1872" height="940" class="img_ev3q"></a></p>
<p>–ü–æ –≤—Å–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—ã –∏ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å–ø–∏—Å—ã–≤–∞—Ç—å –Ω–µ –≤–∏–∂—É —Å–º—ã—Å–ª–∞, –≤—Å–µ –∏ —Ç–∞–∫ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ, –∞ –µ—Å–ª–∏ –≤–¥—Ä—É–≥ —Ö–æ—á–µ—Ç—Å—è –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏ –ø–æ—Ç—ã–∫–∞—Ç—å—Å—è, —Ç–æ –Ω–∞ –æ—Ñ—Ñ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –µ—Å—Ç—å <a href="https://uptime.kuma.pet/" target="_blank" rel="noopener noreferrer">–¥–µ–º–æ</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–∏—Ç–æ–≥–∏">–ò—Ç–æ–≥–∏<a href="https://akmalov.com/blog/uptime-kuma#%D0%B8%D1%82%D0%BE%D0%B3%D0%B8" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Ç–æ–≥–∏" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Ç–æ–≥–∏">‚Äã</a></h2>
<p>–ú–Ω–µ –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å, –∏–∑ —Ç–æ–≥–æ, —á—Ç–æ —Ç–æ—á–Ω–æ –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</p>
<ul>
<li>GET –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∞–π—Ç–∞</li>
<li>ping —Å–µ—Ä–≤–µ—Ä–æ–≤</li>
<li>–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ API —Å–µ—Ä–≤–∏—Å–æ–≤</li>
<li>–æ–ø–æ–≤–µ—â–µ–Ω–∏—è –≤ telegram</li>
<li>–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è ssl —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤</li>
</ul>
<p>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (–ø–æ–¥–Ω—è—Ç—ã–π docker + 10 —Ç–æ—á–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–Ω–∏–º–∞—é—Ç 140Mb RAM –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ CPU)</p>
<p>–ò–∑ –Ω–µ–æ–±—ã—á–Ω–æ–≥–æ, —á—Ç–æ –≤–ø–µ—á–∞—Ç–ª–∏–ª–æ:</p>
<ul>
<li>–ï—Å—Ç—å —Ä–µ–≤–µ—Ä—Å –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (–∫–æ–≥–¥–∞ –Ω–∞–æ–±–æ—Ä–æ—Ç, –µ—Å–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä —Å—Ç–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω, —Ç–æ –∫–∞–∫ –æ—à–∏–±–∫—É –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å)</li>
<li>Push –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ - –∫–æ–≥–¥–∞ –∫–æ–Ω–µ—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞ Proxy, NAT –∏ –Ω–µ—Ç –∫ –Ω–µ–º—É –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞, –º–æ–∂–Ω–æ —Å —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ Push –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ —Å–µ–≤–µ—Ä uptime-kuma, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å</li>
<li>–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Steam –∏–≥—Ä–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä, PostgreSQL, Redis, Kafka, MongoDB –∏ —Ç.–¥.)</li>
<li>–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –≥–¥–µ –≤—ã–≤–µ—Å—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–Ω–∏—Ç–æ—Ä—ã –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (–±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)</li>
</ul>
<p>–ò–∑ –º–∏–Ω—É—Å–æ–≤ —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç–æ—á–∫–∞(—É–∑–µ–ª) –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –µ—Å–ª–∏ –±—É–¥—É—Ç –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, —Ç–æ –≤–Ω–µ—à–Ω–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å—Ç–∞–Ω–µ—Ç, —Ç–∞–∫ –∂–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —É–∑–ª–∞ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É (–Ω–∞–ø—Ä–∏–º–µ—Ä —Å –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, –æ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ —É–∑–Ω–∞—Ç—å)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–±–æ–Ω—É—Å">–ë–æ–Ω—É—Å<a href="https://akmalov.com/blog/uptime-kuma#%D0%B1%D0%BE%D0%BD%D1%83%D1%81" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ë–æ–Ω—É—Å" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ë–æ–Ω—É—Å">‚Äã</a></h3>
<p>–î–ª—è –º–∏–Ω—É—Å–∞ –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å–∞–ª –≤—ã—à–µ, –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, —ç—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Selectel</p>
<p><a href="https://akmalov.com/assets/files/selectel-43891573f3dc3d8e4cdc8380a38ed54f.png" target="_blank"><img decoding="async" loading="lazy" alt="selectel –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥" src="https://akmalov.com/assets/images/selectel-43891573f3dc3d8e4cdc8380a38ed54f.png" width="1580" height="464" class="img_ev3q"></a></p>
<p>–ï—Å–ª–∏ –≤–æ–π—Ç–∏ —Å –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥ —Å–≤–æ–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º, –º–æ–∂–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ 3 –º–µ—Ç—Ä–∏–∫</p>
<p>–ó–¥–µ—Å—å —Ç–∞–∫ –∂–µ –∏–º–µ—é—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –º–µ—Ç—Ä–∏–∫, –≥–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –Ω–æ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ 8 —Ä–∞–ª–∏—á–Ω—ã—Ö —Ç–æ—á–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
<a href="https://akmalov.com/assets/files/selectel_get-011d52d7f400f7dafb38bd2c03311f61.png" target="_blank"><img decoding="async" loading="lazy" alt="selectel –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥" src="https://akmalov.com/assets/images/selectel_get-011d52d7f400f7dafb38bd2c03311f61.png" width="1118" height="572" class="img_ev3q"></a></p>
<ul>
<li>–§—Ä–∞–Ω–∫—Ñ—É—Ä—Ç</li>
<li>–õ–æ–Ω–¥–æ–Ω</li>
<li>–ê–º—Å—Ç–µ—Ä–¥–∞–º</li>
<li>–ú–æ—Å–∫–≤–∞</li>
<li>–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫</li>
<li>–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</li>
<li>–ù—å—é-–ô–æ—Ä–∫</li>
<li>–°–∞–Ω-–§—Ä–∞–Ω—Ü–∏—Å–∫–æ</li>
</ul>
<p>–í–æ–∑–º–æ–∂–Ω–æ, –∫–æ–º—É —Ö–≤–∞—Ç–∏—Ç —Ç–∞–∫–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–µ—Ç—Ä–∏–∫ –∏ –Ω–µ—Ç –∂–µ–ª–∞–Ω–∏—è –ø–æ–¥–Ω–∏–º–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, –¥–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ–∫–∞–∂–µ—Ç—Å—è –¥–∞–∂–µ —É–¥–æ–±–Ω–µ–µ.</p>]]></content>
        <category label="monitoring" term="monitoring"/>
        <category label="docker" term="docker"/>
        <category label="ssl" term="ssl"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Auto wildcard cert service]]></title>
        <id>https://akmalov.com/blog/wildcard-ssl-cert</id>
        <link href="https://akmalov.com/blog/wildcard-ssl-cert"/>
        <updated>2023-09-23T10:00:00.000Z</updated>
        <summary type="html"><![CDATA[–ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å wildcard ssl —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è —Å–≤–æ–µ–≥–æ –¥–æ–º–µ–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Cloudflare –∏ acme.sh]]></summary>
        <content type="html"><![CDATA[<p>–ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å wildcard SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è —Å–≤–æ–µ–≥–æ –¥–æ–º–µ–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Cloudflare –∏ acme.sh</p>
<p><a href="https://akmalov.com/blog/wildcard-ssl-cert"><img decoding="async" loading="lazy" alt="wildcard ssl cert" src="https://akmalov.com/assets/images/wildcard-logo-b96826c9a1c679c2e1aa0962a1f3f713.png" width="1498" height="500" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="wildcard-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç">Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç<a href="https://akmalov.com/blog/wildcard-ssl-cert#wildcard-%D1%81%D0%B5%D1%80%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Wildcard —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç">‚Äã</a></h2>
<p>–ù—Ä–∞–≤–∏—Ç—Å—è –∏–∑—É—á–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ OpenSource –ø—Ä–æ–µ–∫—Ç—ã, –∏ —Å–µ–π—á–∞—Å –¥–ª—è –º–Ω–æ–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é —É —Å–µ–±—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã SSL</p>
<p>–ò–º–µ–µ—Ç—Å—è —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω <code>akmalov.com</code> –∏ –ø–æ–¥–¥–º–µ–Ω—ã —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è <code>*.akmalov.com</code> —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤ –ª—é–±–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∏ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞</p>
<p>–†–∞–Ω—å—à–µ –ø—Ä–æ–±–æ–≤–∞–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —Ü–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –ø—Ä–æ–ø–∏—Å—ã–≤–∞–ª –≤ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö, —Å–æ–∑–¥–∞–≤–∞–ª —Å–∞–º–ø–æ–ø–æ–¥–∏—Å–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–æ—á–µ–Ω—å –Ω–µ—É–¥–æ–±–Ω–æ, —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –ø–µ—Å–æ—á–Ω–∏—Ü—ã).
–î–∞–ª–µ–µ —Ä–µ—à–∏–ª –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∫—Ä–∏–ø—Ç—ã –∏ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ –∑–∞–∫–∞–∑—ã–≤–∞–ª —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Å –ø–æ–º–æ—â—å—é <strong>Let's Encrypt</strong> –∏ –∫–æ–≥–¥–∞ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ –Ω–∞–±—Ä–∞–ª–æ—Å—å –±–æ–ª—å—à–µ –¥–µ—Å—è—Ç–∫–∞ —Ä–µ—à–∏–ª –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å <strong>wildcard</strong> —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤.</p>
<blockquote>
<p>–û–¥–∏–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤</p>
</blockquote>
<p><a href="https://akmalov.com/assets/files/wildcard-baf20bbce2641b2b9185a38df454ec3f.jpg" target="_blank"><img decoding="async" loading="lazy" alt="wildcard" src="https://akmalov.com/assets/images/wildcard-baf20bbce2641b2b9185a38df454ec3f.jpg" width="942" height="408" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="acme-shell-script">ACME Shell script<a href="https://akmalov.com/blog/wildcard-ssl-cert#acme-shell-script" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ ACME Shell script" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ ACME Shell script">‚Äã</a></h2>
<p>–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–µ—Ä–µ–ø—Ä–æ–±–æ–≤–∞–ª —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, –¥–ª—è –º–µ–Ω—è —Å–∞–º—ã–º —É–¥–æ–±–Ω—ã–º –ø–æ–∫–∞–∑–∞–ª—Å—è <strong>acme.sh</strong></p>
<p>–°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ñ—Ñ <a href="https://github.com/acmesh-official/acme.sh" target="_blank" rel="noopener noreferrer">Github</a></p>
<ul>
<li>Unix shell —Å–∫—Ä–∏–ø—Ç –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</li>
<li>–ù–µ –Ω—É–∂–Ω—ã root –ø—Ä–∞–≤–∞</li>
<li>–ï—Å—Ç—å docker –æ–±—Ä–∞–∑</li>
<li>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç IPv6</li>
<li>–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ cron-job –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤</li>
<li>–ü—Ä–æ—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</li>
<li>–£–º–µ–µ—Ç –ø–æ API –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ Cloudflare</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cloudflare">Cloudflare<a href="https://akmalov.com/blog/wildcard-ssl-cert#cloudflare" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Cloudflare" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Cloudflare">‚Äã</a></h2>
<p>–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ DNS –∑–∞–ø–∏—Å—è–º–∏ –¥–æ–º–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É—é Cloudflare, –∏–∑ –∑–∞ –µ–≥–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ API, –¥–ª—è –º–Ω–æ–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –µ—Å—Ç—å –æ—á–µ–Ω—å —É–¥–æ–±–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏. –û–¥–Ω–∞ –∏–∑ –ø—Ä–∏—á–∏–Ω –≤—ã–±–æ—Ä–∞ acme.sh —ç—Ç–æ –∫–∞–∫ —Ä–∞–∑, —Ç–æ —á—Ç–æ –æ–Ω –¥—Ä—É–∂–∏—Ç Cloudflare.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>–ø—Ä–∏–º–µ—á–∞–Ω–∏–µ</div><div class="admonitionContent_BuS1"><p>–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–æ–π DNS –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä—É—á–Ω–æ–π —Å–ø–æ—Å–æ–± —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –≥–¥–µ –ø—Ä–∏–¥–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å <code>TXT</code> –∑–∞–ø–∏—Å–∏ –≤ –∞–¥–º–∏–Ω–∫–µ –¥–æ–º–µ–Ω–∞</p></div></div>
<p>–ü–æ—à–∞–≥–æ–≤–æ –ø–æ–ª—É—á–µ–Ω–∏–µ API —Ç–æ–∫–µ–Ω–∞ –≤ Cloudflare:</p>
<ul>
<li>–í–æ–π—Ç–∏ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç <a href="https://dash.cloudflare.com/" target="_blank" rel="noopener noreferrer">Cloudflare</a></li>
<li>–ù–∞–∂–∞—Ç—å –Ω–∞ –∏–∫–æ–Ω–∫—É –ø—Ä–æ—Ñ–∏–ª—è –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞ –∏ –≤—ã–±—Ä–∞—Ç—å <strong>My Profile</strong> –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º –º–µ–Ω—é.</li>
<li>–î–∞–ª–µ–µ –≤—ã–±–µ—Ä–∏—Ç–µ <strong>API Tokens</strong> –Ω–∞ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –º–µ–Ω—é.</li>
<li>–ù–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É <strong>Create Token</strong> –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.</li>
<li>–í—ã–±—Ä–∞—Ç—å —Ç–∏–ø —Ç–æ–∫–µ–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–µ–Ω, –∑–∞–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Ç–æ–∫–µ–Ω–∞.</li>
<li>–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å  <strong>API Token</strong> –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–æ–ª—å—à–µ –µ–≥–æ —É–≤–∏–¥–µ—Ç—å –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è, —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å)</li>
</ul>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>–û—Å—Ç–æ—Ä–æ–∂–Ω–æ</div><div class="admonitionContent_BuS1"><p>–¢–æ–∫–µ–Ω –Ω–µ–ª—å–∑—è —Å–≤–µ—Ç–∏—Ç—å –≥–¥–µ –ø–æ–ø–∞–ª–æ</p></div></div>
<p><a href="https://akmalov.com/assets/files/cloudflare-api-010f4fa6a891018ed0ab788080a40177.png" target="_blank"><img decoding="async" loading="lazy" alt="Cloudflare" src="https://akmalov.com/assets/images/cloudflare-api-010f4fa6a891018ed0ab788080a40177.png" width="1285" height="483" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-acmesh">Docker acme.sh<a href="https://akmalov.com/blog/wildcard-ssl-cert#docker-acmesh" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Docker acme.sh" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Docker acme.sh">‚Äã</a></h2>
<p>–ö–∞–∫ –æ–¥–∏–Ω –∏–∑ –±–æ–ª—å—à–∏—Ö –ø–æ–∫–ª–æ–Ω–Ω–∏–∫–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –Ω–µ —Ñ–∞–Ω–∞—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —á—Ç–æ-–ª–∏–±–æ –Ω–∞ —Ö–æ—Å—Ç —Å–∏—Å—Ç–µ–º—É, –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤.
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Ç–∞–∫–æ–≥–æ –∂–µ –º–Ω–µ–Ω–∏—è üíï</p>
<p>–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞ Github - <a href="https://github.com/acmesh-official/acme.sh/wiki/Run-acme.sh-in-docker" target="_blank" rel="noopener noreferrer"><strong>Run acme.sh in docker</strong></a></p>
<p>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ <a href="https://hub.docker.com/r/neilpang/acme.sh" target="_blank" rel="noopener noreferrer"><strong>Dockerhub</strong></a></p>
<p>–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é –∏–ª–∏ tag <code>latest</code>, –ø—Ä–∏–≤—ã–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> pull neilpang/acme.sh:3.0.6 </span><br></span></code></pre></div></div>
<p>–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>.env</code> —Ñ–∞–π–ª, —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">EMAIL=artur@example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">URL=example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WILDCARD_URL=*.example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CF_Token=Your cloudflare API TOKEN</span><br></span></code></pre></div></div>
<p>–í –Ω–∞—á–∞–ª–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ACME –ø–æ <strong>email</strong>, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–∞.</p>
<p>–ü–æ–ª—É—á–µ–Ω–Ω—ã–π –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ñ–∞–π–ª, –Ω—É–∂–µ–Ω –±—É–¥–µ—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã –∏ –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.</p>
<p>–ö–æ–º–∞–Ω–¥–∞ <code>-v "./acme_data":/acme.sh</code> –ø–æ–∑–≤–æ–ª–∏—Ç —Å–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Ö–æ—Å—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –∫–æ—Ç–æ—Ä—É—é –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –¥–∞–∂–µ –∫–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Ç—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∑–∞–∫—Ä–æ–µ—Ç—Å—è.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--rm</span><span class="token plain"> --env-file .env </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-v</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"./acme_data"</span><span class="token plain">:/acme.sh neilpang/acme.sh:3.0.6 --register-account </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-m</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$EMAIL</span><br></span></code></pre></div></div>
<p>–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Create account key ok.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Registered</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; ACCOUNT_THUMBPRINT='ACCOUNT KEY'</span><br></span></code></pre></div></div>
<p>–ó–∞–ø—Ä–æ—Å <strong>wildcard</strong> —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--rm</span><span class="token plain"> --env-file .env </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-v</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"./acme_data"</span><span class="token plain">:/acme.sh neilpang/acme.sh:3.0.6 </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--issue</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-d</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$URL</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-d</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">$WILDCARD_URL</span><span class="token plain">  </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">--dns</span><span class="token plain"> dns_cf</span><br></span></code></pre></div></div>
<p>–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω–∏–º–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ 3-7 –º–∏–Ω—É—Ç</p>
<p>–í –ª–æ–≥–∞—Ö –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –∑–∞–ø—Ä–æ—Å–∞:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Multi domain='DNS:example.com,DNS:*.example.com'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Getting domain auth token for each domain</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Getting webroot for domain='example.com'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Getting webroot for domain='*.example.com'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Adding record</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Added, OK</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; The txt record is added: Success.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Let's check each DNS record now. Sleep 20 seconds first.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Checking example.com for _acme-challenge.example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Domain example.com '_acme-challenge.example.com' success.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; All success, let's return</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Verifying: example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Processing, The CA is processing your order, please just wait. (1/30)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Success</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Removing DNS records.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Removed: Success</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Downloading cert.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; Cert success.</span><br></span></code></pre></div></div>
<p>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–ª—É—á–µ–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (—Å—Ä–æ–∫ 3 –º–µ—Å—è—Ü–∞), –≤—Å–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ <code>./acme_data</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-la</span><span class="token plain"> acme_data/example.com_ecc</span><br></span></code></pre></div></div>
<div class="language-output codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-output codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r-- 1456 Sep 24 18:33 example.com.cer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  566 Sep 24 18:33 example.com.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  477 Sep 24 18:29 example.com.csr</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  202 Sep 24 18:29 example.com.csr.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-------  227 Sep 24 18:28 example.com.key</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r-- 2668 Sep 24 18:33 ca.cer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r-- 4124 Sep 24 18:33 fullchain.cer</span><br></span></code></pre></div></div>
<p>–ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∫–æ–º–∞–Ω–¥–æ–π:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl x509 </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-in</span><span class="token plain"> acme_data/example.com_ecc/example.com.cer </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-text</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-noout</span><br></span></code></pre></div></div>
<p>–∏–ª–∏ –æ–Ω–ª–∞–π–Ω —Å–µ—Ä–≤–∏—Å–æ–º <a href="https://www.sslshopper.com/certificate-decoder.html" target="_blank" rel="noopener noreferrer">Certificate Decoder</a></p>
<p>–î–∞–ª—å—à–µ —Ç–æ–∂–µ –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å, —Å–æ–∑–¥–∞–≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫—É–¥–∞ –Ω—É–∂–Ω–æ.</p>]]></content>
        <category label="docker" term="docker"/>
        <category label="homelab" term="homelab"/>
        <category label="ssl" term="ssl"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Monitoring web hosts]]></title>
        <id>https://akmalov.com/blog/monitoring-web-hosts</id>
        <link href="https://akmalov.com/blog/monitoring-web-hosts"/>
        <updated>2023-07-13T10:42:00.000Z</updated>
        <summary type="html"><![CDATA[monitoring web ssl certificate expried uptime kuma grafana prometheus docker]]></summary>
        <content type="html"><![CDATA[<p>self-hosted —Å–µ—Ä–≤–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ö–æ—Å—Ç–æ–≤, –≤—Ä–µ–º–µ–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Å –æ–ø–æ–≤–µ—â–µ–Ω–∏—è–º–∏ –≤ telegram</p>
<p><a href="https://akmalov.com/blog/monitoring-web-hosts"><img decoding="async" loading="lazy" alt="Monitoring web hosts" src="https://akmalov.com/assets/images/monitoring-web-hosts-logo-b1ba2ab5f07b6e69140fa7c31431038e.png" width="1500" height="500" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uptime-kuma">Uptime-kuma<a href="https://akmalov.com/blog/monitoring-web-hosts#uptime-kuma" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Uptime-kuma" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Uptime-kuma">‚Äã</a></h2>
<p>–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–µ–Ω —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ —É–¥–æ–±–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ö–æ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å —É —Å–µ–±—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ—â–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–µ—Ä–≤–∏—Å–æ–º <code>Uptime-Kuma</code></p>
<p><a href="https://github.com/louislam/uptime-kuma" target="_blank" rel="noopener noreferrer">Uptime-Kuma</a></p>
<p><img decoding="async" loading="lazy" alt="Uptime-Kuma" src="https://akmalov.com/assets/images/uptime-kuma-87329102b96002a5c3aa7e6720f8c9e7.jpg" width="1024" height="641" class="img_ev3q"></p>
<p>–ì–ª–∞–≤–Ω—ã–µ —Ñ–∏—à–∫–∏:</p>
<ul>
<li>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ HTTP(s) / TCP / HTTP(s) Keyword / HTTP(s) Json Query / Ping / DNS</li>
<li>–õ–µ–∫–≥–æ –∏ –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤ docker-compose</li>
<li>–£–¥–æ–±–Ω—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</li>
<li>–û–ø–æ–≤–µ—â–µ–Ω–∏—è –≤ Telegram, Discord, Slack, Email (SMTP) –∏ —Ç.–¥.</li>
<li>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ (SSL Certificate info)</li>
<li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Proxy –∏ 2FA</li>
</ul>
<p>–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é, Uptime-Kuma –±—ã—Å—Ç—Ä–æ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏, –≤–∫–ª—é—á–∞—è —Ç–∞–∫–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –∫–∞–∫ Telegram, Discord –∏ Slack.</p>
<p>–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –ø–æ–ª–µ–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–∏—á–∏–Ω –ø—Ä–æ–±–ª–µ–º —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é, –ø–æ–º–æ–≥–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –∏ —É–ª—É—á—à–∞—Ç—å —Å–≤–æ–∏ —Å–µ—Ä–≤–∏—Å—ã.</p>
<p>–í —Ü–µ–ª–æ–º, Uptime-Kuma - —ç—Ç–æ –Ω–µ–∑–∞–º–µ–Ω–∏–º—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω–Ω—ã–º –≤ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–≤–æ–∏—Ö –≤–µ–±-—Å–µ—Ä–≤–∏—Å–æ–≤.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="—Å–µ—Ä–≤–µ—Ä-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞">–°–µ—Ä–≤–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞<a href="https://akmalov.com/blog/monitoring-web-hosts#%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80-%D0%BC%D0%BE%D0%BD%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%BD%D0%B3%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°–µ—Ä–≤–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°–µ—Ä–≤–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞">‚Äã</a></h2>
<p>–ï—Å–ª–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—ç–∫ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Promeheus + Grafana –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–≤–∞—Ç—å—Å—è blackbox exporter –∏ —Å–¥–µ–ª–∞—Ç—å —É–¥–æ–±–Ω—ã–π Dashboard –¥–ª—è —Å–µ–±—è. –û–± —ç—Ç–æ–º —Å–µ–π—á–∞—Å –∏ –±—É–¥—É –ø–∏—Å–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ</p>
<p><strong>–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ö–æ—Å—Ç–æ–≤ –∏ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞</strong></p>
<p><a href="https://akmalov.com/assets/files/grafana-ssl-certificate-expires-694b82ef0991ebbc6730e8e1f0dae8d2.png" target="_blank"><img decoding="async" loading="lazy" alt="Grafana ssl certificate expires" src="https://akmalov.com/assets/images/grafana-ssl-certificate-expires-694b82ef0991ebbc6730e8e1f0dae8d2.png" width="1872" height="470" class="img_ev3q"></a></p>
<p>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:</p>
<ul>
<li>Prometheus (—Å–±–æ—Ä –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)</li>
<li>Grafana (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)</li>
<li>Blackbox (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ http)</li>
<li>Alertmanager (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="—É—Å—Ç–∞–Ω–æ–≤–∫–∞">–£—Å—Ç–∞–Ω–æ–≤–∫–∞<a href="https://akmalov.com/blog/monitoring-web-hosts#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞">‚Äã</a></h3>
<p>–°–∞–º –ø—Ä–æ–µ–∫—Ç –Ω–∞ <a href="https://github.com/akmalovaa/monitoring-hosts-cert/tree/main" target="_blank" rel="noopener noreferrer">Github monitoring hosts</a></p>
<p>–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è docker-compose üê≥</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/akmalovaa/monitoring-hosts-cert.git</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> monitoring-hosts-cert</span><br></span></code></pre></div></div>
<ul>
<li>
<p>–ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω–µ—á–Ω—ã–µ —Ö–æ—Å—Ç—ã <code>/prometheus/prometheus.yml</code></p>
</li>
<li>
<p>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–µ–ª–µ–≥—Ä–∞–º <code>/alertmanager/config.yml</code></p>
</li>
<li>
<p>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –≥—Ä–∞—Ñ–∞–Ω—ã:</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-R</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">777</span><span class="token plain"> data/grafana/</span><br></span></code></pre></div></div>
<p>–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> up </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-d</span><br></span></code></pre></div></div>
<p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ps</span><br></span></code></pre></div></div>
<p>Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
<img decoding="async" loading="lazy" alt="telegram alertmanager" src="https://akmalov.com/assets/images/telegram-alertmanager-1f0e17b64f4d7e7240786c611a44877d.png" width="805" height="378" class="img_ev3q"></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ-–º–∞—Ç–µ—Ä–∏–∞–ª—ã">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã<a href="https://akmalov.com/blog/monitoring-web-hosts#%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%BC%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D0%B0%D0%BB%D1%8B" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã">‚Äã</a></h3>
<ul>
<li>
<p>Grafana labs - <a href="https://grafana.com/grafana/dashboards/13230-certificate-monitor/" target="_blank" rel="noopener noreferrer">Dashboard</a></p>
</li>
<li>
<p>Grafana blog - <a href="https://grafana.com/blog/2020/11/25/how-we-eliminated-service-outages-from-certificate-expired-by-setting-up-alerts-with-grafana-and-prometheus/" target="_blank" rel="noopener noreferrer">Post SSL alerting</a></p>
</li>
<li>
<p>Github Prometheus, Grafana, blackbox, alertmanager + caddy - <a href="https://github.com/stefanprodan/dockprom/tree/master" target="_blank" rel="noopener noreferrer">docker-compose example</a></p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-alertmanager-telegram">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Alertmanager telegram<a href="https://akmalov.com/blog/monitoring-web-hosts#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-alertmanager-telegram" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Alertmanager telegram" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Alertmanager telegram">‚Äã</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="bot-token">Bot token<a href="https://akmalov.com/blog/monitoring-web-hosts#bot-token" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Bot token" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Bot token">‚Äã</a></h5>
<p>–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á API –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª–µ <a href="https://t.me/BotFather" target="_blank" rel="noopener noreferrer">BotFather</a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="–ø–æ–ª—É—á–∏—Ç—å-chat-id-telegram">–ü–æ–ª—É—á–∏—Ç—å Chat ID telegram<a href="https://akmalov.com/blog/monitoring-web-hosts#%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D1%82%D1%8C-chat-id-telegram" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü–æ–ª—É—á–∏—Ç—å Chat ID telegram" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü–æ–ª—É—á–∏—Ç—å Chat ID telegram">‚Äã</a></h5>
<p>–ù–∞–ø–∏—à–∏—Ç–µ –ø–∞—Ä—É —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å–æ–∑–¥–∞–Ω–Ω–æ–º—É —Ç–æ–ª—å–∫–æ —á—Ç–æ –±–æ—Ç—É, –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> https://api.telegram.org/bot</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">TOKEN</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">/getUpdates </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> jq</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker-compose">docker-compose<a href="https://akmalov.com/blog/monitoring-web-hosts#docker-compose" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ docker-compose" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ docker-compose">‚Äã</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">version: "3.7"</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  prometheus:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: prometheus</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: prom/prometheus:v2.46.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - '--config.file=/etc/prometheus/prometheus.yml'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - '--storage.tsdb.path=/prometheus'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - '--web.console.libraries=/etc/prometheus/console_libraries'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - '--web.console.templates=/etc/prometheus/consoles'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - '--storage.tsdb.retention.time=30d'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - '--web.enable-lifecycle'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    user: root</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - 9090:9090</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - ./prometheus:/etc/prometheus/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - ./data/prometheus:/prometheus/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    restart: unless-stopped</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     - TZ="Asia/Yekaterinburg"</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  blackbox:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: blackbox</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: prom/blackbox-exporter:v0.24.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - '--config.file=/config/blackbox.yml'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - 9115:9115</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    restart: unless-stopped</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - ./blackbox:/config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  alertmanager:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: alertmanager</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: prom/alertmanager:v0.25.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - '--config.file=/etc/alertmanager/config.yml'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - '--storage.path=/alertmanager'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - 9093:9093</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - ./alertmanager:/etc/alertmanager/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    restart: unless-stopped</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  grafana:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    container_name: grafana</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: grafana/grafana:10.0.3-ubuntu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    depends_on:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - prometheus</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - 3000:3000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - ./data/grafana:/var/lib/grafana</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - ./grafana/dashboards:/etc/grafana/provisioning/dashboards</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - ./grafana/datasources:/etc/grafana/provisioning/datasources</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    restart: unless-stopped</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - GF_SECURITY_ADMIN_USER=${ADMIN_USER:-admin}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - GF_SECURITY_ADMIN_PASSWORD=${ADMIN_PASSWORD:-admin}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - GF_USERS_ALLOW_SIGN_UP=false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - TZ="Asia/Yekaterinburg"</span><br></span></code></pre></div></div>]]></content>
        <category label="monitoring" term="monitoring"/>
        <category label="ssl" term="ssl"/>
        <category label="docker" term="docker"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Docusaurus –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏]]></title>
        <id>https://akmalov.com/blog/docusaurus-comments</id>
        <link href="https://akmalov.com/blog/docusaurus-comments"/>
        <updated>2023-06-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Add commenst docusaurus, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ docusaurus —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Giscus]]></summary>
        <content type="html"><![CDATA[<p>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –æ–±—Å—É–∂–¥–µ–Ω–∏—è –≤ –∑–∞–ø–∏—Å—è—Ö –±–ª–æ–≥–∞ docusaurus</p>
<p><a href="https://akmalov.com/blog/docusaurus-comments"><img decoding="async" loading="lazy" alt="docusaurus comments" src="https://akmalov.com/assets/images/docusaurus-comments-434e8902a13264175b7df3a8acce9235.png" width="1500" height="500" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏-–∏-–æ–±—Å—É–∂–¥–µ–Ω–∏—è-–¥–ª—è-–±–ª–æ–≥–∞">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –¥–ª—è –±–ª–æ–≥–∞<a href="https://akmalov.com/blog/docusaurus-comments#%D0%BA%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B8-%D0%B8-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B4%D0%BB%D1%8F-%D0%B1%D0%BB%D0%BE%D0%B3%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –¥–ª—è –±–ª–æ–≥–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –¥–ª—è –±–ª–æ–≥–∞">‚Äã</a></h2>
<p>–ù–∞ –º–æ–π –≤–∑–≥–ª—è–¥ —ç—Ç–æ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–∞—è —à—Ç—É–∫–∞.</p>
<ul>
<li>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã—Å–∫–∞–∑–∞—Ç—å—Å—è –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º –º–Ω–µ–Ω–∏–µ–º, –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç—å —Ç–µ–º—É —Å—Ç–∞—Ç—å–∏.</li>
<li>–î–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è –∏–¥–µ–π –∏ –æ–±–º–µ–Ω–∞ –∑–Ω–∞–Ω–∏—è–º–∏, –º–æ–≥—É—Ç —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –¥–∏—Å–∫—É—Å—Å–∏–∏ –∏ –ø–æ–º–æ—á—å —É–∑–Ω–∞—Ç—å —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ.</li>
</ul>
<p>–ò—Å–∫–∞–ª —Ä–∞–∑–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –≤ –∏—Ç–æ–≥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –Ω–∞ <strong>Giscus</strong></p>
<p>–≠—Ç–æ opensource –ø—Ä–æ–µ–∫—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–±—Å—É–∂–¥–µ–Ω–∏–π —á–µ—Ä–µ–∑ Discussions Github</p>
<p>–û—Ñ—Ñ.—Å–∞–π—Ç - <a href="https://giscus.app/ru" target="_blank" rel="noopener noreferrer">https://giscus.app/ru</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-github">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Github<a href="https://akmalov.com/blog/docusaurus-comments#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-github" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Github" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Github">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–≤–∫–ª—é—á–∏—Ç—å-–æ–±—Å—É–∂–¥–µ–Ω–∏—è">–í–∫–ª—é—á–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏—è<a href="https://akmalov.com/blog/docusaurus-comments#%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C-%D0%BE%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D1%8F" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–∫–ª—é—á–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏—è" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –í–∫–ª—é—á–∏—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏—è">‚Äã</a></h3>
<p>–ù—É–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å Discussion –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è</p>
<p><img decoding="async" loading="lazy" alt="Discussion" src="https://akmalov.com/assets/images/discussions-enable-c0cf29e5f6d209e9f709bfdef3f613fa.png" width="1053" height="260" class="img_ev3q"></p>
<p>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —É–¥–∞–ª–∏–ª –ª–∏—à–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –æ—Å—Ç–∞–≤–∏–ª —Ç–æ–ª—å–∫–æ Generals</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="—É—Å—Ç–∞–Ω–æ–≤–∫–∞-giscus-app">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Giscus App<a href="https://akmalov.com/blog/docusaurus-comments#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-giscus-app" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Giscus App" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Giscus App">‚Äã</a></h3>
<p>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Giscus GitHub App</p>
<p><a href="https://github.com/apps/giscus" target="_blank" rel="noopener noreferrer">https://github.com/apps/giscus</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-giscus">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Giscus<a href="https://akmalov.com/blog/docusaurus-comments#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-giscus" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Giscus" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Giscus">‚Äã</a></h2>
<p>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm add @giscus/react</span><br></span></code></pre></div></div>
<p>–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">npm run swizzle @docusaurus/theme-classic BlogPostItem -- --wrap</span><br></span></code></pre></div></div>
<p>–î–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª –ø–æ –ø—É—Ç–∏ <code>src/theme/BlogPostItem/index.js</code></p>
<p>–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–∞–π–ª –≤ <strong>BlogPostItem.tsx</strong> –∏ –ø–æ–ª–æ–∂–∏—Ç—å —É—Ä–æ–≤–Ω–µ–º –≤—ã—à–µ –≤ –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∏—Ç—Å—è <code>src/theme/BlogPostItem.tsx</code></p>
<p>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–∞–π–ª–∞</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'react'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">BlogPostItem</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'@theme-original/BlogPostItem'</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> useBlogPost </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"@docusaurus/theme-common/internal"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Giscus</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"@giscus/react"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">default</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">BlogPostItemWrapper</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> isBlogPostPage </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">useBlogPost</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">isBlogPostPage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 203, 107)">BlogPostItem</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag spread punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token tag spread" style="color:rgb(255, 85, 114)">props</span><span class="token tag spread punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 203, 107)">BlogPostItem</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag spread punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token tag spread" style="color:rgb(255, 85, 114)">props</span><span class="token tag spread punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain-text">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">className</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">docusaurus-blog-comments</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:rgb(255, 203, 107)">Giscus</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">repo</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">akmalovaa/akmalov.com</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">repoId</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">R_kgDOI0gPCg</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">category</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">General</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">categoryId</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">DIC_kwDOI0gPCs4CXR_A</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">mapping</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">pathname</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">reactionsEnabled</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">1</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">emitMetadata</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">0</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">inputPosition</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">bottom</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">theme</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">dark</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">lang</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript string" style="color:rgb(195, 232, 141)">'ru'</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">            </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">loading</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">lazy</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">"</span><span class="token tag" style="color:rgb(255, 85, 114)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token tag" style="color:rgb(255, 85, 114)">          </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>–ø–æ–¥—Å–∫–∞–∑–∫–∞</div><div class="admonitionContent_BuS1"><p>–ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ª—É—á—à–µ –∏ –∫—É—Å–æ–∫ —Å Giscus –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ <code>src/components</code> –∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ dotenv —Ñ–∞–π–ª –ø–æ—Ç–¥—è–≥–∏–≤–∞—Ç—å</p></div></div>
<p>–ü–æ–∫–∞ –±—É–¥—É –¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç–æ –∏ —Ç–æ–ø–æ—Ä–Ω–æ, —Ç.–∫. github Discussion —Å–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∏ –≤–æ–∑–º–æ–∂–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ API - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—É–¥–µ—Ç –±—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.</p>
<p>–ü—Ä–æ–π–¥–µ–º—Å—è –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º:</p>
<ul>
<li><code>repo</code> —Ç—É—Ç –≤—Å–µ –ø–æ–Ω—è—Ç–Ω–æ –∞–≤—Ç–æ—Ä –∏ —Ä–µ–ø–æ</li>
<li><code>repoId</code> –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã—Ç–∞—â–∏—Ç—å —á–µ—Ä–µ–∑ API</li>
<li><code>category</code> –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ Discussion</li>
<li><code>categoryId</code> –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã—Ç–∞—â–∏—Ç—å —á–µ—Ä–µ–∑ API</li>
</ul>
<p>–£–¥–æ–±–Ω–µ–µ –≤—Å–µ–≥–æ ID –≤—ã—Ç–∞—Å–∫–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ GraphQL –∑–∞–ø—Ä–æ—Å –≤—ã—Ç–∞—Å–∫–∏–≤–∞—Ç—å.
–ï—Å–ª–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ Github CLI —Ç–æ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gh api graphql </span><span class="token parameter variable" style="color:rgb(191, 199, 213)">-f</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">query</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">'{ </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  repository(owner: "akmalovaa", name:"akmalov.com"){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    discussionCategories(first:10) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">      edges {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        node {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">          id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">          name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">'</span><br></span></code></pre></div></div>
<p>–ù—É–∂–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–∏ <strong>owner</strong> –∏ repo <strong>name</strong>. –í –æ—Ç–≤–µ—Ç –ø—Ä–∏–¥–µ—Ç json —Å ID —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.</p>
<p>–ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Github API —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤—ã—Ç–∞—â–∏—Ç—å, –Ω–æ —Å–ø–æ—Å–æ–± –≤—ã—à–µ –ø–æ–∫–∞–∑–∞–ª—Å—è –ø—Ä–æ—â–µ.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="–∏—Ç–æ–≥–æ">–ò—Ç–æ–≥–æ<a href="https://akmalov.com/blog/docusaurus-comments#%D0%B8%D1%82%D0%BE%D0%B3%D0%BE" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Ç–æ–≥–æ" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Ç–æ–≥–æ">‚Äã</a></h2>
<p>–í—Ä–æ–¥–µ –±–µ–∑ –æ—Å–æ–±—ã—Ö —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ —Å–≤–æ–µ–º –±–ª–æ–≥–µ —Å docusaurus.</p>
<p>–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–∞–Ω–∞–ª–æ–≥–∏ giscus) –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–æ–≤ <code>github issue</code>, –Ω–æ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è <code>github discussions</code> –ª—É—á—à–µ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –∏ –ø–æ –ª–æ–≥–∏–∫–µ –∏ –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É.</p>]]></content>
        <category label="docusaurus" term="docusaurus"/>
        <category label="github" term="github"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Gitlab auto add reviewers]]></title>
        <id>https://akmalov.com/blog/gitlab-auto-reviewers</id>
        <link href="https://akmalov.com/blog/gitlab-auto-reviewers"/>
        <updated>2023-05-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Gitlab auto assign reviewer for merge request]]></summary>
        <content type="html"><![CDATA[<p>Gitlab auto assign reviewer ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ assignee –∏ reviewers –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ mergre request</p>
<p><a href="https://akmalov.com/blog/gitlab-auto-reviewers"><img decoding="async" loading="lazy" alt="nginx logo" src="https://akmalov.com/assets/images/gitlab-reviewers-c3e4e494b3c1598ca2d3333cd210227a.png" width="1500" height="500" class="img_ev3q"></a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="gitlab-auto-add-reviewers">Gitlab auto add reviewers<a href="https://akmalov.com/blog/gitlab-auto-reviewers#gitlab-auto-add-reviewers" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Gitlab auto add reviewers" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Gitlab auto add reviewers">‚Äã</a></h2>
<p><strong>–¶–µ–ª—å</strong>: –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Merge Request —Å–¥–µ–ª–∞—Ç—å —É–¥–æ–±–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–≤—å—é–≤–µ—Ä–æ–≤</p>
<p><img decoding="async" loading="lazy" alt="mr reviewers" src="https://akmalov.com/assets/images/mr-f18b428bbad8907030149a86c8b83e1f.png" title="mr reviewers" width="1292" height="750" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-reviewer-templates">1. Reviewer templates<a href="https://akmalov.com/blog/gitlab-auto-reviewers#1-reviewer-templates" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 1. Reviewer templates" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 1. Reviewer templates">‚Äã</a></h2>
<p>–ü–µ—Ä–≤—ã–π —Å–ø–æ—Å–æ–± –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –≤ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ä–µ–≤—å—é–≤–µ—Ä–æ–≤ - —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ templates. –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ–∏—á–∞ Gitlab, –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–ª—è –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π.</p>
<p>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - <a href="https://docs.gitlab.com/ee/user/project/description_templates.html" target="_blank" rel="noopener noreferrer">Description templates</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞<a href="https://akmalov.com/blog/gitlab-auto-reviewers#%D0%BF%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞">‚Äã</a></h3>
<p>–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é <code>.gitlab/merge_request_templates</code></p>
<p>–°–æ–∑–¥–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ –ª—é–±–æ–π —Ñ–∞–π–ª —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è <code>.md</code></p>
<p>–ù–∞–ø—Ä–∏–º–µ—Ä <code>top_reviewers.md</code></p>
<p>–° —Ç–∞–∫–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º, –≥–¥–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å username —Ä–µ–≤—å—é–≤–µ—Ä–æ–≤:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/assign_reviewer @user1 @user2</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="gitlab template" src="https://akmalov.com/assets/images/gitlab-template-a81aa1e33546eba521e392c74d5b96c0.png" title="gitlab template" width="1283" height="328" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ<a href="https://akmalov.com/blog/gitlab-auto-reviewers#%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ">‚Äã</a></h3>
<p>–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–∞–∫–æ–≥–æ template, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö MR –ø–æ—è–≤–∏—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –≥–¥–µ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã</p>
<p><img decoding="async" loading="lazy" alt="gitlab template" src="https://akmalov.com/assets/images/gitlab-mr-template-44098fae936bf6b74d5cfb6958c9e6e1.png" title="gitlab template" width="1413" height="756" class="img_ev3q"></p>
<p>–£–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–±, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –≥—Ä—É–ø–ø —Ä–µ–≤–±—é–≤–µ—Ä–æ–≤, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å—Ç—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-bash-gitlab-api">2. Bash gitlab API<a href="https://akmalov.com/blog/gitlab-auto-reviewers#2-bash-gitlab-api" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 2. Bash gitlab API" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 2. Bash gitlab API">‚Äã</a></h2>
<p>–î–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –≤ <code>.gitlab-ci.yml</code> CI/CD, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç —á–µ—Ä–µ–∑ API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–æ–±–∞–≤–ª—è—Ç—å —Ä–µ–≤—å—é–≤–µ—Ä–æ–≤</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-1">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞<a href="https://akmalov.com/blog/gitlab-auto-reviewers#%D0%BF%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0-1" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞">‚Äã</a></h3>
<p>–î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è merge request –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è(—Ç—Ä–∏–≥–≥–µ—Ä—ã):</p>
<ul>
<li>Gitlab CI workflow event</li>
<li>Schedules</li>
<li>–ü—Ä–æ—á–∏–µ —Å–æ–±—ã—Ç–∏—è</li>
</ul>
<p>–Ø –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>workflow ‚Äî merge request event</code>, –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ–±–∞–≤–∏–ª –≤ <strong>workflow</strong> —Ç—Ä–∏–≥–≥–µ—Ä –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ MR:</p>
<div class="language-YAML language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">workflow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $CI_PIPELINE_SOURCE == "merge_request_event"</span><br></span></code></pre></div></div>
<p>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ <strong>Settings -&gt; CI/CD -&gt; Variables</strong></p>
<ul>
<li><code>$TOKEN</code> - Gitlab API Token</li>
</ul>
<p>–í gitlab runner –≥–¥–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è pipeline –Ω—É–∂–µ–Ω jq
–ó–∞—Ä–∞–Ω–µ–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã–π –∏–ª–∏ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–∫—Ä–∏–ø—Ç–∞:</p>
<div class="language-YAML language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">before_script</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> apt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">get install jq </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">y</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="—Å–∫—Ä–∏–ø—Ç">–°–∫—Ä–∏–ø—Ç<a href="https://akmalov.com/blog/gitlab-auto-reviewers#%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°–∫—Ä–∏–ø—Ç" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –°–∫—Ä–∏–ø—Ç">‚Äã</a></h3>
<p>–ü–æ—à–∞–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞:</p>
<ul>
<li>–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π merge request ID</li>
<li>–ü–æ–ª—É—á–∏—Ç—å ID –∞–≤—Ç–æ—Ä–∞ merge request</li>
<li>–ù–∞–∑–Ω–∞—á–∏—Ç—å Assigne = ID –ê–≤—Ç–æ—Ä–∞</li>
<li>–ù–∞–∑–Ω–∞—á–∏—Ç—å Reviewers = –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π  Reviewers(list)</li>
</ul>
<div class="language-YAML language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">PROJECT_URL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'https://gitlab.com/api/v4/projects/$CI_PROJECT_ID/merge_requests'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">REVIEWERS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'10043654'</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Reviewers Gitlab ID List</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">.gitlab_add_assignee_reviewers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">stage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> set up merge request</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> read LAST_MR_ID &lt; &lt;(curl </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">header "PRIVATE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">TOKEN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">$TOKEN" "$PROJECT_URL" </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> jq '.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> .iid')</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> read MR_AUTHOR &lt; &lt;(curl </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">header "PRIVATE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">TOKEN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">$TOKEN" "$PROJECT_URL/$LAST_MR_ID" </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> jq '.author </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> .id')</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># add assignee</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> curl </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">s </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">request PUT </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">header "PRIVATE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">TOKEN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">$TOKEN" "$PROJECT_URL/$LAST_MR_ID" </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">form "assignee_ids=$MR_AUTHOR" </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> jq '.assignees'</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># add reviewers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> curl </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">s </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">request PUT </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">header "PRIVATE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">TOKEN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">$TOKEN" "$PROJECT_URL/$LAST_MR_ID" </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">form "reviewer_ids=$REVIEWERS"</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-python-gitlab-api">3. Python gitlab API<a href="https://akmalov.com/blog/gitlab-auto-reviewers#3-python-gitlab-api" class="hash-link" aria-label="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 3. Python gitlab API" title="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ 3. Python gitlab API">‚Äã</a></h2>
<p>–î–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –±–æ–ª–µ–µ –≥–∏–±–∫–∏–π –∏ —É–¥–æ–±–Ω—ã–π –≤ –ø–ª–∞–Ω–µ –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —É—Å–ª–æ–≤–∏—è.
–ï—Å—Ç—å —Ç–∞–∫ –∂–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–∑—ã–≤–∞—Ç—å –∫–∞–∫ python script –≤ <code>gitlab-ci</code></p>
<p>–ü–æ–ª–Ω—ã–π –∫–æ–¥ –Ω–∞ <a href="https://github.com/akmalovaa/gitlab-auto-add-reviewers/tree/master/Python" target="_blank" rel="noopener noreferrer">github</a></p>
<p>Python/settings.py</p>
<div class="language-Python language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GITLAB_API_ADDR </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">'&lt;https://gitlab.com&gt;'</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Your Gitlab URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GITLAB_TOKEN</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">'YOUR GITLAB API TOKEN'</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># API Token use import .env</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GITLAB_ROOT_GROUP </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">''</span><span class="token plain">                      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Root Group optional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GITLAB_REVIEWERS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">list</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">10043654</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">         </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Gitlab Reviewrs ID</span><br></span></code></pre></div></div>
<p>Python/main.py</p>
<div class="language-Python language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> gitlab</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> typing</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gl </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gitlab</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Gitlab</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">settings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GITLAB_API_ADDR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> private_token</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">settings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GITLAB_TOKEN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_last_merge_requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">None</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">""" Get last merg request """</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> settings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GITLAB_ROOT_GROUP </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">''</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        all_mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> typing</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Any </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">mergerequests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">state</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"opened"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        all_mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> typing</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Any </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">groups</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">settings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GITLAB_ROOT_GROUP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">mergerequests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token builtin" style="color:rgb(130, 170, 255)">list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">state</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">"opened"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">try</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        last_mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> gitlab</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">v4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">merge_requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">MergeRequest </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> all_mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">except</span><span class="token plain"> IndexError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">"Merge requests - Not found"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    _auto_add_responsible</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">last_mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">_auto_add_responsible</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> gitlab</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">v4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">merge_requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GroupMergeRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">None</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    project</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> gitlab</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">v4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">projects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Project </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> gl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">projects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">project_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> lazy</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    editable_mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> gitlab</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">v4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">merge_requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ProjectMergeRequest </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        project</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">mergerequests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">iid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> lazy</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    editable_mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">assignee_id </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">author</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">"id"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    editable_mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">reviewer_ids </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> settings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GITLAB_REVIEWERS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">editable_mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    editable_mr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">save</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> __name__ </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"__main__"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    get_last_merge_requests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre></div></div>
<p>example for <code>.gitlab-ci.yml</code></p>
<div class="language-YAML language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">.python_add_reviewers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> pip install virtualenv</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> virtualenv venv</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> source venv/bin/activate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> pip install </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">r Python/requirements.txt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> python Python/main.py</span><br></span></code></pre></div></div>]]></content>
        <category label="gitlab" term="gitlab"/>
        <category label="devops" term="devops"/>
        <category label="bash" term="bash"/>
        <category label="python" term="python"/>
    </entry>
</feed>